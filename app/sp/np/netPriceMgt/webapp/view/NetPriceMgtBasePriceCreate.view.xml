<mvc:View controllerName="sp.np.netPriceMgt.controller.NetPriceMgtBasePriceCreate"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:lib-m="ext.lib.m"
    xmlns:t="sap.ui.table"
    xmlns:co="sap.suite.ui.commons"
    xmlns:rte="sap.ui.richtexteditor"
    xmlns:dnd="sap.ui.core.dnd"
    height="100%">

    <uxap:ObjectPageLayout
        showTitleInHeaderContent="true"
		showEditHeaderButton="true"
        upperCaseAnchorBar="false"
        headerContentPinnable="false"
        showAnchorBarPopover="false"
        showFooter="true">

		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
                    <HBox alignItems="End">
                        <OverflowToolbarButton type="Transparent" icon="sap-icon://nav-back" press=".onBack" />
                        <Title text="{I18N>/BASE_PRICE}{I18N>/CREATE}" />
                    </HBox>
				</uxap:expandedHeading>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap">
                <layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
                    <Label text="{I18N>/PRICE_SUBMISSION_NO} :"/>
                    <ObjectStatus class="sapMObjectStatusMiddle" text="PRICE_SUBMISSION_NO"/>
                    <Label text="{I18N>/REQUESTOR} :"/>
                    <ObjectStatus class="sapMObjectStatusMiddle" text="REQUESTOR"/>
                </layout:VerticalLayout>
                <layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
                    <Label text="{I18N>/DOCUMENT_TYPE} :"/>
                    <ObjectStatus class="sapMObjectStatusMiddle" text="DOCUMENT_TYPE"/>
                    <Label text="{I18N>/REQUEST_DATE} :"/>
                    <ObjectStatus class="sapMObjectStatusMiddle" text="REQUEST_DATE"/>
                </layout:VerticalLayout>
				<layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
					<Label text="{I18N>/STATUS} :"/>
                    <ObjectStatus id="status" class="sapMObjectStatusMiddle" text="{detailModel>/approval_status_name}" state="Error" />
				</layout:VerticalLayout>

                <!-- Process 시작 -->
                <layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
					<Label text="{I18N>/PROCESS} : "/>
                    <HBox>
                        <co:MicroProcessFlow>
                            <co:content>
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === 'DR' ? 'Error' : 'None'}" 
                                    stepWidth="5rem" 
                                    icon="{= ${detailModel>/approval_status_code} === 'DR' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === 'AR' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === 'AR' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === 'IA' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === 'IA' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === 'AP' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === 'AP' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === 'RJ' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === 'RJ' ? 'sap-icon://circle-task' : ''}" />
                            </co:content>
                        </co:MicroProcessFlow>
                    </HBox>
                    <HBox>
                        <Text text="{rootModel>/processList/0/code_name}" width="4rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/1/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/2/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/3/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/4/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/5/code_name}" width="6rem" textAlign="Center" />
                    </HBox>
				</layout:VerticalLayout>
                <!-- Process 시작 -->
			</FlexBox>
		</uxap:headerContent>

        <uxap:sections>
            <!-- Master Information 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MASTER_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <form:SimpleForm
                                layout="ResponsiveGridLayout"
                                adjustLabelSpan="false">
                                <form:content>
                                    <HBox>
                                        <VBox>
                                            <Label text="{I18N>/TITLE}" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <Input id="approval_title" width="20rem" placeholder="" editable="{detailViewModel>/viewMode}" value="{detailModel>/approval_title}" />
                                        </VBox>
                                        <layoutData>
                                            <layout:GridData span="XL12 L12 M12 S12" />
                                        </layoutData>
                                    </HBox>
                                    <HBox>
                                        <VBox>
                                            <Label text="{I18N>/DESCRIPTION}"/>
                                            <rte:RichTextEditor id="approval_contents" 
                                                width="100%" 
                                                height="200px" 
                                                value="{detailModel>/approval_contents}" 
                                                customToolbar="true" 
                                                showGroupFont="true" 
                                                showGroupLink="true" 
                                                showGroupInsert="true"
                                                editable="{detailViewModel>/viewMode}" />
                                            <!-- Text Editor 끝 -->
                                            <!-- <layout:VerticalLayout id="idVerticalLayout" class="sapUiContentPadding" width="100%" /> -->
                                        </VBox>
                                        <layoutData>
                                            <layout:GridData span="XL12 L12 M12 S12" />
                                        </layoutData>
                                    </HBox>
                                </form:content>
                            </form:SimpleForm>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Master Information 끝 -->

            <!-- General Information 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/DETAIL_INFORMATION}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <VBox>
                                <t:Table 
                                    id="generalInfoTbl"
                                    selectionMode="MultiToggle"
                                    rows="{generalInfoList>/GeneralView}"
                                    rowSelectionChange=".onRowSelectionChange"
                                    fixedColumnCount="3"
                                    visibleRowCountMode="Auto">
                                    <t:extension>
                                        <OverflowToolbar class="sapFDynamicPageAlignContent">
                                            <ToolbarSpacer />
                                            <Button  text="{I18N>/SIMPLE_CHANGE}" type="Transparent" press=".onSimpleChangePress"  /> 
                                            <Button text="{I18N>/UPLOAD}" type="Transparent" press=".onDeveloping" visible="{detailViewModel>/viewMode}" />
                                            <Button text="{I18N>/ADDITION}" type="Transparent" press=".onAddGeneralInfo" visible="{detailViewModel>/viewMode}" />
                                            <Button text="{I18N>/DELETE}" type="Transparent" press=".onDeleteGeneralInfo" visible="{detailViewModel>/viewMode}" />
                                        </OverflowToolbar>
                                    </t:extension>
                                    <t:columns>
                                        <t:Column id="mainColumnState" hAlign="Center" width="40px" >
                                            <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                            <t:template>
                                                <ObjectStatus icon="{path: 'generalInfoList>_row_state_', formatter: '.formatter.toModelStateColumnIcon'}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="3rem">
                                            <Label text="{I18N>/SEQUENCE}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>item_sequence}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/OPERATION_ORG}" textAlign="Center" required="true"/>
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>org_code'}" />    
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/MATERIAL_CODE}" textAlign="Center" required="true"/>
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" valueHelpRequest=".vhMaterialOrgCode" value="{path: 'generalInfoList>material_code'}" editable="{detailViewModel>/viewMode}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER}" textAlign="Center" required="true"/>
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" valueHelpRequest=".vhSupplierCode" value="{path: 'generalInfoList>supplier_code'}" editable="{detailViewModel>/viewMode}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>supplier_local_name}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="({I18N>/CURRENT}){I18N>/CURRENCY}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>curr_currency_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="({I18N>/CURRENT}){I18N>/NET_PRICE}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>curr_net_price', formatter: '.numberFormat'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem"><!-- 콤보작업 -->
                                            <Label text="({I18N>/NEW}){I18N>/CURRENCY}" textAlign="Center" required="true"/>
                                            <t:template>
                                                <ComboBox
                                                    width="100%"
                                                    items="{
                                                            path: 'currency>/Currency',
                                                            filters: [
                                                            ],
                                                            templateShareable:false
                                                    }" selectedKey="{generalInfoList>currency_code}"
                                                    editable="{detailViewModel>/viewMode}">
                                                    <items>
                                                        <core:Item key="{currency>currency_code}" text="{currency>currency_code}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="({I18N>/NEW}){I18N>/NET_PRICE}" textAlign="Center" width="100%" required="true"/>
                                            <t:template>
                                                <Input type="Number" value="{path : 'generalInfoList>net_price'}" editable="{detailViewModel>/viewMode}" textAlign="Right" change=".generalInfoChange" />
                                            </t:template>
                                        </t:Column>
                                    </t:columns>
                                </t:Table>
                            </VBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- General Information 끝 -->
        </uxap:sections>

        <!-- footer 시작 -->
        <uxap:footer>
			<OverflowToolbar>
				<ToolbarSpacer />
                <Button id="draftBtn" text="{I18N>/DRAFT}" press=".onDraft" class="btnGrp"/>
                <Button id="cancelBtn" text="{I18N>/CANCEL}" press=".onCancel" class="btnGrp"/>
                <Button id="deleteBtn" text="{I18N>/DELETE}" press=".onDelete" class="btnGrp"/>
                <Button id="requestBtn" type="Emphasized" text="{I18N>/REQUEST}" press=".onRequest" class="btnGrp"/>
			</OverflowToolbar>
		</uxap:footer>
        <!-- footer 끝 -->
    </uxap:ObjectPageLayout>
</mvc:View>
