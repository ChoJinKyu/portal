<mvc:View controllerName="sp.np.netPriceMgt.controller.NetPriceMgtDetail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:lib-m="ext.lib.m"
    xmlns:t="sap.ui.table"
    xmlns:co="sap.suite.ui.commons"
    xmlns:rte="sap.ui.richtexteditor"
    xmlns:dnd="sap.ui.core.dnd"
    height="100%">

    <uxap:ObjectPageLayout
        showTitleInHeaderContent="true"
		showEditHeaderButton="true"
        upperCaseAnchorBar="false"
        headerContentPinnable="false"
        showAnchorBarPopover="false"
        showFooter="true">

		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
                    <HBox alignItems="End">
                        <OverflowToolbarButton type="Transparent" icon="sap-icon://nav-back" press=".onBack" />
                        <Title text="{I18N>/NEW_BASE_PRICE}" />
                    </HBox>
				</uxap:expandedHeading>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap">
                <!-- Requester 시작 -->
                <layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
                    <ObjectStatus id="approvalNumber" title="{I18N>/APPROVAL_NUMBER}" text="{detailModel>/approvalNumber}"/>
                    <ObjectStatus id="requetor" title="{I18N>/REQUESTOR}" text="{detailModel>/requestorEmpno}"/>
                    <ObjectStatus id="requestDate" title="{I18N>/REQUEST_DATE}" text="{detailModel>/requestDate}"/>
                </layout:VerticalLayout>
                <!-- Requester 끝 -->

                <!-- Status 시작 -->
				<layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
					<Label text="{I18N>/STATUS} :"/>
                    <ObjectStatus id="status" class="sapMObjectStatusLarge" text="{detailModel>/status}" state="Error" />
				</layout:VerticalLayout>
                <!-- Status 끝 -->

                <!-- Process 시작 -->
                <layout:VerticalLayout class="sapUiLargeMarginBeginEnd">
					<Label text="{I18N>/PROCESS} : "/>
                    <HBox>
                        <co:MicroProcessFlow>
                            <co:content>
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === '10' ? 'Error' : 'None'}" 
                                    stepWidth="5rem" 
                                    icon="{= ${detailModel>/approval_status_code} === '10' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === '20' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === '20' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === '30' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === '30' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === '40' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === '40' ? 'sap-icon://circle-task' : ''}" />
                                <co:MicroProcessFlowItem 
                                    state="{= ${detailModel>/approval_status_code} === '50' ? 'Error' : 'None'}" 
                                    stepWidth="5rem"
                                    icon="{= ${detailModel>/approval_status_code} === '50' ? 'sap-icon://circle-task' : ''}" />
                            </co:content>
                        </co:MicroProcessFlow>
                    </HBox>
                    <HBox>
                        <Text text="{rootModel>/processList/0/code_name}" width="4rem" />
                        <Text text="{rootModel>/processList/1/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/2/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/3/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/4/code_name}" width="6rem" textAlign="Center" />
                        <Text text="{rootModel>/processList/5/code_name}" width="6rem" textAlign="Center" />
                    </HBox>
				</layout:VerticalLayout>
                <!-- Process 시작 -->
			</FlexBox>
		</uxap:headerContent>

        <uxap:sections>
            <!-- Master Information 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MASTER_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <form:SimpleForm
                                layout="ResponsiveGridLayout"
                                adjustLabelSpan="false">
                                <form:content>
                                    <HBox>
                                        <VBox>
                                            <Label text="{I18N>/TITLE}" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <Input width="20rem" placeholder="" editable="{detailViewModel>/viewMode}" value="{detailModel>/approvalTitle}" />
                                        </VBox>
                                        <layoutData>
                                            <layout:GridData span="XL12 L12 M12 S12" />
                                        </layoutData>
                                    </HBox>
                                    <HBox>
                                        <VBox>
                                            <Label text="Document Type" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <ComboBox id="net_price_document_type_code"
                                                width="100%"
                                                items="{
                                                        path: 'util>/Code',
                                                        filters: [
                                                            {path: 'group_code', operator: 'EQ', value1: 'SP_DOCUMENT_TYPE'}
                                                        ]
                                                    }" selectedKey="{detailModel>company_code}" change="cChanged">
                                                <items>
                                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                                </items>
                                            </ComboBox>
                                            <layoutData>
                                                <layout:GridData span="XL2 L2 M2 S12" />
                                            </layoutData>
                                        </VBox>
                                        <VBox>
                                            <Label text="Document Source" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <ComboBox id="net_price_source_code"
                                                width="100%"
                                                items="{
                                                        path: 'util>/Code',
                                                        filters: [
                                                            {path: 'group_code', operator: 'EQ', value1: 'NET_PRICE_SOURCE_CODE'}
                                                        ]
                                                    }">
                                                <items>
                                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                                </items>
                                            </ComboBox>
                                            <layoutData>
                                                <layout:GridData span="XL2 L2 M2 S12" />
                                            </layoutData>
                                        </VBox>
                                        <VBox>
                                            <Label text="Net Price Type" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <ComboBox id="net_price_type_code"
                                                width="100%"
                                                items="{
                                                        path: 'util>/Code',
                                                        filters: [
                                                            {path: 'group_code', operator: 'EQ', value1: 'SP_NET_PRICE_TYPE'}
                                                        ]
                                                    }">
                                                <items>
                                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                                </items>
                                            </ComboBox>
                                            <layoutData>
                                                <layout:GridData span="XL2 L2 M2 S12" />
                                            </layoutData>
                                        </VBox>
                                        <layoutData>
                                            <layout:GridData span="XL12 L12 M12 S12" />
                                        </layoutData>
                                    </HBox>
                                    <HBox>
                                        <VBox>
                                            <Label text="{I18N>/EFFECTIVE_START_DATE}" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <DatePicker id="effective_start_date" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" editable="true" navigate="onclickDate" value="9999-12-31"/>
                                            <layoutData>
                                                <layout:GridData span="XL2 L2 M2 S12" />
                                            </layoutData>
                                        </VBox>
                                        <VBox>
                                            <Label text="{I18N>/EFFECTIVE_END_DATE}" class="sapUiTinyMarginEnd" textAlign="Left" labelFor="input" required="true"/>
                                            <DatePicker id="effective_end_date" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" editable="true" navigate="onclickDate" value="9999-12-31"/>
                                            <layoutData>
                                                <layout:GridData span="XL2 L2 M2 S12" />
                                            </layoutData>
                                        </VBox>
                                        <layoutData>
                                            <layout:GridData span="XL12 L12 M12 S12" />
                                        </layoutData>
                                    </HBox>
                                    <HBox>
                                        <VBox>
                                            <Label text="{I18N>/DESCRIPTION}" required="true"/>
                                            <rte:RichTextEditor width="100%" height="200px" value="{detailModel>/approval_request_desc}" 
                                                customToolbar="true" 
                                                showGroupFont="true" 
                                                showGroupLink="true" 
                                                showGroupInsert="true"
                                                editable="{detailViewModel>/viewMode}" />
                                            <!-- Text Editor 끝 -->
                                        </VBox>
                                        <layoutData>
                                            <layout:GridData span="XL12 L12 M12 S12" />
                                        </layoutData>
                                    </HBox>
                                </form:content>
                            </form:SimpleForm>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Master Information 끝 -->

            <!-- General Information 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/GENERAL_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <VBox>
                                <t:Table 
                                    id="generalInfoTbl"
                                    selectionMode="MultiToggle"
                                    rows="{generalInfoList>/GeneralView}"
                                    rowSelectionChange=".onRowSelectionChange"
                                    fixedColumnCount="3"
                                    visibleRowCountMode="Auto">
                                    <t:extension>
                                        <OverflowToolbar class="sapFDynamicPageAlignContent">
                                            <ToolbarSpacer />
                                            <Button text="{I18N>/UPLOAD}" type="Transparent" press=".onDeveloping" visible="{detailViewModel>/viewMode}" />
                                            <Button text="{I18N>/ADDITION}" type="Transparent" press=".onAddBasePrice" visible="{detailViewModel>/viewMode}" />
                                            <Button text="{I18N>/DELETE}" type="Transparent" press=".onDeleteBasePrice" visible="{detailViewModel>/viewMode}" />
                                        </OverflowToolbar>
                                    </t:extension>
                                    <t:columns>
                                        <t:Column id="mainColumnState" hAlign="Center" width="40px" >
                                            <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                            <t:template>
                                                <ObjectStatus icon="{path: 'generalInfoList>_row_state_', formatter: '.formatter.toModelStateColumnIcon'}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/OPERATION_ORG}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>org_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/MATERIAL_CODE}" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" valueHelpRequest=".vhMaterialCode" value="{path: 'generalInfoList>material_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/DESCRIPTION}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>material_desc}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER} Code" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" valueHelpRequest=".vhSupplierCode" value="{path: 'generalInfoList>supplier_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER} Name" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>supplier_local_name}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER} (Eng)Name" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>supplier_english_name}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="SD Mapping" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>sd_mapping_no}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="SD File" textAlign="Center" />
                                            <t:template>
                                                <Text text="{generalInfoList>sd_file_group_no}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/VENDOR_POOL_CODE}" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" valueHelpRequest=".vhVendorPoolCode" value="{path: 'generalInfoList>vendor_pool_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/VENDOR_POOL}" textAlign="Center" />
                                            <t:template>
                                                <Text type="Text" text="{path: 'generalInfoList>vendor_pool_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/CHANGE_REASON_CODE}" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" valueHelpRequest=".vhVendorPoolCode" value="{path: 'generalInfoList>net_price_approval_reason_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/REASON}" textAlign="Center" />
                                            <t:template>
                                                <Text type="Text" text="{path: 'generalInfoList>net_price_approval_reason_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/MARKET_CODE}" textAlign="Center" />
                                            <t:template>
                                                <ComboBox
                                                    width="100%"
                                                    items="{
                                                            path: 'util>/Code',
                                                            filters: [
                                                                {path: 'group_code', operator: 'EQ', value1: 'DP_VI_MARKET_CODE'},
                                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                            ]
                                                        }">
                                                    <items>
                                                        <core:Item key="{util>code}" text="{util>code_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <!-- <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/MARKET}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>market_name'}"  />
                                            </t:template>
                                        </t:Column> -->
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/EFFECTIVE_START_DATE}" textAlign="Center" />
                                            <t:template>
                                                <DatePicker placeholder="Date" value="{path: 'generalInfoList>/effective_start_date',type: 'sap.ui.model.odata.type.DateTime'}" valueFormat="yyyy-MM-dd" displayFormat="yyyy-MM-dd"/>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/EFFECTIVE_END_DATE}" textAlign="Center" />
                                            <t:template>
                                                <DatePicker placeholder="Date" value="{path: 'generalInfoList>/effective_end_date',type: 'sap.ui.model.odata.type.DateTime'}" valueFormat="yyyy-MM-dd" displayFormat="yyyy-MM-dd"/>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Line Type Code" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" value="{generalInfoList>line_type_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Line Type" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>line_type_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/UOM}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>uom'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(현재)Currency" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>curr_currency_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(현재)Price" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>curr_net_price'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(New)Currency" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>currency_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(New)Price" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>net_price}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="변동비율(%)" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>change_rate'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="로열티" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>royalty}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="임가공비" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>pcst}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="감상비" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>depreciation}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="기타" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>etc_cost}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="최저가Part여부" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>lowest_part_flag'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Import PO 유형" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>import_po_type}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Surrogate code" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>surrogate_type_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Surrogate" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>surrogate_type_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Maker code" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" showValueHelp="true" value="{generalInfoList>maker_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Maker" textAlign="Center" />
                                            <t:template>
                                                <Input type="Text" value="{generalInfoList>maker_name}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Payment Term Code" textAlign="Center" />
                                            <t:template>
                                                <ComboBox
                                                    width="100%"
                                                    items="{
                                                            path: 'util>/Code',
                                                            filters: [
                                                                {path: 'group_code', operator: 'EQ', value1: 'PAYMENT_TERMS'},
                                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                            ]
                                                        }">
                                                    <items>
                                                        <core:Item key="{util>code}" text="{util>code_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(단가합의) 여부" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>net_price_agreement_sign_flag'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Supplier Agreement) Status code" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>net_price_agreement_status_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Supplier Agreement) Status" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>net_price_agreement_status_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Incoterms" textAlign="Center" />
                                            <t:template>
                                                <ComboBox
                                                    width="100%"
                                                    items="{
                                                            path: 'util>/Code',
                                                            filters: [
                                                                {path: 'group_code', operator: 'EQ', value1: 'OP_INCOTERMS'},
                                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                            ]
                                                        }">
                                                    <items>
                                                        <core:Item key="{util>code}" text="{util>code_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="부품인정여부" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>quality_certi_flag'}"  />
                                            </t:template>
                                        </t:Column>
                                    </t:columns>
                                </t:Table>
                            </VBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- General Information 끝 -->

            <!-- Base Price Info 시작 -->
            <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/BASE_PRICE_LIST}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <VBox>
                                <t:Table 
                                    id="basePriceTbl"
                                    selectionMode="Single"
                                    rows="{generalInfoList>/GeneralView}"
                                    fixedColumnCount="3"
                                    visibleRowCountMode="Auto">
                                    <!-- <t:extension>
                                        <OverflowToolbar class="sapFDynamicPageAlignContent">
                                            <ToolbarSpacer />
                                            <Button text="{I18N>/UPLOAD}" type="Transparent" press=".onDeveloping" visible="{detailViewModel>/viewMode}" />
                                            <Button text="{I18N>/ADDITION}" type="Transparent" press=".onAddBasePrice" visible="{detailViewModel>/viewMode}" />
                                            <Button text="{I18N>/DELETE}" type="Transparent" press=".onDeleteBasePrice" visible="{detailViewModel>/viewMode}" />
                                        </OverflowToolbar>
                                    </t:extension> -->
                                    <t:columns>
                                        <!-- <t:Column id="mainColumnState2" hAlign="Center" width="40px" >
                                            <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                            <t:template>
                                                <ObjectStatus icon="{path: 'generalInfoList>_row_state_', formatter: '.formatter.toModelStateColumnIcon'}" />
                                            </t:template>
                                        </t:Column> -->
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/COMPANY}" textAlign="Center" />
                                            <t:template>
                                                <ComboBox width="100%" 
                                                    editable="{= ${detailViewModel>/viewMode} &amp;&amp; ${rootModel>/config/DP_VI_COMPANY_EDITABLE_FLAG} === 'Y' ? true : false}"
                                                    selectedKey="{generalInfoList>company_code}" 
                                                    items="{
                                                        path: 'org>/Company',
                                                        filters: [
                                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                        ],
                                                        sorter: { path: 'company_code'},
                                                        templateShareable:false
                                                    }"
                                                    change=".onChangeCompany">
                                                    <items>
                                                        <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label  text="{I18N>/VI_APPROVE_ORG_CODE}" textAlign="Center" />
                                            <t:template>
                                                <ComboBox width="100%"
                                                    selectedKey="{path: 'generalInfoList>org_code',templateShareable:false}" 
                                                    items="{path: 'detailModel>purOrg',templateShareable:false}">
                                                    <items>
                                                        <core:Item key="{detailModel>org_code}" text="[{detailModel>org_code}]{detailModel>org_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/MATERIAL_CODE}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>material_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER_CODE}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>supplier_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER_CODE}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>supplier_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>supplier_local_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/SUPPLIER_NAME} ENG" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>supplier_english_name'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/CURRENCY}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>currency_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="{I18N>/NET_PRICE}" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>net_price'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="BaseCode" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>base_price_type_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(December)Currency" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>pyear_dec_base_currency_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(December)Base Price" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>pyear_dec_base_price'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(December)Rate" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>pyear_dec_ci_rate'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Quarter)Currency" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>quarter_base_currency_code'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Quarter)Base Price" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>quarter_base_price'}"  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Consultation)Consulation" textAlign="Center" />
                                            <t:template>
                                                <Text text=""  />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Consultation)Status" textAlign="Center" />
                                            <t:template>
                                                <Text text="{path: 'generalInfoList>consultation_status'}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="(Consultation)Request" textAlign="Center" />
                                            <t:template>
                                                <Text text="" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <Label text="Raw Material Compatible Part" textAlign="Center" />
                                            <t:template>
                                                <Text text="" />
                                            </t:template>
                                        </t:Column>
                                    </t:columns>
                                </t:Table>
                            </VBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Base Price Info 끝 -->

            <!-- Nego History Info 시작 -->
            <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/NEGOTIATION} {I18N>/HISTORY}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <VBox>
                                <t:Table 
                                    selectionMode="MultiToggle"
                                    rows="{detailModel>/details}"
                                    rowSelectionChange=".onRowSelectionChange"
                                    fixedColumnCount="3"
                                    visibleRowCountMode="Auto">
                                    <t:columns>
                                        <t:Column hAlign="Center" width="18rem">
                                            <Label text="{I18N>/COMPANY}" textAlign="Center" />
                                            <t:template>
                                                <ComboBox width="100%" 
                                                    editable="{= ${detailViewModel>/viewMode} &amp;&amp; ${rootModel>/config/DP_VI_COMPANY_EDITABLE_FLAG} === 'Y' ? true : false}"
                                                    selectedKey="{detailModel>company_code}" 
                                                    items="{
                                                        path: 'org>/Company',
                                                        filters: [
                                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                        ],
                                                        sorter: { path: 'company_code'},
                                                        templateShareable:false
                                                    }"
                                                    change=".onChangeCompany">
                                                    <items>
                                                        <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="18rem">
                                            <Label  text="{I18N>/VI_APPROVE_ORG_CODE}" textAlign="Center" />
                                            <t:template>
                                                <ComboBox width="100%"
                                                    editable="{detailViewModel>/viewMode}"
                                                    selectedKey="{
                                                        path: 'detailModel>org_code',
                                                        templateShareable:false}" 
                                                    items="{
                                                        path: 'detailModel>purOrg',
                                                        templateShareable:false}">
                                                    <items>
                                                        <core:Item key="{detailModel>org_code}" text="[{detailModel>org_code}]{detailModel>org_name}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                    </t:columns>
                                </t:Table>
                            </VBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Nego History Info 끝 -->

            <!-- Attachment 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/ATTACHMENT}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- File Upload 시작-->
                            <UploadCollection
                                id="UploadCollection"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="true"
                                sameFilenameAllowed="true"
                                instantUpload="false"
                                noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                change="onChange"
                                fileDeleted="onFileDeleted"
                                filenameLengthExceed="onFilenameLengthExceed"
                                fileSizeExceed="onFileSizeExceed"
                                typeMissmatch="onTypeMissmatch"
                                uploadComplete="onUploadComplete"
                                beforeUploadStarts="onBeforeUploadStarts" />
                            <!-- File Upload 끝-->
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- GAttachment 끝 -->

            <!-- Report Line 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/APPROVAL_LINE}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- Approval & Reference 시작 -->
                            <VBox>
                                <Table id="ApproverTable"       
                                        growing="true"
                                        growingThreshold="20"
                                        class="sapFDynamicPageAlignContent" 
                                        updateFinished=".onListMainTableUpdateFinished"
                                        mode="SingleSelectMaster"
                                        width="auto"
                                        items="{approver>/Approvers}">
                                    <headerToolbar>
                                        <OverflowToolbar>
                                            <Label text="Approval Line"/> 
                                            <ObjectStatus icon="sap-icon://move" text="" tooltip="드래그앤드랍으로 승인라인을 변경할 수 있습니다." /> 
                                        </OverflowToolbar>
                                    </headerToolbar>
                                    <columns>
                                        <Column id="approver_empno" hAlign="Center" visible="false" width="3em" >
                                            <Text text="approver_empno" />
                                        </Column>
                                        <Column id="no" hAlign="Center"  width="3.5em" >
                                            <Text text="{I18N>/SEQUENCE}" />
                                        </Column>
                                        <Column id="type" hAlign="Center" width="10em" >
                                            <Text text="{I18N>/TYPE}" />
                                        </Column>
                                        <Column id="nameDept" hAlign="Center" width="20em" >
                                            <HBox><Text text="{I18N>/NAME}" /><Text text="/" /><Text text="{I18N>/DEPARTMENT}" /></HBox>
                                        </Column>
                                        <Column id="approver_status" hAlign="Center" width="12em" >
                                            <Text text="{I18N>/STATUS}" />
                                        </Column> 
                                        <Column id="comment" hAlign="Center" >
                                            <Text text="{I18N>/COMMENT}" />
                                        </Column>
                                        <Column id="add" hAlign="Center" width="5em" >
                                            <Text text="{I18N>/ROW_ADD}"  />
                                        </Column>					
                                        <Column id="delete" hAlign="Center" width="5em" >
                                            <Text text="{I18N>/ROW_DELETE}" />
                                        </Column>					
                                    </columns>
                                    <dragDropConfig>
                                        <dnd:DragDropInfo
                                            sourceAggregation="items" 
                                            targetAggregation="items" 
                                            dropPosition="Between" 
                                            dragStart="onDragStartTable" 
                                            drop="onDragDropTable"   /> 
                                        
                                    </dragDropConfig>					
                                    <items>
                                        <ColumnListItem type="Active" press=".onItemPress">
                                            <cells>
                                                <Text text="{approver>approver_empno}"  />
                                                <Text text="{approver>approve_sequence}" />
                                                <ComboBox width="100%"
                                                    selectedKey="{approver>approver_type_code}" 
                                                    items="{ path : 'util>/Code',
                                                                filters : [
                                                                    {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                                    {path : 'group_code', operator : 'EQ', value1 : 'CM_APPROVER_TYPE'}
                                                                ],
                                                                sorter: { path: 'sort_no'} 
                                                            }"
                                                    enabled="{approver>selRow}" >  
                                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                                </ComboBox>
                                                <Input value="{approver>approver_name}" placeholder="Search employee"
                                                    enabled="{approver>selRow}"
                                                    showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                                                </Input>
                                                <Text text="{approver>approve_status_code}" />
                                                <Text text="{approver>approve_comment}" />
                                                <Button icon="sap-icon://sys-add" press=".onApproverAdd(${approver>approve_sequence})" tooltip="add" />
                                                <Button icon="sap-icon://delete" press=".setApproverRemoveRow(${approver>approve_sequence})" tooltip="delete" />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>

                                <Text text="Referrer" />
                                <Input value="{detailModel>/abc}" showValueHelp="true" valueHelpRequest=".onOpenMaterialCode" />
                            </VBox>
                            <!-- Approval & Reference 끝 -->
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Report Line 끝 -->
        </uxap:sections>

        <!-- footer 시작 -->
        <uxap:footer>
			<OverflowToolbar visible="{= ${detailModel>/approval_status_code} === '10' ? true : false}">
				<ToolbarSpacer />
                <Button
                    text="{I18N>/SAVE}"
                    visible="{= ${detailViewModel>/viewMode}}"
                    press=".onTmpSave" />
                <Button
                    text="{I18N>/CHANGE_DEVELOPER}"
                    visible="{= ${detailViewModel>/viewMode}}"
                    press=".onDeveloping" />
                <Button
                    text="{I18N>/EDIT}" 
                    visible="{= !${detailViewModel>/viewMode}}"
                    press=".onEditToggle" />
                <Button
                    text="{I18N>/CANCEL}"
                    visible="{= ${detailViewModel>/viewMode}}"
                    press=".onEditToggle" />
				<Button
                    text="{I18N>/DRAFT}" 
                    visible="{= ${detailViewModel>/viewMode}}"
                    press=".onDraft" />
                <Button
                    text="{I18N>/DELETE}" 
                    visible="{= !${detailViewModel>/viewMode} &amp;&amp; ${detailModel>/approval_number} !== '' ? true : false}"
                    press=".onDelete" />
                <Button
                    type="Emphasized"
                    text="{I18N>/REQUEST}"
                    visible="{= !${detailViewModel>/viewMode} &amp;&amp; ${detailModel>/approval_number} !== '' ? true : false}"
                    press=".onRequest" />
			</OverflowToolbar>
		</uxap:footer>
        <!-- footer 끝 -->
    </uxap:ObjectPageLayout>
</mvc:View>
