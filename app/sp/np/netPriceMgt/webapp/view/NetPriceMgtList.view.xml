<mvc:View controllerName="sp.np.netPriceMgt.controller.NetPriceMgtList"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:f="sap.f"
  xmlns:core="sap.ui.core"
  xmlns:form="sap.ui.layout.form"
  xmlns:t="sap.ui.table"
  xmlns:tnt="sap.tnt"
  xmlns:layout="sap.ui.layout"
  xmlns:lib-m="ext.lib.control.m"
  displayBlock="true"
  height="100%">
    <f:DynamicPage id="page"
        headerExpanded="true"
        fitContent="true"
        toggleHeaderOnTitleClick="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{I18N>/PRICE_DECISION_INQUIRY_STATUS}" />
                </f:heading>
                <f:snappedContent>
                    <form:SimpleForm id="pageSearchFormS" maxContainerCols="3" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox>
                                <Label text="Company Name" labelFor="search_company_s" required="true"></Label>     
                                <MultiComboBox id="search_company_s" width="100%" required="true" 
                                    items="{
                                                path: 'org>/Org_Company',
                                                filters: [
                                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                ]
                                            }" selectionFinish="handleSelectionFinishComp">
                                    <items>
                                        <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                    </items>
                                </MultiComboBox>
                                <layoutData><layout:GridData span="XL2 L2 M2 S12"/></layoutData>
                            </VBox>
                            <VBox>
                                <Label text="Operation ORG" labelFor="search_operation_org_s" required="true"></Label>
                                <MultiComboBox id="search_operation_org_s" width="100%" required="true"
                                        items="{
                                            path: 'purOrg>/Pur_Operation_Org',
                                            filters: [
                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                            ]
                                        }" selectionFinish="handleSelectionFinishOrg">
                                    <items>
                                        <core:Item key="{purOrg>code}" text="[{purOrg>code}] {purOrg>type}" />
                                    </items>
                                </MultiComboBox>
                                <layoutData><layout:GridData span="XL2 L2 M2 S12"/></layoutData>                                   
                            </VBox>
                            <VBox>
                                <Label text="{I18N>/STATUS}"></Label>
                                <ComboBox id="status_s"
                                    width="100%"
                                    items="{
                                            path: 'util>/Code',
                                            filters: [
                                                {path: 'group_code', operator: 'EQ', value1: 'CM_APPROVE_STATUS'},
                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                            ]
                                        }"
                                    selectionChange=".statusChg">
                                    <items>
                                        <core:Item key="{util>code}" text="{util>code_name}" />
                                    </items>
                                </ComboBox>
                                <layoutData>
                                    <layout:GridData span="XL2 L2 M2 S12" />
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:snappedContent>
                <f:expandedContent>
                    <form:SimpleForm id="pageSearchFormE" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox>
                                <Label text="Company" labelFor="search_company_e" required="true"></Label>
                                <MultiComboBox id="search_company_e" width="100%" required="true" 
                                    items="{
                                                path: 'org>/Org_Company',
                                                filters: [
                                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                                ]
                                            }" selectionFinish="handleSelectionFinishComp">
                                    <items>
                                        <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                    </items>
                                </MultiComboBox>
                                <layoutData><layout:GridData span="XL2 L2 M2 S12"/></layoutData>
                            </VBox>
                            <VBox>
                                <Label text="Operation ORG" labelFor="search_operation_org_e" required="true"></Label>
                                <MultiComboBox id="search_operation_org_e" width="100%" required="true"
                                        items="{
                                            path: 'purOrg>/Pur_Operation_Org',
                                            filters: [
                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                            ]
                                        }" selectionFinish="handleSelectionFinishOrg">
                                    <items>
                                        <core:Item key="{purOrg>code}" text="[{purOrg>code}] {purOrg>type}" />
                                    </items>
                                </MultiComboBox>
                                <layoutData><layout:GridData span="XL2 L2 M2 S12"/></layoutData>
                            </VBox>
                             <VBox>
                                <Label text="{I18N>/STATUS}"></Label>
                                <ComboBox id="status_e"
                                    width="100%"
                                    items="{
                                            path: 'util>/Code',
                                            filters: [
                                                {path: 'group_code', operator: 'EQ', value1: 'CM_APPROVE_STATUS'},
                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                            ]
                                        }"
                                    selectionChange=".statusChg">
                                    <items>
                                        <core:Item key="{util>code}" text="{util>code_name}" />
                                    </items>
                                </ComboBox>
                                <layoutData>
                                    <layout:GridData span="XL2 L2 M2 S12" />
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:expandedContent>
                <f:actions>
                    <Button id="pageSearchButton" text="Search" type="Emphasized" press=".fnSearch" />
                </f:actions>
                <f:navigationActions>
                    <Button icon="sap-icon://unfavorite" type="Transparent" />
                </f:navigationActions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <form:SimpleForm id="pageSearchForm" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                    <form:content>
                        <VBox>
                            <Label text="{I18N>/TITLE}" labelFor="search_net_price_title"></Label>
                            <Input id="search_title" type="Text" value="" />
                            <layoutData><layout:GridData span="XL2 L2 M2 S12" /></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="OUTCOME" labelFor="search_out_come"></Label>
                            <ComboBox 
                                id="search_out_come"
                                placeholder="선택해주세요" width="100%" 
                                items="{
                                    path: 'util>/Code',
                                    filters: [
                                        {path: 'group_code', operator: 'EQ', value1: 'SP_SC_OUTCOME'},
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                    ]
                                }" >
                                <core:Item key="{util>code}" text="{util>code_name}" />
                            </ComboBox>
                            <layoutData><layout:GridData span="XL2 L2 M2 S12" /></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/NEGOTIATION}" labelFor="search_negotiation"></Label>
                            <Input id="search_negotiation" type="Text" value="" />
                            <layoutData><layout:GridData span="XL2 L2 M2 S12" /></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/SUPPLIER_TYPE}" labelFor="search_supplier"></Label>
                            <MultiInput id="search_supplier" type="Text" showValueHelp="true" valueHelpRequest=".vhSupplierCode" />
                            <layoutData><layout:GridData span="XL2 L2 M2 S12" /></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/REQUESTOR}"></Label>
                            <MultiInput id="multiInputWithEmployeeValueHelp" placeholder="Choose employees from the ValueHelp" showValueHelp="true" valueHelpRequest=".vhEmployeeCode">
                            </MultiInput>
                            <layoutData><layout:GridData span="XL2 L2 M2 S12" /></layoutData>
                        </VBox>
                    </form:content>
                </form:SimpleForm>
            </f:DynamicPageHeader>
        </f:header>
        
        <f:content>
            <!--Base Price List 시작-->
            <t:Table id="listTable"
                selectionMode="None"
                rows="{list>/NpApprovalListView}"
                cellClick=".fnDetail">
                <t:extension>
                    <OverflowToolbar class="sapFDynamicPageAlignContent">
                        <Title text="{I18N>/BASE_PRICE_LIST} ({= ${list>/NpApprovalListView}.length || 0})" level="H2"/>
                        <ToolbarSpacer />
                        <Button text="Create" type="Transparent" press=".fnCreate" />
                    </OverflowToolbar>
                </t:extension>
                <t:columns>
                    <t:Column hAlign="Center" width="8rem">
                        <Label text="{I18N>/APPROVAL_NO}" textAlign="Center" />
                        <t:template>
                            <Text text="{list>approval_number}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="20rem">
                        <Label text="{I18N>/TITLE}" textAlign="Left" />
                        <t:template>
                            <Text text="{list>approval_title}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="8rem">
                        <Label text="{I18N>/REQUESTOR}" textAlign="Left" />
                        <t:template>
                            <Text text="{list>requestor_empnm}[{list>requestor_empno}]" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="8rem">
                        <Label text="{I18N>/REQUESTOR} Team" textAlign="Left" />
                        <t:template>
                            <Text text="{list>requestor_teamnm}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="10rem">
                        <Label text="OUTCOME" textAlign="Left" />
                        <t:template>
                            <Text text="" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/REQUEST_DATE}" textAlign="Left" />
                        <t:template>
                            <Text text="{path: 'list>request_date'}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/NEGOTIATION} No" textAlign="Left" />
                        <t:template>
                            <Text text="" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/STATUS}" />
                        <t:template>
                            <tnt:InfoLabel 
                                text="{list>approve_status_name}" 
                                colorScheme="{
                                    path: 'list>approve_status_code',
                                    formatter: '.onStatusColor'
                                }" />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
            <!--Base Price List 끝-->
        </f:content>
    </f:DynamicPage>
</mvc:View>
