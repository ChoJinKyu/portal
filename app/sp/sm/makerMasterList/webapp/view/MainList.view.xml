<mvc:View controllerName="sp.sm.makerMasterList.controller.MainList"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:tnt="sap.tnt"  
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:table="sap.ui.table"
    xmlns:lib-m="ext.lib.control.m"
    xmlns:smartTable="sap.ui.comp.smarttable"
    height="100%">

    <f:DynamicPage id="page"
        headerExpanded="{mainListViewModel>/headerExpanded}" 
        toggleHeaderOnTitleClick="true">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{I18N>/MAKER_MASTER} {I18N>/MANAGEMENT}"/>
                </f:heading>
                <f:snappedContent>
                        <form:SimpleForm id="simple_form_snapped" maxContainerCols="3" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                            <form:content>
                                <VBox>
                                    <Label text="{I18N>/MAKER_CODE}" labelFor="input_maker_code_snapped"></Label>
                                    <Input id="input_maker_code_snapped" placeholder="Search" value="{mainListViewModel>/searchArea/maker_code}"/>
                                    <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/MAKER_NAME}" labelFor="input_maker_name_snapped"></Label>
                                    <Input id="input_maker_name_snapped" placeholder="Search" value="{mainListViewModel>/searchArea/maker_name}"/>
                                    <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/TAX_ID}" labelFor="input_tax_id_snapped"></Label>
                                    <Input id="input_tax_id_snapped" placeholder="Search" value="{mainListViewModel>/searchArea/tax_id}"/>
                                    <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </f:snappedContent>
                    <f:expandedContent>
                        <form:SimpleForm id="simple_form_expanded" maxContainerCols="3" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                            <form:content>
                                <VBox>
                                    <Label text="{I18N>/MAKER_CODE}" labelFor="input_maker_code_expanded"></Label>
                                    <Input id="input_maker_code_expanded" placeholder="Search" value="{mainListViewModel>/searchArea/maker_code}"/>
                                    <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/MAKER_NAME}" labelFor="input_maker_name_expanded"></Label>
                                    <Input id="input_maker_name_expanded" placeholder="Search" value="{mainListViewModel>/searchArea/maker_name}"/>
                                    <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/TAX_ID}" labelFor="input_tax_id_expanded"></Label>
                                    <Input id="input_tax_id_expanded" placeholder="Search" value="{mainListViewModel>/searchArea/tax_id}"/>
                                    <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </f:expandedContent>
                <f:actions>
                    <Button id="btn_search" text="{I18N>/SEARCH}" type="Emphasized" press=".onPressBtnSearch" />
                </f:actions>
                <f:navigationActions>
                    <Button icon="sap-icon://unfavorite" type="Transparent" />
                </f:navigationActions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <form:SimpleForm id="pageSearchForm" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" 
                adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" 
                                        emptySpanL="0" emptySpanM="0" 
                                        columnsL="2" columnsM="2" >
                    <form:content>
                        <VBox>
                            <Label text="{I18N>/COUNTRY}" labelFor="combobox_country"></Label>
                            <ComboBox id="combobox_country" width="100%" 
                                    placeholder="{I18N>/ALL}" 
                                    selectedKey="{mainListViewModel>/searchArea/country_code}" 
                                    items="{
                                    path: '/CountryView',
                                    filters: [
                                        {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'}
                                    ]}"
                                >
                                <items>
                                    <core:Item key="{country_code}" text="[{country_code}] {country_name}" />
                                </items>
                            </ComboBox>
                            <!-- <MultiComboBox 
                                id="multicombobox_country" 
                                showSecondaryValues= "false"
                                items="{path: 'util>/Country',
                                filters : [
                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'}
                                        ],
                                 templateShareable:true}" 
                                placeholder="{I18N>/ALL}"
                            >
                                <core:ListItem key="{util>country_code}" text="[{util>country_code}] {util>country_code}" additionalText="{util>country_code}" />  
                            
                            </MultiComboBox> -->
                            <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/VAT_NUMBER}" labelFor="input_vat_number"></Label>
                            <Input id="input_vat_number" placeholder="Search" value="{mainListViewModel>/searchArea/vat_number}"/>
                            <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/STATUS}" labelFor="segmentbtn_maker_status_code"></Label>
                            <!-- <SegmentedButton id="segmentbtn_maker_status_code" 
                                selectionChange="onStatusChange" 
                                selectedKey="{mainListViewModel>/searchArea/maker_status_code}"
                                items="{
                                    path: 'mainListViewModel>/makerStatusCodeList'
                                }"
                                >
                                <items>
                                    <SegmentedButtonItem key="{mainListViewModel>code}" text="{mainListViewModel>code_name}" />
                                </items>
                            </SegmentedButton> -->
                            <!--segmentbtn_maker_status_code에 데이터를 가져와서 빈값을 push 할경우 I18N>/ALL 제대로 안읽혀서 먼저 all을 부른후... -->
                            <SegmentedButton id="segmentbtn_maker_status_code" 
                                selectedKey="{mainListViewModel>/searchArea/maker_status_code}">
                                <items>
                                    <SegmentedButtonItem  text="{I18N>/ALL}" key="" width="auto"/>
                                </items>
                            </SegmentedButton>
                            <!-- <SegmentedButton id="segmentbtn_maker_status_code" 
                                selectionChange="onStatusChange" 
                                selectedKey="{mainListViewModel>/searchArea/maker_status_code}"
                                items="{
                                    path: '/MakerStatusView',
                                    filters: [
                                        {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'}
                                    ]}"
                                >
                                <items>
                                    <SegmentedButtonItem key="{code}" text="{code_name}" />
                                </items>
                            </SegmentedButton> -->
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12"/>                                        
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/CREATE_USER_ID}" labelFor="input_create_user"></Label>
                            <Input id="input_create_user" placeholder="Search" value="{mainListViewModel>/searchArea/create_user_id}"/>
                            <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>                                
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/LOCAL_CREATE_DATE}" labelFor="datepicker_creation_date"></Label>
                            <DateRangeSelection 
                            id="datepicker_creation_date" value="{mainListViewModel>/searchArea/local_create_dtm}" 
                            showFooter="true" placeholder="YYYY-MM-DD - YYYY-MM-DD" displayFormat="yyyy-MM-dd" 
                            dateValue="{path:'mainListViewModel>/searchArea/st_local_create_dtm', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { UTC: true, format: 'yyy-MM-dd' }}"
                            secondDateValue="{path:'mainListViewModel>/searchArea/ed_local_create_dtm', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { UTC: true, format: 'yyy-MM-dd' }}"       
                            />	
                            <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/UPDATE_USER_ID}" labelFor="input_last_update_user"></Label>
                            <Input id="input_last_update_user" placeholder="Search" value="{mainListViewModel>/searchArea/update_user_id}"/>
                            <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>                                
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/LOCAL_UPDATE_DATE}" labelFor="datepicker_update_date"></Label>
                            <DateRangeSelection 
                            id="datepicker_update_date" value="{mainListViewModel>/searchArea/local_update_dtm}"
                            showFooter="true" placeholder="YYYY-MM-DD - YYYY-MM-DD" displayFormat="yyyy-MM-dd" 
                            dateValue="{path:'mainListViewModel>/searchArea/st_local_update_dtm', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { UTC: true, format: 'yyy-MM-dd' }}"
                            secondDateValue="{path:'master>/ed_local_update_dtm', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { UTC: true, format: 'yyy-MM-dd' }}"       
                            />	
                            <layoutData><layout:GridData span="XL3 L3 M3 S12"/></layoutData>
                        </VBox>                     
                    </form:content>
                </form:SimpleForm>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <!-- <ScrollContainer  width="100%" horizontal="true" vertical="true" focusable="true"> -->
                <smartTable:SmartTable
                    id="smarttable_main"
                    noData="{I18N>/NCM01004}"
                    initialNoDataText="{I18N>/NCM01004}" 
                    width="100%"
                    height="100%"
                    smartVariant="pageVariantId"                    
                    entitySet="MakerView"
                    tableBindingPath="/MakerView"
                    tableType="ResponsiveTable"
                    useExportToExcel="true"
                    beforeRebindTable=".onBeforeRebindTable"
                    beforeExport=".onBeforeExport"
                    useVariantManagement="false"
                    useTablePersonalisation="true"
                    showTablePersonalisation="false"
                    header="{I18N>/MAKER} {I18N>/LIST}"
                    showRowCount="true"
                    editable="false"                    
                    persistencyKey="SmartTableAnalytical_Explored"
                    enableAutoBinding="false"                     
                    class="sapUiResponsiveContentPadding"                    
                    demandPopin="true"
                    requestAtLeastFields="tenant_id"
                    initiallyVisibleFields="maker_code,maker_local_name,maker_english_name,country_code,tax_id,vat_number,create_user_id,local_create_dtm,update_user_id,local_update_dtm,maker_status_name"
                    >
                    <smartTable:customToolbar>
                        <OverflowToolbar design="Transparent">
                            <ToolbarSpacer/>
                            <Button text="{I18N>/NEW}" id="btn_create" visible="{= ${USER_SESSION>/USER_TYPE_CODE} === 'B'}" type="Transparent" press=".onPressBtnCreate"/>                       
                            <!-- <OverflowToolbarButton
                                icon="sap-icon://sort"
                                tooltip="Sort"
                                text="Sort"
                                press=".onMainTableSort"/>
                            <OverflowToolbarButton
                                icon="sap-icon://filter"
                                tooltip="Filter"
                                text="Filter"
                                press=".onMainTableFilter"/> -->
                            <OverflowToolbarButton
                                icon="sap-icon://action-settings"
                                tooltip="Column Settings"
                                text="Column Settings"
                                press=".onMainTableColumns"/>
                        </OverflowToolbar>
                    </smartTable:customToolbar>
                    <Table id="mainTable" 
                            noDataText="{I18N>/NCM01004}"
                            growingScrollToLoad="true"
                            growing="true"
                            sticky="ColumnHeaders,HeaderToolbar"
                            growingThreshold="50"
                            inset="false"   
                            >
                        <columns>  
                            <Column minScreenWidth ="" demandPopin="false" importance="High"  popinDisplay="WithoutHeader">
                            <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "maker_code",  "leadingProperty": "maker_code", "sortProperty": "maker_code", "filterProperty": "maker_code", "columnIndex": 1}'/>
                                </customData>
                                    <Text text="{I18N>/MAKER_CODE}"></Text>
                            </Column>
                                
                            <Column minScreenWidth ="" demandPopin="false" importance="High" >
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "maker_local_name", "leadingProperty": "maker_local_name", "sortProperty": "maker_local_name", "filterProperty": "maker_local_name", "columnIndex": 2}'/>
                                </customData>
                                    <Text text="{I18N>/MAKER_LOCAL_NAME}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "maker_english_name", "leadingProperty": "maker_english_name", "sortProperty": "maker_english_name", "filterProperty": "maker_english_name", "columnIndex": 3}'/>
                                </customData>
                                    <Text text="{I18N>/MAKER_ENGLISH_NAME}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "country_code", "leadingProperty": "country_code", "sortProperty": "country_code", "filterProperty": "country_code", "columnIndex": 4}'/>
                                </customData>
                                    <Text text="{I18N>/COUNTRY}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData" 
                                value='\{"columnKey": "tax_id", "leadingProperty": "tax_id", "sortProperty": "tax_id", "filterProperty": "tax_id", "columnIndex": 5}'/>
                                </customData>
                                    <Text text="{I18N>/TAX_ID}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "vat_number", "leadingProperty": "vat_number", "sortProperty": "vat_number", "filterProperty": "vat_number", "columnIndex": 6}'/>
                                </customData>
                                    <Text text="{I18N>/VAT_NUMBER}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "create_user_id", "leadingProperty": "create_user_id", "sortProperty": "create_user_id", "filterProperty": "create_user_id", "columnIndex": 7}'/>
                                </customData>
                                    <Text text="{I18N>/CREATE_USER_ID}"></Text>
                            </Column>     

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "local_create_dtm", "leadingProperty": "local_create_dtm", "sortProperty": "local_create_dtm", "filterProperty": "local_create_dtm", "columnIndex": 8, "type":"date"}'/>
                                </customData>
                                    <Text text="{I18N>/LOCAL_CREATE_DATE}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "update_user_id", "leadingProperty": "update_user_id", "sortProperty": "update_user_id", "filterProperty": "update_user_id", "columnIndex": 9}'/>
                                </customData>
                                    <Text text="{I18N>/UPDATE_USER_ID}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "local_update_dtm", "leadingProperty": "local_update_dtm", "sortProperty": "local_update_dtm", "filterProperty": "local_update_dtm", "columnIndex": 10, "type":"date"}'/>
                                </customData>
                                    <Text text="{I18N>/LOCAL_UPDATE_DATE}"></Text>
                            </Column>

                            <Column minScreenWidth ="" demandPopin="false" importance="High">
                                <customData>
                                <core:CustomData key="p13nData"
                                value='\{"columnKey": "maker_status_name", "leadingProperty": "maker_status_name", "sortProperty": "maker_status_name", "filterProperty": "maker_status_name", "columnIndex": 11}'/>
                                </customData>
                                    <Text text="{I18N>/STATUS}"></Text>
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem type="Navigation" press=".onPressMainTableItem">
                                <Text text="{maker_code}" wrapping="false" />
                                <Text text="{maker_local_name}" wrapping="false" textAlign="Left"/>
                                <Text text="{maker_english_name}" wrapping="false" textAlign="Left"/>
                                <Text text="{country_code}" wrapping="false" textAlign="Left"/>
                                <Text text="{tax_id}" wrapping="false" />
                                <Text text="{vat_number}" wrapping="false" />                            
                                <Text text="{create_user_id}" wrapping="false" />
                                <Text text="{ path: 'local_create_dtm',
                                                    type: 'sap.ui.model.type.Date',
                                                    formatOptions: {
                                                    pattern: 'yyyy-MM-dd'
                                                    }}" wrapping="false" />                                                                                       
                                <Text text="{update_user_id}" wrapping="false" />
                                <Text text="{ path: 'local_update_dtm',
                                                    type: 'sap.ui.model.type.Date',
                                                    formatOptions: {
                                                    pattern: 'yyyy-MM-dd'
                                                    }}" wrapping="false" /> 
                                <tnt:InfoLabel 
                                        text="{maker_status_name}" 
                                        colorScheme="{
                                            path: 'maker_status_code',
                                            formatter: '.onStatusColor'
                                        }" />   
                            </ColumnListItem>
                        </items> 
                    </Table>
                </smartTable:SmartTable>
            <!-- </ScrollContainer> -->
        </f:content>
        <!-- DynamicPage Footer -->
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer />            
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>