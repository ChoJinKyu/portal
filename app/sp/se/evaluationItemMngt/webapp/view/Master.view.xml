<mvc:View 
    controllerName="sp.se.evaluationItemMngt.controller.Master"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:t="sap.ui.table"
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    height="100%"
>
    
    <f:DynamicPage 
        id="page"
        toggleHeaderOnTitleClick="true"
        headerExpanded="{=
            ${viewModel>/App/layout} !== 'TwoColumnsMidExpanded'
        }"
    >
        
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                     <!-- 평가항목 관리 -->
                    <Title text="{I18N>/EVAL_ITEM} {I18N>/DISPLAY}" />
                </f:heading>

                <!-- <f:expandedHeading> -->
                     <!-- 평가항목 관리 -->
                    <!-- <Title text="{I18N>/EVAL_ITEM} {I18N>/DISPLAY}" /> -->
                <!-- </f:expandedHeading> -->
                <f:expandedContent>
                </f:expandedContent>

                <!-- <f:snappedHeading> -->
                     <!-- 평가항목 관리 -->
                    <!-- <Title text="{I18N>/EVAL_ITEM} {I18N>/DISPLAY}" /> -->
                <!-- </f:snappedHeading> -->
                <f:snappedContent>
                    <form:SimpleForm 
                        layout="ResponsiveGridLayout"
                    >
                        <VBox>
                            <!-- 평가항목명 -->
                            <Label text="{I18N>/EVAL_ITEM_NM}" />
                            <Input 
                                value="{viewModel>/cond/Contains/evaluation_article_name}"
                            />
                            <layoutData>
                                <layout:GridData span="L2 M6 S12" />
                            </layoutData>
                        </VBox>
                    </form:SimpleForm>
                </f:snappedContent>
                
                <f:actions>
                    <!-- 조회 -->
                    <Button text="{I18N>/DISPLAY}" type="Emphasized" press="onPressSearch"/>
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>

        <f:header> 
            <f:DynamicPageHeader pinnable="true">
                <form:SimpleForm 
                    layout="ResponsiveGridLayout"
                >
                    <VBox>
                        <!-- 평가조직 -->
                        <Label text="{I18N>/EVAL_ORG}" required="true"/>
                        <ComboBox 
                            id="orgCode" 
                            width="100%" 
                            required="true"
                            fieldGroupIds="searchRequired"
                            showSecondaryValues="true"
                            selectionChange="onSelectionChangeOrgCode"
                            selectedKey="{viewModel>/cond/EQ/org_code}"
                        />
                        <layoutData>
                            <layout:GridData span="L2 M6 S12" />
                        </layoutData>
                    </VBox>
                    <VBox>
                        <!-- 평가운영단위 -->
                        <Label text="{I18N>/EVAL_OP_UNT}" required="true"/>
                        <ComboBox 
                            id="unitCode" 
                            width="100%" 
                            required="true"
                            fieldGroupIds="searchRequired"
                            showSecondaryValues="true"
                            selectionChange="onSelectionChangeUnitCode"
                            selectedKey="{viewModel>/cond/EQ/evaluation_operation_unit_code}"
                        />
                        <layoutData>
                            <layout:GridData span="L2 M6 S12" />
                        </layoutData>
                    </VBox>
                    <VBox>
                        <!-- 평가유형명 -->
                        <Label text="{I18N>/EVALUATION_TYPE_NAME}" required="true"/>
                        <SegmentedButton 
                            id="evaluType" 
                            selectedKey="{viewModel>/cond/EQ/evaluation_type_code}"
                        />
                        <layoutData>
                            <layout:GridData span="L2 M6 S12" />
                        </layoutData>
                    </VBox>
                    <VBox>
                        <!-- 평가항목구분 -->
                        <Label text="{I18N>/EVAL_ITEM_TYPE}" />
                        <SegmentedButton 
                            id="evaluExecuteMode" 
                            selectedKey="{viewModel>/cond/EQ/evaluation_article_type_code}"
                        />
                        <layoutData>
                            <layout:GridData span="L2 M6 S12" linebreak="true"/>
                        </layoutData>
                    </VBox>
                    <VBox>
                        <!-- 평가항목명 -->
                        <Label text="{I18N>/EVAL_ITEM_NM}" />
                        <Input 
                            value="{viewModel>/cond/Contains/evaluation_article_name}"
                        />
                        <layoutData>
                            <layout:GridData span="L2 M6 S12" />
                        </layoutData>
                    </VBox>
                </form:SimpleForm>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <t:TreeTable 
                id="treeTable"
                enableSelectAll="false"
                visibleRowCount="16"
                enableColumnReordering="false"
                class="sapFDynamicPageAlignContent" 
                rowSelectionChange="onRowSelectionChange"
                selectionMode="Single"
                selectionBehavior="Row"
                fixedColumnCount="1"
                expandFirstLevel="true"
            >
                <t:extension>
                    <OverflowToolbar>
                        <Title id="title" text="{I18N>/EVAL_ITEM}" level="H2"/> 
                        <ToolbarSeparator/>
                        <ToolbarSpacer/>
                        <Button text="{I18N>/EXPAND}" type="Transparent" press="onPressExpandAll" />
                        <Button text="{I18N>/COLLAPSE}" type="Transparent" press="onPressCollapseAll" />
                        <Button text="{I18N>/CREATE_SAME_LEVEL}" type="Transparent" press="onPressCreate($event, 'SameLevel')" />
                        <Button text="{I18N>/CREATE_LOWER_LEVEL}" type="Transparent" press="onPressCreate($event, 'LowLevel')" />
                        <Button icon="sap-icon://action-settings" type="Transparent" press="onMainTablePersoButtonPressed"/>
                        <Button icon="sap-icon://excel-attachment" type="Transparent" press="onExcelExport" />
                        <!-- <MenuButton 
                            defaultAction="onExcelExport" 
                            buttonMode="Split"
                            icon="sap-icon://excel-attachment"
                        >
                            <menu>
                                <Menu>
                                    <MenuItem text="엑스포트" />
                                    <MenuItem text="다른 이름으로 엑스포트" />
                                </Menu>
                            </menu>
                        </MenuButton> -->
                    </OverflowToolbar>
                </t:extension>
                
                <t:columns>
                    <!-- 평가항목 -->
                    <t:Column label="{I18N>/EVAL_ITEM}" width="20em">    
                        <t:template>
                            <Text text="{evaluation_article_name}" tooltip="{evaluation_article_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 평가운영단위 -->
                    <t:Column label="{I18N>/EVAL_OP_UNT}" width="7em">    
                        <t:template>
                            <Text text="{evaluation_operation_unit_name}" tooltip="{evaluation_operation_unit_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 평가유형명 -->
                    <t:Column label="{I18N>/EVALUATION_TYPE_NAME}" width="7em">    
                        <t:template>
                            <Text text="{evaluation_type_name}" tooltip="{evaluation_type_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 평가수행방식 -->
                    <t:Column label="{I18N>/EVAL_EXEC_MODE}" width="7em">    
                        <t:template>
                            <Text text="{evaluation_execute_mode_name}" tooltip="{evaluation_execute_mode_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 평가항목구분-->
                    <t:Column label="{I18N>/EVAL_ITEM_TYPE}" width="7em">    
                        <t:template>
                            <Text text="{evaluation_article_type_name}" tooltip="{evaluation_article_type_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 배점유형 -->
                    <t:Column label="{I18N>/DISTRB_SCOR_TYPE}" width="7em">    
                        <t:template>
                            <Text text="{evaluation_distrb_scr_type_name}" tooltip="{evaluation_distrb_scr_type_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- Scale유형 -->
                    <t:Column label="{I18N>/SCLE_TYPE}" width="7em">    
                        <t:template>
                            <Text text="{evaluation_result_input_type_name}" tooltip="{evaluation_result_input_type_name}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 평가항목설명 -->
                    <t:Column label="{I18N>/EVAL_ITEM_DESC}" width="20em">    
                        <t:template>
                            <Text text="{evaluation_article_desc}" tooltip="{evaluation_article_desc}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 정렬 -->
                    <t:Column label="{I18N>/SORT}" width="5em">    
                        <t:template>
                            <Text text="{sort_sequence}" tooltip="{sort_sequence}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 작성자 -->
                    <t:Column label="{I18N>/WRITER}" width="8em">    
                        <t:template>
                            <Text text="{writer}" tooltip="{writer}" wrapping="false" />
                        </t:template>
                    </t:Column>
                    <!-- 작성일자 -->
                    <t:Column label="{I18N>/WRITE_DATE}" width="8em">    
                        <t:template>
                            <Text text="{
                                path:'write_tm',
                                type:'sap.ui.model.odata.type.DateTime',
                                constraints : {
                                    displayFormat: 'Date'
                                }
                            }" tooltip="{
                                path:'write_tm',
                                type:'sap.ui.model.odata.type.DateTime',
                                constraints : {
                                    displayFormat: 'Date'
                                }
                            }" wrapping="false" />
                        </t:template>
                    </t:Column>


                    <t:Column label="" width="2rem" >
                        <t:template>
                            <ObjectStatus icon="sap-icon://feeder-arrow"   />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:TreeTable>
        </f:content>
        
        
        <!-- <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer />
				<Button text="Save" type="Emphasized" press=".onPageSaveButtonPress" />
				<Button text="Cancel" type="Transparent" press=".onPageCancelEditButtonPress"/>
            </OverflowToolbar>
        </f:footer> -->
    </f:DynamicPage>
    
</mvc:View>