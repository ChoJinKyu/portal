<mvc:View
	controllerName="sp.se.supplierEvaluationSetupMgt.controller.Two"

    xmlns="sap.m" 
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns:table="sap.ui.table"
    xmlns:f="sap.ui.layout.form"
    class="sapUiSizeCompact"
    displayBlock="true"
    xmlns:lib-m="ext.lib.control.m"
    >

    <Page title="{I18N>/CREATE_EVALUATION_TYPE}"> 
        <!-- 
            showNavButton="true" 
            navButtonType="Back" 
            navButtonPress="onNavToBack"
            showNavButton="true"  : 상단 < 버튼  -->
         <headerContent>
            <!-- <Button icon="sap-icon://action" tooltip="Share" /> -->
            <Button 
            type="Transparent" 
            icon="{viewModel>/App/btnScreen}" 
            tooltip="screen change" 
            press="onPressLayoutChange" />
            <Button
            type="Transparent" 
            icon="sap-icon://decline"
            tooltip="back to the list" press="onNavToBack"
            />    
		</headerContent>
        <content>  
            <uxap:ObjectPageLayout
                id="two"                
                showFooter="true"
                >
                <!-- 
                class="sapUiContentPadding" 
                preserveHeaderStateOnScroll="false" 
                enableLazyLoading="true"
                showTitleHeaderContent="true"
                showEditHeaderButton="true"
                editHeaderButtonPress="handleEditBtnPress"
                alwaysShowContentHeader="false" 
                headerContentPinnable="false" 
                upperCaseAnchorBar="false"  
                -->

                <!-- <uxap:headerTitle>
                    <uxap:ObjectPageHeader>
                         <OverflowToolbarButton 
                         type="Transparent" 
                         icon="{viewModel>/App/btnScreen}" 
                         text="screen" 
                         tooltip="screen change" 
                         press="onPressLayoutChange" />
                    
                        <OverflowToolbarButton
                        type="Transparent" 
                        icon="sap-icon://decline"
                        text="back"
                        tooltip="back to the list" press="onNavToBack"
                        />    
                    </uxap:ObjectPageHeader>
                </uxap:headerTitle> -->

                <uxap:headerContent/>                

                <uxap:sections>
                        <uxap:ObjectPageSection titleUppercase="true" title="ObjectPageSection">
                            <uxap:subSections>            
                                <uxap:ObjectPageSubSection id="pageSubSection1"/>
                            </uxap:subSections>
                        </uxap:ObjectPageSection>
                </uxap:sections>

            <uxap:sections>
                    <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/VALUATION_TYPE}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection>
                                <uxap:blocks>
                                    <VBox>
                                    <!-- sap.ui.layout.form -->
                                        <f:SimpleForm 
                                            id="SimpleFormChange354" 
                                            layout="ColumnLayout"
                                            maxContainerCols="2"
                                            adjustLabelSpan="false">

                                            <f:content>
                                                <!-- Column1. 평가유형코드 -->
                                                <Label text="{I18N>/EVALUATION_TYPE_CODE}"/>                                                                        
                                                <Input   
                                                        width="100%" 
                                                        placeholder="input evaluation_type_code"
                                                       
                                                        value="{
                                                             path : 'TwoView>/evaluationType2/evaluation_type_code',
                                                             type : 'sap.ui.model.odata.type.String',
                                                             constraints : {
                                                                nullable : false,
                                                                maxLength : 30
                                                            }   
                                                            }"

                                                        editable="{=${TwoView>/isCreateMode}}"

                                                        fieldGroupIds="required"
                                                        required="true"
                                                        
                                                        />      
                                                <!--  평가 비율 -->
                                                <Label text="{I18N>/EVALUATION_RATE}"/>                                                
                                                <Input
                                                        id="rate"
                                                        width="100%" 
                                                        placeholder="input evaluation_rate"
                                                        value="{
                                                             path : 'TwoView>/evaluationType2/evaluation_type_distrb_score_rate',
                                                             type : 'sap.ui.model.odata.type.Decimal',
                                                             constraints : {
                                                                  scale : 0
                                                                }   
                                                            }"
                                                        editable="{=${TwoView>/isEditMode}}"

                                                        fieldGroupIds="required"
                                                        required="true"
                                                        enabled="true"
                                                        />

                                                        <!-- enabled="{= ${TwoView>/isEditMode}}" -->
                                                        
                                                <!-- Column2. 평가 유형 명 -->
                                                <Label text="{I18N>/EVALUATION_TYPE_NAME}"/>
                                                <Input  
                                                        width="100%" 
                                                        placeholder="input evaluation_type_name"
                                                        value="{
                                                             path : 'TwoView>/evaluationType2/evaluation_type_name',
                                                             type : 'sap.ui.model.odata.type.String',
                                                             constraints : {
                                                                 maxLength : 50
                                                            }   
                                                            }"
                                                       
                                                        editable="{=${TwoView>/isEditMode}}"

                                                        fieldGroupIds="required"
                                                        required="true"
                                                        enabled="true"
                                                        />
                                                
                                                 <!-- 사용여부  -->
                                                <Label text="{I18N>/USE_FLAG}"/> 
                                                <SegmentedButton 
                                                        selectedKey="{
                                                            path : 'TwoView>/evaluationType2/use_flag',
                                                            type: 'sap.ui.model.type.Boolean'
                                                        }"
                                                        enabled="{=${TwoView>/isEditMode}}">                                                       
                                                        <items>
                                                            <SegmentedButtonItem text="Yes" key="true" />
                                                            <SegmentedButtonItem text="No" key="false" />
                                                        </items>
                                                </SegmentedButton>
                                            </f:content>
                                         </f:SimpleForm>

                                    </VBox>
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>                            
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
            </uxap:sections>

            <uxap:sections>
                <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/SCALE}">
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection>
                            <uxap:blocks>

                                <Table id="scaleTable"
                                        inset="false"
                                        class="sapFDynamicPageAlignContent"
                                        width="auto"
                                        items="{
                                            path: 'TwoView>/scale'
                                            }"
                                        mode="{=
                                            ${TwoView>/isEditMode} ? 'SingleSelectLeft' : 'None'
                                        }" 
                                      
                                            >
                                              <!-- selectionChange="onSelectItem"    -->
                                    <headerToolbar>
                                        <Toolbar>
                                            <ToolbarSpacer/>
                                            <HBox>
                                                <Button text="{I18N>/ROW_ADD}" type="Transparent" press="onScaleAdd" enabled="{=${TwoView>/isEditMode}}"/>
                                                <Button text="{I18N>/DELETE}" type="Transparent" press="onScaleDelete" enabled="{=${TwoView>/isEditMode}}"/>
                                                <Button text="{I18N>/CANCEL}" type="Transparent" press="onTableCancle" enabled="{=${TwoView>/isEditMode}}"
                                                        visible="{=!${TwoView>/isCreateMode}}"/>
                                                </HBox>
                                        </Toolbar>
                                    </headerToolbar>
                                    <columns>
                                        <Column width="3em" >
                                            <core:Icon src="sap-icon://edit"/>
                                        </Column>
                                        <Column > 
                                            <Label text="{I18N>/EVALUATION_GRAD}" required="true"/>
                                        </Column>
                                        <Column >
                                            <Label text="{I18N>/OVER}"  required="true" />
                                        </Column>
                                        <Column >
                                            <Label text="{I18N>/LESS_THAN}"  required="true"/>
                                        </Column>
                                        <Column >
                                            <Label text="{I18N>/INCENTIVE AND PENALTY}"  required="true" />
                                        </Column>
                                    </columns>
                                    <items>
                                        <ColumnListItem>
                                        
                                            <cells>
                                                <core:Icon 
                                                    src="{=
                                                        ${TwoView>tansaction_code} === 'D' ? 
                                                        'sap-icon://delete' : 
                                                        (${TwoView>tansaction_code} === 'I' ? 'sap-icon://add' : 'sap-icon://edit')
                                                    }"
                                                    visible="{=
                                                        !!${TwoView>tansaction_code}
                                                    }"
                                                />
                                                <Input   
                                                width="100%" 
                                                value="{
                                                             path : 'TwoView>evaluation_grade',
                                                             type : 'sap.ui.model.odata.type.String',
                                                             constraints : {
                                                                 
                                                                 nullable : false,
                                                                 maxLength : 10
                                                               }   
                                                        }"
                                                enabled="true"
                                                editable="{= ${TwoView>/isCreateMode} === true ? true : ${TwoView>tansaction_code} === 'I' ? true : false}"
                                                fieldGroupIds="required"
                                                required="true"
                                                
                                                
                                                />
                                                <Input   
                                                width="100%" 
                                                value="{
                                                             path : 'TwoView>evaluation_grade_start_score',
                                                             type : 'sap.ui.model.odata.type.Decimal',
                                                             constraints : {
                                                                 
                                                                 precision:5,
                                                                 scale:2
                                                               }   
                                                        }"
                                                editable="{=
                                                                ${TwoView>/isEditMode}
                                                            }"
                                                fieldGroupIds="required"
                                                required="true"
                                                change="onChangeEdit"
                                                enabled="true"
                                                />
                                                <Input   
                                                width="100%" 
                                                value="{
                                                             path : 'TwoView>evaluation_grade_end_score',
                                                             type : 'sap.ui.model.odata.type.Decimal',
                                                             constraints : {
                                                                 
                                                                 precision:5,
                                                                 scale:2
                                                               }   
                                                        }"
                                                
                                                editable="{=
                                                                ${TwoView>/isEditMode}
                                                            }"
                                                fieldGroupIds="required"
                                                required="true"
                                                change="onChangeEdit"
                                                enabled="true"
                                                />
                                                <ComboBox selectedKey="{TwoView>inp_apply_code}" width="100%" items="{
                                                            path: 'common>/Code',
                                                            filters: [
                                                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                                                {path: 'group_code', operator: 'EQ', value1: 'SP_SE_INP_APPLY_CODE'}
                                                            ]
                                                            }"
                                                            editable="{=
                                                                ${TwoView>/isEditMode}
                                                            }"
                                                            fieldGroupIds="required"          
                                                            required="true"
                                                            change="onChangeEdit"
                                                            enabled="true"
                                                            >
                                                            <items>
                                                                <core:Item key="{common>code}" text="{common>code_name}" />
                                                            </items>
                                                            <!-- editable="{=
                                                                ${TwoView>/isEditMode}  &amp;&amp;
                                                                !!${TwoView>rowEditable}
                                                            }" -->
                                                </ComboBox>
                                                <!-- <Input   
                                                width="100%" 
                                                placeholder="INCENTIVE AND PENALTY"
                                                value="{TwoView>inp_apply_code}"
                                                editable="{=${TwoView>/isEditMode}}" 
                                                />                  -->                              
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>

                            </uxap:blocks>
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>
            </uxap:sections>              

            <uxap:footer>
                <OverflowToolbar>
                    <ToolbarSpacer/>
                    <Button id="pageEditButton" type="Transparent" text="{I18N>/UPDATE}"  press=".onPageEditButtonPress" 
                        visible="{=
                            !${TwoView>/isCreateMode}
                        }"
                        enabled="{=
                            !${TwoView>/isEditMode}
                        }"                        
                        />
                    <Button id="pageCancelButton" type="Transparent" text="{I18N>/CANCEL}" press=".onPageCancelEditButtonPress" 
                        enabled="{=
                            ${TwoView>/isEditMode}
                        }"
                        />
                    <!-- <Button id="pageDeleteButton" type="Transparent" text="{I18N>/DELETE}" enabled="{=!${DetailView>/isCreate}}" press="onDelete"/> -->
                    <Button id="pageSaveButton" type="Emphasized" text="{I18N>/SAVE}" press=".onPressSaveBtn" enabled="{=${TwoView>/isEditMode}}"/>
                </OverflowToolbar>
            </uxap:footer>
            
            </uxap:ObjectPageLayout>       
        </content>
    </Page>
</mvc:View>