<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout" >
    
    <Dialog id="investmentPlanDetails" class="sapUiSmallMargin" title="투자계획상세내용" contentWidth="100%" >
        <content>  
            <VBox class="sapUiSmallMargin">
                <form:SimpleForm
                    maxContainerCols="2"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    adjustLabelSpan="false"
                    labelSpanL="4"
                    labelSpanM="4"
                    emptySpanL="0"
                    emptySpanM="0"
                    columnsL="2"
                    columnsM="2">
                    <form:content>
                        <VBox>
                            <Label text="거래사업부 :"/>
                            <Input editable="false"
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/org_name',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 30
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="협력회사명 :"/>
                            <Input editable="false"
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/supplier_local_name',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 30
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="투자 유형 :" required="true"/>
                            <ComboBox id="investmentType"
                                width="100%"
                                items="{
                                            path : 'util>/Code',
                                            filters : [
                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L1100'},
                                                {path : 'group_code', operator : 'EQ', value1 : 'SP_SF_INVESTMENT_TYPE_CODE'},
                                                {path : 'language_cd', operator : 'EQ', value1 : 'KO'}
                                            ]
                                        }"

                                selectedKey="{applicationSup>/popUpInvestPlanMst/investment_type_code}"
                            >
                                <core:Item key="{util>code}" text="{util>code_name}" />
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12"/>
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="과제명 :" required="true"/>
                            <Input 
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/investment_project_name',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 30
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" linebreak="true" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="투자기간 :" required="true"/>
                            <DatePicker 
                                displayFormat='yyyy-MM'
                                valueFormat ="yyyy-MM"
                                value="{applicationSup>/popUpInvestPlanMst/investment_yyyymm}"/>
                            <layoutData>
                               <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="신청금액(원) :" required="true"/>
                            <Input type="Number" value="{path: 'applicationSup>/popUpInvestPlanMst/appl_amount', type: 'sap.ui.model.type.Integer'}"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="투자 배경 및 목적 :" required="true"/>
                            <Input 
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/investment_purpose',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 300
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" linebreak="true" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="적용모델 :" required="true"/>
                            <Input 
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/apply_model_name',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 300
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="년간 예상물동 :" required="true"/>
                            <Input type="Number" value="{path: 'applicationSup>/popUpInvestPlanMst/annual_mtlmob_quantity', type: 'sap.ui.model.type.Integer'}"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="투자내역 :" required="true"/>
                            <Input 
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/investment_desc',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 300
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL9 L9 M9 S12" linebreak="true" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="집행시기 :" required="true"/>
                            <DatePicker 
                                displayFormat='yyyy-MM'
                                valueFormat ="yyyy-MM"
                                value="{applicationSup>/popUpInvestPlanMst/execution_yyyymm}"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                        
                        <VBox>
                            <Label text="투자효과 :" required="true"/>
                            <Input 
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/investment_effect',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 300
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL9 L9 M9 S12" linebreak="true" />
                            </layoutData>
                        </VBox>
                        
                        <VBox>
                            <Label text="투자장소 :" required="true"/>
                            <Input 
                                value="{
                                    path: 'applicationSup>/popUpInvestPlanMst/investment_place',
                                    type: 'sap.ui.model.type.String',
                                    constraints: {
                                        maxLength: 300
                                    }
                                }"/>
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </VBox>
                    </form:content>
                </form:SimpleForm>
            </VBox>
            <VBox>
                <HBox>
                    <Table id="investmentDtl"
                        sticky="HeaderToolbar,ColumnHeaders"
                        inset="false"
                        mode="MultiSelect"
                        class="sapFDynamicPageAlignContent"
                        items="{applicationSup>/popUpInvestPlanDtl}"
                        width="auto">
                        <headerToolbar>
                            <OverflowToolbar>
                                <ToolbarSpacer/>
                                <Button id="dtlAddRow" text="추가" type="Transparent" press=".onInvestmentDtlAddButtonPress" />
                                <Button id="dtlDeleteRow" text="삭제" type="Transparent" press=".onInvestmentDtlDeleteButtonPress" />
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column>
                                <Text text="품목" />
                            </Column>
                            <Column>
                                <Text text="구입단가(원)" required="true" />
                            </Column>
                            <Column>
                                <Text text="구입대수"  />
                            </Column>
                            <Column>
                                <Text text="구입금액(원)" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Input value="{applicationSup>investment_item_name}"/>
                                    <Input value="{applicationSup>investment_item_purchasing_price}" change=".onPurchasingAtm"/>
                                    <Input value="{applicationSup>investment_item_purchasing_qty}" change=".onPurchasingAtm"/>
                                    <Input value="{applicationSup>investment_item_purchasing_amt}"/>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </HBox>
                <HBox class="investmentItemPurchasingAmtSum" alignItems="Center" justifyContent="End">
                    <Label text="총 구입금액 : "/>
                    <Text id ="investment_item_purchasing_amt_sum" class="inputPurchasingAmt" />
                </HBox>
            </VBox>
        </content>
        
        <ToolbarSpacer/>
        <HBox justifyContent="End" >
            <Button text="취소" type="Transparent" press=".onCreatePopupClose"/>
            <Button text="저장" class="sapUiSmallMarginBeginEnd" type="Emphasized" press=".onCreatePopupSave"/>
        </HBox>
    </Dialog>
</core:FragmentDefinition>