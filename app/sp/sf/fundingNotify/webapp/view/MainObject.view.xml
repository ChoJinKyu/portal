<mvc:View controllerName="sp.sf.fundingNotify.controller.MidObject" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
    xmlns:form="sap.ui.layout.form"
    xmlns:richtexteditor="sap.ui.richtexteditor"
	xmlns:core="sap.ui.core"
	height="100%">
	<uxap:ObjectPageLayout id="page"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="true">
		<uxap:headerTitle>
			<!-- 타이틀 영역 -->
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
					<Title text="{I18N>/FUNDING_NOTIFICATION}" wrapping="true" />
				</uxap:expandedHeading>
				<uxap:snappedHeading>
					<Title text="{I18N>/FUNDING_NOTIFICATION}" wrapping="true" />
				</uxap:snappedHeading>
				<uxap:snappedTitleOnMobile>
					<Title text="{I18N>/FUNDING_NOTIFICATION}" />
				</uxap:snappedTitleOnMobile>
                <uxap:navigationActions>
                    <!-- <OverflowToolbarButton id="pageEnterFullScreenButton" type="Transparent" icon="sap-icon://full-screen" press="onPageEnterFullScreenButtonPress" tooltip="Enter Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
                    <OverflowToolbarButton id="pageExitFullScreenButton" type="Transparent" icon="sap-icon://exit-full-screen" press="onPageExitFullScreenButtonPress" tooltip="Exit Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/> -->
                    <OverflowToolbarButton id="pageNavBackButton" type="Transparent" icon="sap-icon://decline" text="back" tooltip="back to the list" press=".onPageNavBackButtonPress" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<!-- 헤더 영역 -->
			<FlexBox wrap="Wrap" visible="{midObjectView>/showMode}">
				<VBox>
                    <ObjectStatus
                        title="{I18N>/NOTIFICATION_NUMBER}"
                        text="{master>/funding_notify_number}"/>
                    <ObjectStatus
                        title="{I18N>/WRITER}"
                        text="{master>/create_user_id}"/>
                    <ObjectStatus
                        title="{I18N>/WRITE_DATE}"
                        text="{
                            path:'master>/system_create_dtm',
                            type:'sap.ui.model.odata.type.DateTime',
                            formatOptions: {
                                pattern: 'yyyy-MM-dd'
                            }
                        }"/>
                    <layoutData>
                        <layout:GridData span="XL4 L4 M6 S12" />
                    </layoutData>
                </VBox>
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections>
			<!-- General Infomation -->
			<uxap:ObjectPageSection id="pageSectionMain" titleUppercase="true" title="Genaral Infomation">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection1">
                        <form:SimpleForm
                            maxContainerCols="2"
                            editable="true"
                            layout="ResponsiveGridLayout"
                            adjustLabelSpan="false"
                            labelSpanL="4"
                            labelSpanM="4"
                            emptySpanL="0"
                            emptySpanM="0"
                            columnsL="2"
                            columnsM="2">
                            <form:content>
                                <VBox>
                                    <Label text="{I18N>/APPLICATION_PERIOD} :" required="true"/>
                                    <DateRangeSelection editable="{midObjectView>/editMode}"
                                        id="AnnouncementPeriodEdit" 
                                        displayFormat="yyyy-MM-dd" 
                                        dateValue="{master>/funding_notify_start_date}"
                                        secondDateValue="{master>/funding_notify_end_date}"
                                        placeholder="YYYY-MM-DD - YYYY-MM-DD"
                                        change=".onApplicationPeriodChange"
                                        />
                                    <layoutData>
                                        <layout:GridData span="XL6 L6 M6 S12" />
                                    </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/APPLICATION_DUE_DATE} :" required="true"/>
                                    <DatePicker editable="false"
                                        id="closingDate"
                                        value="{
                                            path:'master>/funding_appl_closing_date',
                                            type:'sap.ui.model.odata.type.DateTime',
                                            formatOptions: {
                                                pattern: 'yyyy-MM-dd'
                                            }
                                        }"/>
                                    <layoutData>
                                        <layout:GridData span="XL6 L6 M6 S12" />
                                    </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/TITLE} :" required="true"/>
                                    <Input editable="{midObjectView>/editMode}"
                                        value="{
                                            path: 'master>/funding_notify_title',
                                            type: 'sap.ui.model.type.String',
                                            constraints: {
                                                maxLength: 30
                                            }
                                        }"/>
                                    <layoutData>
                                        <layout:GridData span="XL12 L12 M12 S12" />
                                    </layoutData>
                                </VBox>
                                
                                <VBox id="idEditLayout">
                                    <Label text="{I18N>/CONTENTS} :" required="true"/>
                                    <richtexteditor:RichTextEditor
                                        editorType="TinyMCE4"
                                        width="100%"
                                        height="400px"
                                        editable="{midObjectView>/editMode}"
                                        customToolbar="true"
                                        showGroupFont="true"
                                        showGroupLink="true"
                                        showGroupInsert="true"
                                        value="{master>/funding_notify_contents}">
                                    </richtexteditor:RichTextEditor>
                                    <layoutData>
                                        <layout:GridData span="XL12 L12 M12 S12" />
                                    </layoutData>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- 파일 첨부 -->
			<uxap:ObjectPageSection id="pageAttachmentMain" titleUppercase="true" title="Attachment">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<form:SimpleForm>
                            <VBox>
                                <!-- File Upload 시작-->
                                <UploadCollection
                                    id="UploadCollection"
                                    maximumFilenameLength="55"
                                    maximumFileSize="10"
                                    multiple="true"
                                    sameFilenameAllowed="true"
                                    instantUpload="false"
                                    noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                    change="onChange"
                                    fileDeleted="onFileDeleted"
                                    filenameLengthExceed="onFilenameLengthExceed"
                                    fileSizeExceed="onFileSizeExceed"
                                    typeMissmatch="onTypeMissmatch"
                                    uploadComplete="onUploadComplete"
                                    beforeUploadStarts="onBeforeUploadStarts" />
                                <layoutData>
                                    <layout:GridData span="XL12 L12 M12 S12" />
                                </layoutData>
                                <!-- File Upload 끝-->
                            </VBox>
						</form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
		</uxap:sections>

		<!-- 하단 버튼 처리 툴바 -->
		<uxap:footer>
			<OverflowToolbar>
        <Button
            icon="sap-icon://alert"
            type="Emphasized"
            text="{= ${message>/}.length }"
            visible="{= ${message>/}.length > 0 }"
            press=".onMessagePopoverPress" />
				<ToolbarSpacer />
                <Button id="pageEditButton" text="{I18N>/UPDATE}" type="Transparent" press=".onPageEditButtonPress" />
                <Button id="pageDeleteButton" text="{I18N>/DELETE}" type="Transparent" press=".onPageDeleteButtonPress" />
				<Button id="pageSaveButton" text="{I18N>/SAVE}" type="Emphasized" press=".onPageSaveButtonPress" />
				<Button id="pageCancelButton" text="{I18N>/CANCEL}" type="Transparent" press=".onPageCancelEditButtonPress"/>
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>