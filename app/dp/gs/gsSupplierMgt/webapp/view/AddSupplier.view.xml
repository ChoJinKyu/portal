<mvc:View controllerName="dp.gs.gsSupplierMgt.controller.AddSupplier" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
    xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
    xmlns:richtexteditor="sap.ui.richtexteditor"
	height="100%">

	<uxap:ObjectPageLayout id="suppliePage"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="true">
		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
                <uxap:heading>
                    <HBox alignItems="End">
                        <OverflowToolbarButton id="pageNavBackButton" type="Transparent" icon="sap-icon://nav-back" tooltip="back to the list" press=".onPageNavBackButtonPress" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                        <Title text="{I18N>/GLOBAL} {I18N>/SOURCING} {I18N>/SUPPLIER}" wrapping="true" class="" />
                    </HBox>
                </uxap:heading>
				
                <uxap:navigationActions>					
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

        <uxap:headerContent>						
            <FlexBox wrap="Wrap" visible="true">
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/SOURCING_SUPPLIER_NICKNAME} :"/>
                        <Label text="{SupplierGenView>/sourcing_supplier_nickname}" class="sapUiTinyMarginBegin sapUiLargeMarginEnd" design="Bold"/>
					</layout:HorizontalLayout>
                    <layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/DEVELOP_DATE} :" />
						<Label text="{
                            path:'SupplierGenView>/develop_date',
                            type:'sap.ui.model.odata.type.DateTime',
                            formatOptions: {
                                pattern: 'yyyy-MM-dd'
                            }
                        }" 
                        class="sapUiTinyMarginBegin sapUiLargeMarginEnd" 
                        design="Bold"/>
					</layout:HorizontalLayout>
                    <layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/DEVELOPER_EMP} :"/>
                        <Label text="{SupplierGenView>/developer_empname}" class="sapUiTinyMarginBegin sapUiLargeMarginEnd" design="Bold"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/LATEST} {I18N>/CHANGE} {I18N>/DATE_TIME} :" class="sapUiLargeMarginBegin" />
                        <Label text="{
                            path: 'SupplierGenView>/local_update_dtm',
                            formatter: '.dateFormatter.toUTCDateTimeString'
                        }"  
                        class="sapUiTinyMarginBegin"  
                        design="Bold"/>
					</layout:HorizontalLayout>					
				</layout:VerticalLayout>
			</FlexBox>            
		</uxap:headerContent>       

		<uxap:sections>
			<uxap:ObjectPageSection id="pageSectionMain" titleUppercase="false" title="{I18N>/DEFAULT}{I18N>/INFORMATION}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection1">
                        <form:SimpleForm         
                            editable="true"
                            layout="ResponsiveGridLayout"			
                            labelSpanXL="12"
                            labelSpanL="12"
                            labelSpanM="12"
                            labelSpanS="12"
                            adjustLabelSpan="false"
                            emptySpanXL="0"
                            emptySpanL="0"
                            emptySpanM="0"
                            emptySpanS="0"
                            columnsXL="1"
                            columnsL="1"
                            columnsM="1" >
                            
                            <form:content>            
                                <Label text="{I18N>/SOURCING_SUPPLIER_LOCAL_NAME}"/>
                                <Input value="{
                                        path: 'SupplierGen>/sourcing_supplier_local_name',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 240
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>			
                                <Label text="{I18N>/SOURCING_SUPPLIER_ENGLISH_NAME}"/>
                                <Input value="{
                                        path: 'SupplierGen>/sourcing_supplier_english_name',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 240
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>			
                                <Label text="{I18N>/LOCAL_FULL_ADDRESS}"/>
                                <Input value="{
                                        path: 'SupplierGen>/local_full_address',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 1000
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>			
                                <Label text="{I18N>/ENGLISH_FULL_ADDRESS}"/>
                                <Input value="{
                                        path: 'SupplierGen>/english_full_address',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 1000
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>			
                                <Label text="{I18N>/PRODUCT_DESC}"/>
                                <Input value="{
                                        path: 'SupplierGen>/product_desc',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 300
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>			
                                <Label text="{I18N>/EMAIL_ADDRESS}"/>
                                <Input id="eidtEmail"  value="{
                                        path: 'SupplierGen>/email_address',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 100
                                        }
                                    }" editable="{addSupplierView>/editMode}" required="true"></Input>			
                                <Label text="{I18N>/AN_PROFILE}"/>
                                <Input value="{
                                        path: 'SupplierGen>/an_profile',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 100
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>
                                <Label text="{I18N>/TAX_ID}"/>
                                <Input value="{
                                        path: 'SupplierGen>/tax_id',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 16
                                        }
                                    }" editable="{addSupplierView>/editMode}"></Input>			
                                <!-- <Label text="{I18N>/REMARK}"/>
                                <Input id="iRemark"
                                    value="{
                                        path: 'SupplierGen>/remark',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            maxLength: 3000
                                        }
                                    }" editable="true"></Input> -->
                                <Label text="{I18N>/SOURCING}{I18N>/CONTENTS}"/>            
                                <richtexteditor:RichTextEditor
                                    editorType="TinyMCE4"
                                    width="100%"
                                    height="400px"
                                    editable="{addSupplierView>/editMode}"
                                    customToolbar="true"
                                    showGroupFont="true"
                                    showGroupLink="true"
                                    showGroupInsert="true"
                                    value="{SupplierGen>/sourcing_contents}">
                                </richtexteditor:RichTextEditor> 
                            </form:content>
                        </form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

            <!-- 파일 첨부 -->
			<uxap:ObjectPageSection id="pageAttachmentMain" titleUppercase="true" title="{I18N>/Attachments}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<form:SimpleForm>
                            <VBox>
                                <!-- File Upload 시작-->
                                <UploadCollection
                                    id="UploadCollection"
                                    maximumFilenameLength="55"
                                    maximumFileSize="10"
                                    multiple="true"
                                    sameFilenameAllowed="true"
                                    instantUpload="false"
                                    noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                    change="onChange"
                                    fileDeleted="onFileDeleted"
                                    filenameLengthExceed="onFilenameLengthExceed"
                                    fileSizeExceed="onFileSizeExceed"
                                    typeMissmatch="onTypeMissmatch"
                                    uploadComplete="onUploadComplete"
                                    beforeUploadStarts="onBeforeUploadStarts" />
                                <layoutData>
                                    <layout:GridData span="XL12 L12 M12 S12" />
                                </layoutData>
                                <!-- File Upload 끝-->
                            </VBox>
						</form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>					

			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/FINANCIAL}{I18N>/CURST}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<Table id="finTable" 
								sticky="HeaderToolbar,ColumnHeaders" 
								inset="false"								
								items="{SupplierFin>/SupplierFin}"
								class="sapFDynamicPageAlignContent" 
								updateFinished=".onMidTableUpdateFinished"
                                mode="MultiSelect"
								width="auto">
							<headerToolbar>
								<OverflowToolbar>
									<Title text="(단위 : Million USD)" level="H2"/>
									<ToolbarSpacer/>
									<!-- Add the Personalization button -->
									<Button id="midTableAddButton" text="{I18N>/ROW_ADD}" type="Transparent" press=".onMidTableAddButtonPress" />
									<Button id="midTableDeleteButton" text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMidTableDeleteButtonPress" />
									<!-- <Button id="midTableSaveButton" text="Save" type="Emphasized" press=".onMidTableSaveButtonPress" /> -->
									<ToolbarSeparator/>
                                    <!-- <Button icon="sap-icon://action-settings" press=".onFinTablePersoButtonPressed" >
                                        <layoutData>
                                            <OverflowToolbarLayoutData priority="NeverOverflow" />
                                        </layoutData>
                                    </Button> -->
									<!-- <SearchField id="midTableSearchField" placeholder="UOM Name" width="10rem" search=".onMidTableFilterPress" /> -->
									<!-- <Button id="midTableApplyFilterButton" text="Apply" type="Transparent" press=".onMidTableApplyFilterButton" /> -->
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column minScreenWidth="Tablet" hAlign="Center" width="40px" >
									<Label text="S" />
								</Column>
								<Column minScreenWidth="Tablet" hAlign="Center" importance="High" width="8em">
									<Label text="{I18N>/FISCAL_YEAR}" required="true"/>
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Center" width="8em">
									<Label text="{I18N>/FISCAL_QUARTER}" required="true"/>
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/SALES_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/OPINCOM_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/ASSET_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/CURASSET_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/NCA_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/LIABILITIES_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/CURLIABLITIES_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/NCL_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/EQUITY_CAPITAL}" />
								</Column>								
							</columns>
							<items>
								<ColumnListItem type="Inactive" press=".onMidTableItemPress">
									<cells>
										<Text text="{SupplierFin>_row_state_}"/>
                                        <DatePicker value="{SupplierFin>fiscal_year}" displayFormat="yyyy"/>										
                                        <Input value="{SupplierFin>fiscal_quarter}"/>
                                        <Input value="{SupplierFin>sales_amount}"/>
                                        <Input value="{SupplierFin>opincom_amount}"/>
                                        <Input value="{SupplierFin>asset_amount}"/>
                                        <Input value="{SupplierFin>curasset_amount}"/>
                                        <Input value="{SupplierFin>nca_amount}"/>
                                        <Input value="{SupplierFin>liabilities_amount}"/>
                                        <Input value="{SupplierFin>curliablities_amount}"/>
                                        <Input value="{SupplierFin>ncl_amount}"/>
                                        <Input value="{SupplierFin>equity_capital}"/>										
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

            <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MAIN_SALES_SUPPLIER}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<Table id="salTable" 
								sticky="HeaderToolbar,ColumnHeaders" 
								inset="false"								
								items="{SupplierSal>/SupplierSal}"
								class="sapFDynamicPageAlignContent" 
								updateFinished=".onMidTableUpdateFinished"
                                mode="MultiSelect"
								width="auto">
							<headerToolbar>
								<OverflowToolbar>
									<Title text="(단위 : Million USD)" level="H2"/>
									<ToolbarSpacer/>
									<!-- Add the Personalization button -->
									<Button id="midTable2AddButton" text="{I18N>/ROW_ADD}" type="Transparent" press=".onMidTable2AddButtonPress" />
									<Button id="midTable2DeleteButton" text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMidTable2DeleteButtonPress" />
									<!-- <Button id="midTableSaveButton" text="Save" type="Emphasized" press=".onMidTableSaveButtonPress" /> -->
									<ToolbarSeparator/>
									<!-- <SearchField id="midTableSearchField" placeholder="UOM Name" width="10rem" search=".onMidTableFilterPress" /> -->
									<!-- <Button id="midTableApplyFilterButton" text="Apply" type="Transparent" press=".onMidTableApplyFilterButton" /> -->
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column minScreenWidth="Tablet" hAlign="Center" width="40px" >
									<Label text="S" />
								</Column>
								<Column minScreenWidth="Tablet" hAlign="Center" importance="High">
									<Label text="{I18N>/TXN_YEAR}" required="true"/>
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Center" >
									<Label text="{I18N>/CUSTOMER_ENGLISH_NAME}" required="true"/>
								</Column>                                
                                <Column minScreenWidth="Tablet" hAlign="Center" >
									<Label text="{I18N>/CUSTOMER_LOCAL_NAME}" />
								</Column>                                
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/ANNUAL_TXN_AMOUNT}" />
								</Column>
                                <Column minScreenWidth="Tablet" hAlign="Right" >
									<Label text="{I18N>/SALES_WEIGHT}" />
								</Column>                                								
							</columns>
							<items>
								<ColumnListItem type="Inactive" press=".onMidTable2ItemPress">
									<cells>
										<Text text="{SupplierSal>_row_state_}"/>
										<Input value="{SupplierSal>txn_year}"/>
                                        <Input value="{SupplierSal>customer_english_name}"/>
                                        <Input value="{SupplierSal>customer_local_name}"/>
                                        <Input value="{SupplierSal>annual_txn_amount}"/> 
                                        <Input value="{SupplierSal>sales_weight}"/>                                       									
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>            

		</uxap:sections>
		
		<uxap:footer>
			<OverflowToolbar>
                <Button
                    icon="sap-icon://alert"
                    type="Emphasized"
                    text="{= ${message>/}.length }"
                    visible="{= ${message>/}.length > 0 }"
                    ariaHasPopup="Dialog"
                    press=".onMessagePopoverPress" />
				<ToolbarSpacer />
                <Button id="pageEditButton" text="{I18N>/UPDATE}" type="Transparent" press=".onPageEditButtonPress" />							
                <Button id="pageCancelButton" type="Transparent" text="{I18N>/CANCEL}" press=".onPageCancelEditButtonPress"/>
                <Button id="pageSaveButton" type="Emphasized" text="{I18N>/SAVE}" press=".onPageSaveButtonPress" />	
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>