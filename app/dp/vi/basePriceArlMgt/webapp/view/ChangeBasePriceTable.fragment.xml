<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:t="sap.ui.table"
    xmlns:layout="sap.ui.layout" >
    <t:Table 
        selectionMode="MultiToggle"
        rows="{detailModel>/details}"
        rowSelectionChange=".onRowSelectionChange"
        fixedColumnCount="3"
        visibleRowCountMode="Auto">
        <t:extension>
            <OverflowToolbar class="sapFDynamicPageAlignContent">
                <ToolbarSpacer />
                <Button text="{I18N>/UPLOAD}" type="Transparent" press=".onDeveloping" visible="{detailViewModel>/viewMode}" />
                <Button text="{I18N>/ADDITION}" type="Transparent" press=".onAddBasePrice" visible="{detailViewModel>/viewMode}" />
                <Button text="{I18N>/DELETE}" type="Transparent" press=".onDeleteDetailRow" visible="{detailViewModel>/viewMode}" />
                <!-- <Button icon="sap-icon://excel-attachment" />
                <Button icon="sap-icon://group-2" />
                <Button icon="sap-icon://action-settings" /> -->
            </OverflowToolbar>
        </t:extension>
        <t:columns>
            <!-- <t:Column hAlign="Center" width="6rem"> -->
            <t:Column hAlign="Center" width="18rem">
                <Label text="{I18N>/COMPANY}" textAlign="Center" />
                <t:template>
                    <ComboBox width="100%" 
                        editable="{= ${detailViewModel>/viewMode} &amp;&amp; ${rootModel>/config/DP_VI_COMPANY_EDITABLE_FLAG} === 'Y' ? true : false}"
                        selectedKey="{detailModel>company_code}" 
                        items="{
                            path: 'org>/Company',
                            filters: [
                                {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                            ],
                            sorter: { path: 'company_code'},
                            templateShareable:false
                        }"
                        change=".onChangeCompany">
                        <items>
                            <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                        </items>
                    </ComboBox>
                </t:template>
            </t:Column>
            <!-- <t:Column hAlign="Center" width="6rem"> -->
            <t:Column hAlign="Center" width="18rem">
                <!-- <Label text="{I18N>/BUSINESS_DIVISION}" textAlign="Center" /> -->
                <Label  text="{rootModel>/plantLabel}" textAlign="Center" />
                <t:template>
                    <!-- <Text text="{detailModel>org_code}" /> -->
                    <ComboBox width="100%"
                        editable="{detailViewModel>/viewMode}"
                        selectedKey="{
                            path: 'detailModel>org_code',
                            templateShareable:false}" 
                        items="{
                            path: 'detailModel>purOrg',
                            templateShareable:false}">
                        <items>
                            <core:Item key="{detailModel>org_code}" text="[{detailModel>org_code}]{detailModel>org_name}" />
                        </items>
                    </ComboBox>
                </t:template>
            </t:Column>
            <t:Column width="10rem">
                <Label text="{I18N>/MATERIAL_CODE}" textAlign="Center" width="100%" />
                <t:template>
                    <!-- <Input
                        value="{detailModel>material_code}"
                        editable="{= ${detailModel>/approval_status_code} === '10' ? true : false}"
                        showValueHelp="true"
                        valueHelpRequest=".onGetMaterialCodeDialogData" >
                        <customData>
                            <core:CustomData key="dialog" value="materialCode"  />
                        </customData>
                    </Input> -->
                    <Input
                        editable="{detailViewModel>/viewMode}"
                        value="{detailModel>material_code}"
                        showValueHelp="true"
                        valueHelpRequest=".onMaterialMasterMultiDialogPress">
                    </Input>
                </t:template>
            </t:Column>
            <t:Column width="14rem">
                <Label text="{I18N>/DESCRIPTION}" textAlign="Center" width="100%" />
                <t:template>
                    <Text text="{detailModel>material_desc}" />
                </t:template>
            </t:Column>
            <t:Column width="20rem">
                <Label text="{I18N>/SPEC_DESC}" textAlign="Center" width="100%" />
                <t:template>
                    <Text text="{detailModel>material_spec}" />
                </t:template>
            </t:Column>
            <t:Column width="12rem">
                <Label text="{I18N>/BASIS}" textAlign="Center" width="100%" />
                <t:template>
                    <Select
                        editable="{detailViewModel>/viewMode}"
                        items="{
                            path: 'detailViewModel>/basis',
                            templateShareable:false}"
                        selectedKey="{detailModel>base_price_ground_code}">
                        <items>
                            <core:Item key="{detailViewModel>code}" text="{detailViewModel>code_description}" />
                        </items>
                    </Select>
                </t:template>
            </t:Column>
            <t:Column headerSpan="2" width="7rem" visible="{= ${rootModel>/config/DP_VI_SUPPLY_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/SUPPLIER}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/CODE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{detailModel>supplier_code}" textAlign="Center" width="100%" />
                </t:template>
            </t:Column>
            <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_SUPPLY_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/SUPPLIER}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/NAME}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Input
                        value="{detailModel>supplier_local_name}"
                        editable="{detailViewModel>/viewMode}"
                        showValueHelp="true"
                        valueHelpRequest=".onGetSupplierDialogData" >
                        <customData>
                            <core:CustomData key="dialog" value="supplier"  />
                        </customData>
                    </Input>
                </t:template>
            </t:Column>
            <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{
                        path: 'detailModel>base_date',
                        formatter: '.dateFormatter.toDateString'}" textAlign="Center" width="100%" />
                </t:template>
            </t:Column>
            <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%" />
                <t:template>
                    <Input 
                        value="{
                                parts: [
                                    {path: 'detailModel>prices/0/new_base_price'},
                                    {path: 'detailModel>prices/0/new_base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }"
                        editable="{detailViewModel>/viewMode}"
                        textAlign="End" />
                </t:template>
            </t:Column>
            <t:Column width="6rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                <Label text="{I18N>/CURRENCY_CODE}" textAlign="Center" width="100%" />
                <t:template>
                    <ComboBox
                        editable="{detailViewModel>/viewMode}"
                        items="{
                            path: 'detailViewModel>/currency',
                            templateShareable:false}"
                        selectedKey="{detailModel>prices/0/new_base_price_currency_code}">
                        <items>
                            <core:Item key="{detailViewModel>currency_code}" text="{detailViewModel>currency_code}" />
                        </items>
                    </ComboBox>
                </t:template>
            </t:Column>
            <t:Column headerSpan="3" width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{
                        path: 'detailModel>base_date',
                        formatter: '.dateFormatter.toDateString'}" textAlign="Center" width="100%" />
                </t:template>
            </t:Column>
            <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Input 
                        value="{
                                path:'detailModel>prices/0/new_base_price'
                                }" 
                        editable="{detailViewModel>/viewMode}"
                        textAlign="End"
                        type="Number" />
                </t:template>
            </t:Column>
            <t:Column width="6rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/CURRENCY_CODE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <ComboBox
                        editable="{detailViewModel>/viewMode}"
                        items="{
                            path: 'detailViewModel>/currency',
                            templateShareable:false}"
                        selectedKey="{detailModel>prices/0/new_base_price_currency_code}">
                        <items>
                            <core:Item key="{detailViewModel>currency_code}" text="{detailViewModel>currency_code}" />
                        </items>
                    </ComboBox>
                </t:template>
            </t:Column>
            <t:Column headerSpan="3" width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{
                        path: 'detailModel>base_date',
                        formatter: '.dateFormatter.toDateString'}" textAlign="Center" width="100%" />
                </t:template>
                </t:Column>
            <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Input 
                        value="{detailModel>prices/1/new_base_price}" 
                        editable="{detailViewModel>/viewMode}"
                        textAlign="End"
                        type="Number" />
                </t:template>
                </t:Column>
            <t:Column width="6rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                <t:multiLabels>
                    <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/CURRENCY_CODE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <ComboBox
                        editable="{detailViewModel>/viewMode}"
                        items="{
                            path: 'detailViewModel>/currency',
                            templateShareable:false}"
                        selectedKey="{detailModel>prices/1/new_base_price_currency_code}">
                        <items>
                            <core:Item key="{detailViewModel>currency_code}" text="{detailViewModel>currency_code}" />
                        </items>
                    </ComboBox>
                </t:template>
            </t:Column>
            <t:Column width="12rem">
                <Label text="{I18N>/BASE_PRICE_TYPE}" textAlign="Center" width="100%" />
                <t:template>
                    <Text text="{detailModel>PART_NO}" />
                </t:template>
            </t:Column>
            <t:Column headerSpan="4" width="6rem">
                <t:multiLabels>
                    <Label text="{I18N>/FAMILY_MATERIAL_CODE}" textAlign="Center" width="100%" />
                    <!-- <Label text="{I18N>/BUSINESS_DIVISION}" textAlign="Center" width="100%" /> -->
                    <Label  text="{rootModel>/plantLabel}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{detailModel>PART_NO}" />
                </t:template>
                </t:Column>
            <t:Column width="12rem">
                <t:multiLabels>
                    <Label text="{I18N>/FAMILY_MATERIAL_CODE}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/MATERIAL_CODE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Input
                        value="{detailModel>PART_NO}"
                        editable="{detailViewModel>/viewMode}"
                        visible="{= ${detailModel>base_price_ground_code} === '30' ? true : false }"
                        showValueHelp="true"
                        valueHelpRequest=".onDeveloping" >
                        <customData>
                            <core:CustomData key="dialog" value="familyMaterialCode"  />
                        </customData>
                    </Input>
                </t:template>
                </t:Column>
            <t:Column width="12rem">
                <t:multiLabels>
                    <Label text="{I18N>/FAMILY_MATERIAL_CODE}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/SUPPLIER_CODE}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{detailModel>PART_NO}" />
                </t:template>
            </t:Column>
            <t:Column width="12rem">
                <t:multiLabels>
                    <Label text="{I18N>/FAMILY_MATERIAL_CODE}" textAlign="Center" width="100%" />
                    <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" width="100%" />
                </t:multiLabels>
                <t:template>
                    <Text text="{detailModel>supplier_name}" />
                </t:template>
            </t:Column>
            <!-- <t:Column width="12rem">
                <Label text="{I18N>/HQ_NPD_BASE_PRICE}" textAlign="Center" width="100%" />
                <Label text="HQ NPD Base Price" textAlign="Center" width="100%" />
                <t:template>
                    <Text text="{detailModel>hq_npd_base_price}" textAlign="Right" width="100%" />
                </t:template>
            </t:Column> -->
        </t:columns>
    </t:Table>
</core:FragmentDefinition>