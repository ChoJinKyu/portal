<core:FragmentDefinition xmlns="sap.m" 
                         xmlns:uxap="sap.uxap" 
                         xmlns:form="sap.ui.layout.form" 
                         xmlns:core="sap.ui.core" 
                         xmlns:layout="sap.ui.layout" 
                         xmlns:tnt="sap.tnt" 
                         xmlns:co="sap.suite.ui.commons" 
                         xmlns:si="sap.suite.ui.commons.statusindicator" 
                         xmlns:u="sap.ui.unified" 
                         xmlns:table="sap.ui.table"
                         xmlns:smartForm="sap.ui.comp.smartform" 
                         xmlns:smartMultiInput="sap.ui.comp.smartmultiinput"
                         xmlns:dnd="sap.ui.core.dnd"
                         >
	<VBox class="sapUiSmallMargin">
		<form:SimpleForm editable="true" 
                         layout="ResponsiveGridLayout" 
                         labelSpanXL="2" 
                         labelSpanL="2" 
                         labelSpanM="2" 
                         labelSpanS="2" 
                         adjustLabelSpan="false" 
                         emptySpanXL="0" 
                         emptySpanL="0" 
                         emptySpanM="0" 
                         emptySpanS="0" 
                         columnsXL="2" 
                         columnsL="1" 
                         columnsM="1" 
                         singleContainerFullSize="true">
			<form:content>
				<!-- Approval Line 
                description : UI 드래그앤 드롭으로 변경 
                date : 2021.01.21 
                author : jinseon.lee 
                --> 
				<Table id="ApproverTable"       
                        growing="true"
                        growingThreshold="20"
                        class="sapFDynamicPageAlignContent" 
                        updateFinished=".onListMainTableUpdateFinished"
                        mode="SingleSelectMaster" 
                        type="None"
                        width="auto"
                        items="{approver>/Approvers}" 
                        >
                    <headerToolbar>
                        <OverflowToolbar>
                            <Label text="Approval Line"/> 
                            <ObjectStatus icon="sap-icon://move" text="" tooltip="드래그앤드랍으로 승인라인을 변경할 수 있습니다." /> 
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column id="approver_empno" minScreenWidth="Tablet" hAlign="Center" visible="false" width="3em" >
                            <Text text="approver_empno" />
                        </Column>
                        <Column id="no" minScreenWidth="Tablet" hAlign="Center"  width="3.5em" >
                            <Text text="{I18N>/SEQUENCE}" />
                        </Column>
                        <Column id="type" minScreenWidth="Tablet" hAlign="Center" width="10em" >
                            <Text text="{I18N>/TYPE}" />
                        </Column>
                        <Column id="nameDept" minScreenWidth="Tablet" hAlign="Center" width="20em" >
                            <HBox><Text text="{I18N>/NAME}" /><Text text="/" /><Text text="{I18N>/DEPARTMENT}" /></HBox>
                        </Column>
                        <Column id="status" minScreenWidth="Tablet" hAlign="Center" width="12em" >
                            <Text text="{I18N>/STATUS}" />
                        </Column> 
                        <Column id="comment" minScreenWidth="Tablet" hAlign="Center" >
                            <Text text="{I18N>/COMMENT}" />
                        </Column>
                        <Column id="add" minScreenWidth="Tablet" hAlign="Center" width="5em" >
                            <Text text="{I18N>/ROW_ADD}"  />
                        </Column>					
                        <Column id="delete" minScreenWidth="Tablet" hAlign="Center" width="5em" >
                            <Text text="{I18N>/ROW_DELETE}" />
                        </Column>					
                    </columns>
                    <dragDropConfig>
                        <dnd:DragDropInfo
                            sourceAggregation="items" 
                            targetAggregation="items" 
                            dropPosition="Between" 
                            dragStart="onDragStartTable" 
                            drop="onDragDropTable"   /> 
                          
                    </dragDropConfig>					
                    <items>
                        <ColumnListItem type="Active" press=".onItemPress">
                            <cells>
                                <Text text="{approver>approver_empno}"  />
                                <Text text="{approver>approve_sequence}" />
                                <ComboBox width="100%"
                                    selectedKey="{approver>approver_type_code}" 
                                    items="{ path : 'commonODataModel>/Code',
                                                filters : [
                                                    {path : 'tenant_id', operator : 'EQ', value1 : 'L2600'},
                                                    {path : 'group_code', operator : 'EQ', value1 : 'CM_APPROVER_TYPE'}
                                                ],
                                                sorter: { path: 'sort_no'} 
                                            }"
                                    enabled="{approver>selRow}" >  
                                    <core:Item key="{commonODataModel>code}" text="{commonODataModel>code_name}" />
                                </ComboBox>
                                <Input value="{approver>approver_name}" placeholder="Search employee"
                                    enabled="{approver>selRow}"
                                    showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                                </Input>
                                <Text text="{approver>approve_status_code}" />
                                <Text text="{approver>approve_comment}" />
                                <Button icon="sap-icon://sys-add" press=".onApproverAdd(${approver>approve_sequence})" tooltip="add" />
                                <Button icon="sap-icon://delete" press=".setApproverRemoveRow(${approver>approve_sequence})" tooltip="delete" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
			</form:content>
		</form:SimpleForm>
		<form:SimpleForm editable="true" 
                         layout="ResponsiveGridLayout" 
                         labelSpanXL="2" 
                         labelSpanL="2" 
                         labelSpanM="2" 
                         labelSpanS="2" 
                         adjustLabelSpan="false" 
                         emptySpanXL="0" 
                         emptySpanL="0" 
                         emptySpanM="0" 
                         emptySpanS="0" 
                         columnsXL="2" 
                         columnsL="1" 
                         columnsM="1" 
                         singleContainerFullSize="true">
			<form:content>
				<VBox class="sapUiSmallMarginBegin">
                    <Toolbar>
                    <Label text="Referer" />
                    <ToolbarSpacer/>
                    <HBox alignItems="End" justifyContent="End" >
                        <Label text="Adress Book" class=""/>
                        <core:Icon 
                            src="sap-icon://address-book"
                            class="size2 sapUiSmallMarginBeginEnd" 
                            >
                        </core:Icon>
                    </HBox>
                    </Toolbar>
                    <layout:VerticalLayout class="sapUiContentPadding" width="100%"> 
                        <MultiInput id="referMulti"
                                placeholder="Choose codes from the ValueHelp"
                                showValueHelp="true" 
                                valueHelpRequest=".onMultiInputWithEmployeeValuePress"
                                editable="{detailViewModel>/viewMode}"
                                >
                        </MultiInput>
                        <!-- <MultiComboBox
                            selectionChange="handleSelectionChangeReferer"
                            selectionFinish="handleSelectionFinishReferer"
                            width="100%" 
                            selectedKeys="{refererMultiCB>/refer}"
                            items="{ path: '/RefererSearch',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2600'}
                                        ]
                                    }"
                            editable="{mode>/editFlag}">
                            <core:Item key="{employee_number}" text="{s_referer_name}" />
                        </MultiComboBox> -->
                    </layout:VerticalLayout>
                    <layoutData>
                        <layout:GridData span="XL12 L12 M12 S12" />
                    </layoutData> 
                </VBox>
			</form:content>
		</form:SimpleForm>
	</VBox>
</core:FragmentDefinition>
