<core:FragmentDefinition
    class="sapUiSizeCompact"    
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:layout="sap.ui.layout"
    xmlns:table="sap.ui.table"
    xmlns:form="sap.ui.layout.form"
    displayBlock="true">
	
	<Dialog title="Family Material Code"
            draggable="true"
            resizable="true"
            contentWidth="90%"
            contentHeight="60%">
		<content>
            <form:SimpleForm
                    editable="true"
                    layout="ResponsiveGridLayout"
                    adjustLabelSpan="false">
                <form:content>
                    <!-- Company 시작 -->
                    <VBox>
                        <Label text="{I18N>/COMPANY}"></Label>
                        <ComboBox width="100%" 
                            selectedKey="{dialogModel>/company_code}" 
                            items="{rootModel>/company}"
                            change=".onChangeCompanyFmailyMaterialCodeDialog">
                            <items>
                                <core:Item key="{rootModel>company_code}" text="[{rootModel>company_code}] {rootModel>company_name}" />
                            </items>
                        </ComboBox>
                        <layoutData>
                            <layout:GridData span="XL2 L4 M6 S12" />
                        </layoutData>
                    </VBox>
                    <!-- Company 끝 -->

                    <!-- Plant 시작 -->
                    <VBox>
                        <Label text="{I18N>/VI_APPROVE_ORG_CODE}"></Label>
                        <ComboBox width="100%" 
                            selectedKey="{dialogModel>/org_code}" 
                            items="{dialogModel>/selectedPurOrg}">
                            <items>
                                <core:Item key="{dialogModel>org_code}" text="[{dialogModel>org_code}]{dialogModel>org_name}" />
                            </items>
                        </ComboBox>
                        <layoutData>
                            <layout:GridData span="XL2 L4 M6 S12" />
                        </layoutData>
                    </VBox>
                    <!-- Plant 끝 -->

                    <!-- Material Code 시작 -->
                    <VBox>
                        <Label text="{I18N>/MATERIAL_CODE}" />
                        <Input 
                            value="{dialogModel>/material_code}"
                            change=".onSearchFamilyMaterialCode"  >
                        </Input>
                        <layoutData>
                            <layout:GridData span="XL2 L4 M6 S12" />
                        </layoutData>
                    </VBox>
                    <!-- Material Code 끝 -->
                </form:content>
            </form:SimpleForm>

            <table:Table   
                id="familyMaterialCodeTable"
                selectionMode="Single"
                rows="{dialogModel>/familyMaterialCode}"
                selectionBehavior="Row"
                visibleRowCountMode="Auto"
                minAutoRowCount="7"
                rowSelectionChange=".onSelectFamilyMaterialCode"
                fixedColumnCount="3">
                <table:extension>
                    <OverflowToolbar>
                        <ToolbarSpacer />
                        <Button
                            class="sapUiSmallMarginEnd"
                            type="Emphasized"
                            text="{I18N>/SEARCH}"
                            press=".onSearchFamilyMaterialCode" />
                    </OverflowToolbar>
                </table:extension>
                <table:columns>
                    <table:Column hAlign="Center" width="6rem">
                        <Label text="{I18N>/COMPANY}" textAlign="Center" />
                        <table:template>
                            <Text text="{dialogModel>company_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column hAlign="Center" width="6rem">
                        <Label text="{I18N>/VI_APPROVE_ORG_CODE}" textAlign="Center" />
                        <table:template>
                            <Text text="{dialogModel>org_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/MATERIAL_CODE}" />
                        <table:template>
                            <Text text="{dialogModel>material_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column headerSpan="2" hAlign="Center" width="7rem" >
                        <table:multiLabels>
                            <Label text="{I18N>/SUPPLIER}" textAlign="Center" />
                            <Label text="{I18N>/CODE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>supplier_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="15rem" >
                        <table:multiLabels>
                            <Label text="{I18N>/SUPPLIER}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/NAME}" textAlign="Center" width="100%" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>supplier_local_name}" tooltip="{dialogModel>supplier_local_name}" />
                        </table:template>
                    </table:Column>
                    <!-- <table:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/CURRENT_ORDER_RATE}" />
                        <table:template>
                            <Text text="" />
                        </table:template>
                    </table:Column> -->

                    <!-- market_code 0 시작 -->
                    <table:Column hAlign="Center" width="8rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/PUR_PRICE}" textAlign="Center" />
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/0/current_price'},
                                    {path: 'dialogModel>prices/0/current_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/PUR_CURRENCY}" textAlign="Center" />
                        <table:template>
                            <Text text="{dialogModel>prices/0/current_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/PUR_START_DATE}" textAlign="Center" />
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/0/current_price_start_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/CURRENT_BASE_PRICE}" textAlign="Center" />
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/0/base_price'},
                                    {path: 'dialogModel>prices/0/base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/CURRENT_CURRENCY}" textAlign="Center" />
                        <table:template>
                            <Text text="{dialogModel>prices/0/base_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/CURRENT_BASE_DATE}" textAlign="Center" />
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/0/base_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/DEVELOPMENT_BASE_PRICE}" textAlign="Center" />
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/0/new_base_price'},
                                    {path: 'dialogModel>prices/0/new_base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/DEVELOPMENT_CURRENCY}" textAlign="Center" />
                        <table:template>
                            <Text text="{dialogModel>prices/0/new_base_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/DEVELOPMENT_START_DATE}" textAlign="Center" />
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/0/new_base_price_start_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <!-- market_code 0 끝 -->

                    <!-- market_code 2(DOMESTIC) 시작 -->
                    <table:Column headerSpan="9" hAlign="Center" width="8rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/PUR_PRICE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/2/current_price'},
                                    {path: 'dialogModel>prices/2/current_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/PUR_CURRENCY}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>prices/2/current_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/PUR_START_DATE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/2/current_price_start_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/CURRENT_BASE_PRICE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/2/base_price'},
                                    {path: 'dialogModel>prices/2/base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/CURRENT_CURRENCY}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>prices/2/base_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/CURRENT_BASE_DATE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/2/base_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/DEVELOPMENT_BASE_PRICE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/2/new_base_price'},
                                    {path: 'dialogModel>prices/2/new_base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/DEVELOPMENT_CURRENCY}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>prices/2/new_base_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" />
                            <Label text="{I18N>/DEVELOPMENT_START_DATE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/2/new_base_price_start_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <!-- market_code 2(DOMESTIC) 끝 -->

                    <!-- market_code 1(EXPORT) 시작 -->
                    <table:Column headerSpan="9" hAlign="Center" width="8rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/PUR_PRICE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/1/current_price'},
                                    {path: 'dialogModel>prices/1/current_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/PUR_CURRENCY}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>prices/1/current_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/PUR_START_DATE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/1/current_price_start_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/CURRENT_BASE_PRICE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/1/base_price'},
                                    {path: 'dialogModel>prices/1/base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/CURRENT_CURRENCY}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>prices/1/base_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/CURRENT_BASE_DATE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/1/base_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/DEVELOPMENT_BASE_PRICE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                parts: [
                                    {path: 'dialogModel>prices/1/new_base_price'},
                                    {path: 'dialogModel>prices/1/new_base_price_currency_code'}
                                ],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {
                                    showMeasure: false
                                }
                            }" 
                            textAlign="End" width="100%" />
                        </table:template>
                    </table:Column>
                    <table:Column width="6rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/DEVELOPMENT_CURRENCY}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{dialogModel>prices/1/new_base_price_currency_code}" />
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem" hAlign="Center" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <table:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" />
                            <Label text="{I18N>/DEVELOPMENT_START_DATE}" textAlign="Center" />
                        </table:multiLabels>
                        <table:template>
                            <Text text="{
                                path: 'dialogModel>prices/1/new_base_price_start_date',
                                formatter: '.dateFormatter.toDateString'}" />
                        </table:template>
                    </table:Column>
                    <!-- market_code 1(EXPORT) 끝 -->

                    <table:Column width="20rem" >
                        <Label text="{I18N>/DESCRIPTION}" textAlign="Center" width="100%" />
                        <table:template>
                            <Text text="" tooltip="" />
                        </table:template>
                    </table:Column>
                    <table:Column width="20rem">
                        <Label text="{I18N>/SPEC_DESC}" textAlign="Center" width="100%" />
                        <table:template>
                            <Text text="" tooltip="" />
                        </table:template>
                    </table:Column>
                </table:columns>
            </table:Table>
		</content>
        <beginButton>
            <Button text="{I18N>/CANCEL}" press=".onFamilyMaterialDialogClose" />
        </beginButton>
	</Dialog>
</core:FragmentDefinition>