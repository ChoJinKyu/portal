<mvc:View controllerName="dp.vi.basePriceProgressStatusMgt.controller.BasePriceList"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:f="sap.f"
  xmlns:core="sap.ui.core"
  xmlns:form="sap.ui.layout.form"
  xmlns:t="sap.ui.table"
  xmlns:layout="sap.ui.layout"
  xmlns:tnt="sap.tnt"
  xmlns:lib-m="ext.lib.control.m"
  displayBlock="true"
  height="100%">
    <f:DynamicPage
        headerExpanded="true"
        fitContent="true"
        toggleHeaderOnTitleClick="true">
        <f:title>
            <f:DynamicPageTitle>
            <f:heading>
                <Title text="{I18N>/BASE_PRICE_PROGRESS_STATUS}" />
            </f:heading>
            <f:actions>
                <Button text="{I18N>/SEARCH}" type="Emphasized" press=".onSearch"/>
            </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <!--Filterbar 시작-->
                <form:SimpleForm
                    editable="true"
                    layout="ResponsiveGridLayout"
                    adjustLabelSpan="false">
                    <form:content>
                        <!-- Type 시작 -->
                        <VBox>
                            <Label text="{I18N>/APPROVAL_TYPE_CODE}"></Label>
                            <MultiComboBox
                                width="100%"
                                selectedKeys="{filterModel>/type}"
                                placeholder="{I18N>/ALL}"
                                items="{filterModel>/type_list}">
                                <items>
                                <core:Item key="{filterModel>code}" text="{filterModel>code_name}" />
                                </items>
                            </MultiComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Type 끝 -->

                        <!-- Company 시작 -->
                        <VBox>
                            <Label text="{I18N>/COMPANY}"></Label>
                            <ComboBox width="100%" 
                                selectedKey="{filterModel>/company_code}" 
                                items="{rootModel>/company}"
                                change=".onChangeCompany">
                                <items>
                                    <core:Item key="{rootModel>company_code}" text="[{rootModel>company_code}] {rootModel>company_name}" />
                                </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Company 끝 -->

                        <!-- Plant 시작 -->
                        <VBox>
                            <Label text="{I18N>/VI_APPROVE_ORG_CODE}"></Label>
                            <ComboBox width="100%" 
                                selectedKey="{filterModel>/org_code}" 
                                items="{filterModel>/selectedPurOrg}">
                                <items>
                                    <core:Item key="{filterModel>org_code}" text="[{filterModel>org_code}]{filterModel>org_name}" />
                                </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Plant 끝 -->

                        <!-- Material Code 시작 -->
                        <VBox>
                            <Label text="{I18N>/MATERIAL_CODE}" />
                            <MultiInput
                                showValueHelp="true"
                                tokenChange=".onChangeMaterialCode"
                                valueHelpRequest=".onMaterialMasterMultiDialogPress">
                            </MultiInput>
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Material Code 끝 -->

                        <!-- Approval Number 시작 -->
                        <VBox>
                            <Label text="{I18N>/APPROVAL_NUMBER}"></Label>
                            <Input value="{filterModel>/approvalNumber}" change=".onSearch" />
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Approval Number 끝 -->

                        <!-- Requset Date 시작 -->
                        <VBox>
                            <Label text="{I18N>/REQUEST_DATE}"></Label>
                            <DateRangeSelection
                                dateValue="{filterModel>/dateValue}"
                                secondDateValue="{filterModel>/secondDateValue}" />
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Requset Date 끝 -->

                        <!-- Requset By 시작 -->
                        <VBox height="56px">
                            <Label text="{I18N>/REQUESTOR}"></Label>
                            <MultiInput id="multiInputWithEmployeeValueHelp"
                                placeholder="Choose employees from the ValueHelp"
                                showValueHelp="true" valueHelpRequest=".onMultiInputWithEmployeeValuePress">
                            </MultiInput>
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Requset By 끝 -->

                        <!-- Status 시작 -->
                        <!-- <VBox>
                            <Label text="{I18N>/STATUS}"></Label>
                            <SegmentedButton id="searchStatusS" selectedKey="{filterModel>/status}" class="sapUiSmallMarginBottom" width="100%" selectionChange="onStatusSelectionChange" >
                                <items>
                                    <SegmentedButtonItem text="{I18N>/ALL}" key="" />
                                    <SegmentedButtonItem text="{rootModel>/processList/0/code_name}" key="{rootModel>/processList/0/code}" width="4.7rem" />
                                    <SegmentedButtonItem text="{rootModel>/processList/1/code_name}" key="{rootModel>/processList/1/code}" width="5.2rem" />
                                    <SegmentedButtonItem text="{rootModel>/processList/2/code_name}" key="{rootModel>/processList/2/code}" width="4.8rem" />
                                    <SegmentedButtonItem text="{rootModel>/processList/3/code_name}" key="{rootModel>/processList/3/code}" width="4.5rem" />
                                </items>
                            </SegmentedButton>
                            <layoutData>
                                <layout:GridData span="XL4 L4 M6 S12" />
                            </layoutData>
                        </VBox> -->
                        <VBox>
                            <Label text="{I18N>/STATUS} "></Label>
                            <MultiComboBox
                                width="100%"
                                selectedKeys="{filterModel>/status}"
                                placeholder="{I18N>/ALL}"
                                items="{rootModel>/processList}">
                                <items>
                                <core:Item key="{rootModel>code}" text="{rootModel>code_name}" />
                                </items>
                            </MultiComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L4 M6 S12" />
                            </layoutData>
                        </VBox>
                        <!-- Status 끝 -->
                    </form:content>
                </form:SimpleForm>
                <!--Filterbar 끝-->
            </f:DynamicPageHeader>
        </f:header>
        
        <f:content>
            <!--Base Price List 시작-->
            <t:Table id="listTable"
                selectionMode="None"
                rows="{listModel>/}"
                cellClick=".onGoDetail"
                fixedColumnCount="4"
                visibleRowCountMode="Auto">
                <t:extension>
                    <OverflowToolbar class="sapFDynamicPageAlignContent">
                        <Title text="{I18N>/BASE_PRICE_LIST} ({= ${listModel>/}.length || 0})" level="H2"/>
                        <ToolbarSpacer />
                        <!-- <Button icon="sap-icon://excel-attachment" />
                        <Button icon="sap-icon://group-2" />
                        <Button icon="sap-icon://action-settings" /> -->
                    </OverflowToolbar>
                </t:extension>
                <t:columns>
                    <t:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/APPROVAL_TYPE_CODE}" textAlign="Center" />
                        <t:template>
                            <Text text="{listModel>approval_type_code_nm}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="10rem">
                        <Label text="{I18N>/APPROVAL_NUMBER}" textAlign="Center" />
                        <t:template>
                            <Text text="{listModel>approval_number}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="18rem">
                        <Label text="{I18N>/COMPANY}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{listModel>company_name}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="12rem">
                        <Label text="{I18N>/VI_APPROVE_ORG_CODE}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{listModel>org_name}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="8rem">
                        <Label text="{I18N>/MATERIAL_CODE}" />
                        <t:template>
                            <Text text="{listModel>material_code}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="16rem">
                        <Label text="{I18N>/DESCRIPTION}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{listModel>material_desc}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="20rem">
                        <Label text="{I18N>/SPEC_DESC}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{listModel>material_spec}" />
                        </t:template>
                    </t:Column>
                    <t:Column headerSpan="2" width="7rem" visible="{= ${rootModel>/config/DP_VI_SUPPLY_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/SUPPLIER}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/CODE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>supplier_code}" textAlign="Center" width="100%" />
                        </t:template>
                    </t:Column>
                    <t:Column width="15rem" visible="{= ${rootModel>/config/DP_VI_SUPPLY_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/SUPPLIER}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/NAME}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>supplier_local_name}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{
                                    path: 'listModel>base_date',
                                    formatter: '.dateFormatter.toDateString'}" textAlign="Center" width="100%" />
                        </t:template>
                        </t:Column>
                    <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{
                                    parts: [
                                        {path: 'listModel>prices/0/new_base_price'},
                                        {path: 'rootModel>/number/symbol'},
                                        {path: 'rootModel>/number/currency'}
                                    ],
                                    formatter: '.numberFormatter.toNumberString'
                                }" textAlign="Right" width="100%" />
                        </t:template>
                        </t:Column>
                    <t:Column width="6rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE0_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <Label text="{I18N>/CURRENCY_CODE}" textAlign="Center" width="100%" />
                        <t:template>
                            <Text text="{listModel>prices/0/new_base_price_currency_code}" textAlign="Center" width="100%" />
                        </t:template>
                    </t:Column>
                    <t:Column headerSpan="3" width="7rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{
                                    path: 'listModel>base_date',
                                    formatter: '.dateFormatter.toDateString'}" textAlign="Center" width="100%" />
                        </t:template>
                        </t:Column>
                    <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>prices/0/new_base_price}" textAlign="Right" width="100%" />
                        </t:template>
                        </t:Column>
                    <t:Column width="6rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE1_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/CURRENCY_CODE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>prices/0/new_base_price_currency_code}" textAlign="Center" width="100%" />
                        </t:template>
                    </t:Column>
                    <t:Column headerSpan="3" width="7rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{
                                    path: 'listModel>base_date',
                                    formatter: '.dateFormatter.toDateString'}" textAlign="Center" width="100%" />
                        </t:template>
                    </t:Column>
                    <t:Column width="10rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                                <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>prices/1/new_base_price}" textAlign="Right" width="100%" />
                        </t:template>
                    </t:Column>
                    <t:Column width="6rem" visible="{= ${rootModel>/config/DP_VI_MARKETCODE2_DISPLAY_FLAG} === 'Y' ? true : false}">
                        <t:multiLabels>
                            <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/CURRENCY_CODE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>prices/1/new_base_price_currency_code}" textAlign="Center" width="100%" />
                        </t:template>
                    </t:Column>
                    <!-- <t:Column hAlign="Center" width="12rem">
                        <t:multiLabels>
                            <Label text="{I18N>/BASE_PRICE_TYPE}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>supplier_name}" />
                        </t:template>
                    </t:Column> -->
                    <!-- <t:Column headerSpan="4" width="6rem">
                        <t:multiLabels>
                            <Label text="{I18N>/FAMILY_MATERIAL_CODE}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/BUSINESS_DIVISION}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>div}" textAlign="Center" width="100%" />
                        </t:template>
                    </t:Column> -->
                    <t:Column headerSpan="3" hAlign="Center" width="12rem">
                        <t:multiLabels>
                            <Label text="{I18N>/FAMILY_MATERIAL_CODE}"/>
                            <Label text="{I18N>/MATERIAL_CODE}" /> 
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>part_no}" />
                        </t:template>
                        </t:Column>
                    <t:Column hAlign="Center" width="8rem">
                        <t:multiLabels>
                            <Label text="{I18N>/FAMILY_MATERIAL_CODE}"/>
                            <Label text="{I18N>/SUPPLIER_CODE}" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>part_no}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="12rem">
                        <t:multiLabels>
                            <Label text="{I18N>/FAMILY_MATERIAL_CODE}" textAlign="Center" width="100%" />
                            <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" width="100%" />
                        </t:multiLabels>
                        <t:template>
                            <Text text="{listModel>supplier_name}" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center"  width="7rem">
                        <Label text="{I18N>/REQUEST_DATE}" />
                        <t:template>
                            <Text text="{
                                    path: 'listModel>request_date',
                                    formatter: '.onChangeDateFormat'}" textAlign="Center" width="100%" />       
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center"  width="8rem">
                        <Label text="{I18N>/REQUESTOR}" />
                        <t:template>
                            <Text text="{listModel>requestor_local_nm} {listModel>requestor_job_title}" 
                                tooltip="{listModel>requestor_local_nm} {listModel>requestor_job_title}"  />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="12rem">
                        <Label text="{I18N>/STATUS}" />
                        <t:template>
                            <tnt:InfoLabel 
                                text="{listModel>approve_status_code_nm}" 
                                colorScheme="{
                                    path: 'listModel>approve_status_code',
                                    formatter: '.onStatusColor'
                                }" />
                        </t:template>
                    </t:Column>
                    <t:Column hAlign="Center" width="2rem">
                        <Label text="" />
                        <t:template>
                            <ObjectStatus icon="sap-icon://feeder-arrow" />
                        </t:template>
                    </t:Column>
                    <!-- <t:Column hAlign="Center"  width="2rem">
                        <Label text="{I18N>/HQ_NPD_BASE_PRICE}" />
                        <Label text="" />
                        <t:template>
                            <Link text=">" press=".onGoDetail" />
                        </t:template>
                    </t:Column> -->
                </t:columns>
            </t:Table>
            <!--Base Price List 끝-->
        </f:content>
    </f:DynamicPage>
</mvc:View>
