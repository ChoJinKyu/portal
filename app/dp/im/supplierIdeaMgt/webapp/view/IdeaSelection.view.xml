<mvc:View controllerName="dp.im.supplierIdeaMgt.controller.IdeaSelection" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
    xmlns:form="sap.ui.layout.form"
    xmlns:sc="sap.suite.ui.commons"
	xmlns:core="sap.ui.core"
    xmlns:richtexteditor="sap.ui.richtexteditor"
	height="100%">

	<uxap:ObjectPageLayout id="page"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="false">
		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
                    <HBox alignItems="End">
                        <OverflowToolbarButton id="pageNavBackButton" type="Transparent" icon="sap-icon://nav-back" tooltip="back to the list" press=".onPageNavBackButtonPress" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
					    <Title text="{I18N>/IDEA} {I18N>/DETAIL}" wrapping="true" />
                    </HBox>
				</uxap:expandedHeading>
				<uxap:snappedHeading>
					    <Title text="{I18N>/IDEA} {I18N>/DETAIL}" wrapping="true" />
				</uxap:snappedHeading>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap" visible="true" width="100%">
                
                <layout:Grid
                        containerQuery="true"
                        defaultIndent="XL1 L1 M1 S1"
                        defaultSpan="XL3 L3 M3 S3">
                    <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                        <ObjectStatus
                            title="{I18N>/IDEA} {I18N>/SEQUENCE} "
                            text="{master>/idea_number}"/>
                        <ObjectStatus
                            title="{I18N>/SUPPLIER} "
                            text="{master>/supplier_local_name}"/>
                        <ObjectStatus
                            id="createUser"         
                            title="{I18N>/IDEA} {I18N>/WRITER} "
                            text="{master>/idea_create_user_local_name}"/>
                        <ObjectStatus
                            id="ideaDate"         
                            title="{I18N>/IDEA} {I18N>/WRITE_DATE} "
                            text="{
                                    path: 'master>/idea_date',
                                    type: 'sap.ui.model.type.Date',
                                    formatOptions: {
                                    pattern: 'yyyy/MM/dd'
                                    }
                                }"/>
                    </layout:VerticalLayout>
                    <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                        <ObjectStatus
                            title="{I18N>/PROGRESS}{I18N>/STATUS}"
                            text="{master>/idea_progress_status_name}"/>
                    </layout:VerticalLayout>
                    <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                        <Label text="{I18N>/PROGRESS}{I18N>/STATUS} : " labelFor="searchIdeaManager"></Label>
                        <sc:MicroProcessFlow>
                            <sc:content>
                                <sc:MicroProcessFlowItem icon="sap-icon://circle-task" stepWidth="3em"/>
                                <sc:MicroProcessFlowItem icon="sap-icon://circle-task" stepWidth="3em"/>
                                <sc:MicroProcessFlowItem icon="sap-icon://circle-task-2" stepWidth="3em"/>
                                <sc:MicroProcessFlowItem icon="sap-icon://circle-task" stepWidth="3em"/>
                                <sc:MicroProcessFlowItem icon="sap-icon://circle-task" stepWidth="3em"/>
                                <sc:MicroProcessFlowItem icon="sap-icon://circle-task" stepWidth="3em"/>
                            </sc:content>
                        </sc:MicroProcessFlow>
                        <layout:HorizontalLayout>
                            <Text text="PR" width="4em" textAlign="Center"/>
                            <Text text="Budget" width="4em" textAlign="Center"/>
                            <Text text="RFQ" width="5em" textAlign="Center"/>
                            <Text text="Mold Spec" width="5em" textAlign="Center"/>
                            <Text text="Purchase Contract" width="5em" textAlign="Center"/>
                            <Text text="PO" width="5em" textAlign="Center"/>
                        </layout:HorizontalLayout>
                    </layout:VerticalLayout>
                </layout:Grid>
                
                
                
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections>
			<uxap:ObjectPageSection id="pageSectionMain" titleUppercase="false" title="{I18N>/BASIC_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection1">
                    <form:SimpleForm id="midObjectForm" editable="{midObjectViewModel>/isEditMode}">
                        <VBox alignContent="Center" alignItems="Stretch" class="sapUiSmallMarginBegin">
                            <layout:Grid containerQuery="true" defaultSpan="XL2 L4">
                                <VBox>
                                    <Label text="{I18N>/COMPANY}: " labelFor="ideaCompany"  required="true"></Label>
                                    <Input id="hidIdeaNumber"  visible="false" value="{details>/idea_number}"/>
                                    <ComboBox id="ideaCompany" width="250em" editable="false"
                                        selectedKey="{details>/company_code}"
                                        items="{
                                            path: 'org>/Company',
                                            sorter: { path: 'company_code' }
                                        }">
                                        <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                    </ComboBox>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/BUSINESS_UNIT}: " labelFor="ideaBizUnit" ></Label>
                                    <ComboBox id="ideaBizUnit" width="250em" editable="true" visible="{viewModel>/editMode}"
                                        selectedKey="{details>/bizunit_code}"
                                        items="{
                                            path: 'org>/Unit',
                                            sorter: { path: 'bizunit_code' }
                                        }">
                                        <core:Item key="{org>bizunit_code}" text="[{org>bizunit_code}] {org>bizunit_name}" />
                                    </ComboBox>
                                    <Text id="ideaBizUnitTxt" width="80%" textAlign="Left"  text="{master>bizunit_name}" visible="{viewModel>/showMode}"/>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/PRODUCT_GROUP}: " labelFor="ideaGroupCode" required="true" ></Label>
                                    <ComboBox id="ideaGroupCode" width="250em" editable="true" visible="{viewModel>/editMode}"
                                        selectedKey="{details>/idea_product_group_code}"
                                        items="{
                                        path: 'common>/Code',
                                        parameters: {
                                            tenant_id : 'L2100'
                                            , group_code : 'DP_IM_IDEA_PRODUCT_GROUP'
                                        },
                                        filters : [{path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                                {path: 'group_code', operator: 'EQ', value1: 'DP_IM_IDEA_PRODUCT_GROUP'}],
                                        sorter: { path: 'sort_no'}
                                        }">
                                        <core:Item key="{common>code}" text="[{common>code}] {common>code_name}" />
                                    </ComboBox>
                                    <Text id="ideaGroupCodeTxt" width="80%" textAlign="Left"  text="{master>/idea_product_group_name}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>
                            <layout:Grid containerQuery="true" defaultSpan="L12 M12 S12">
                                <VBox>
                                    <Label
                                        text="{I18N>/IDEA} {I18N>/NAME}: "
                                        labelFor="ideaName" required="true">
                                    </Label>
                                    <Input id="ideaName"  width="80%"  visible="{viewModel>/editMode}"
                                        placeholder="{I18N>/IDEA} {I18N>/NAME}" value="{details>/idea_title}"/>
                                    <Text id="ideaNameTxt" width="80%" textAlign="Left"  text="{master>/idea_title}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>
                            <layout:Grid containerQuery="true" defaultSpan="XL2 L4">
                                <VBox>
                                    <Label text="{I18N>/IDEA} {I18N>/TYPE}: " labelFor="ideaType"  required="true"></Label>
                                    <ComboBox id="ideaType" width="250em" editable="true" visible="{viewModel>/editMode}"
                                        selectedKey="{details>/idea_type_code}"
                                        items="{
                                        path: 'common>/Code',
                                        parameters: {
                                            tenant_id : 'L2100'
                                            , group_code : 'DP_IM_IDEA_TYPE'
                                        },
                                        filters : [{path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                                {path: 'group_code', operator: 'EQ', value1: 'DP_IM_IDEA_TYPE'}],
                                        sorter: { path: 'sort_no'}
                                        }">
                                        <core:Item key="{common>code}" text="[{common>code}] {common>code_name}" />
                                    </ComboBox>
                                    <Text id="ideaTypeTxt" width="80%" textAlign="Left"  text="{master>/idea_type_name}" visible="{viewModel>/showMode}"/>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/IDEA} {I18N>/PERIOD}: " labelFor="ideaPeriod"  required="true"></Label>
                                    <ComboBox id="ideaPeriod" width="250em" editable="true" visible="{viewModel>/editMode}"
                                        selectedKey="{details>/idea_period_code}"
                                        items="{
                                        path: 'common>/Code',
                                        parameters: {
                                            tenant_id : 'L2100'
                                            , group_code : 'DP_IM_IDEA_PERIOD'
                                        },
                                        filters : [{path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                                {path: 'group_code', operator: 'EQ', value1: 'DP_IM_IDEA_PERIOD'}],
                                        sorter: { path: 'sort_no'}
                                        }">
                                        <core:Item key="{common>code}" text="[{common>code}] {common>code_name}" />
                                    </ComboBox>
                                    <Text id="ideaPeriodTxt" width="80%" textAlign="Left"  text="{master>/idea_period_name}" visible="{viewModel>/showMode}"/>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/IDEA} {I18N>/MANAGER} : " labelFor="ideaManager" required="true"></Label>
                                    <Input id="ideaManager"  width="80%"  visible="{viewModel>/editMode}" placeholder="All"
                                        showValueHelp="true" valueHelpRequest=".onIdeaManagerDialogPress" 
                                                        liveChange=".onNameChk" value="{details>/idea_manager_local_name}" >
                                    </Input>
                                    <Input id="ideaManagerId"  visible="false" value="{details>/idea_manager_empno}"  ></Input>
                                    <Text id="ideaManagerTxt" width="80%" textAlign="Left"  text="{master>/idea_manager_local_name}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>
                            <layout:Grid containerQuery="true" defaultSpan="L12 M12 S12">
                                <VBox>
                                    <Label
                                        text="{I18N>/PART} {I18N>/NAME}: "
                                        labelFor="partName">
                                    </Label>
                                    <Input id="partName"  width="80%"   visible="{viewModel>/editMode}"
                                        placeholder="{I18N>/PART} {I18N>/NAME}" value="{details>/idea_part_desc}"/>
                                    <Text id="partNameTxt" width="80%" textAlign="Left"  text="{master>/idea_part_desc}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>
                            <layout:Grid containerQuery="true" defaultSpan="L12 M12 S12">
                                <VBox>
                                    <Label
                                        text="{I18N>/IDEA} {I18N>/CONTENTS}({I18N>/ASIS}): "
                                        labelFor="ideaContentsAsis">
                                    </Label>
                                    <Input id="ideaContentsAsis"  width="80%"  visible="{viewModel>/editMode}"
                                        placeholder="{I18N>/IDEA} {I18N>/CONTENTS}" value="{details>/current_proposal_contents}"/>
                                    <Text id="ideaContentsAsisTxt" width="80%" textAlign="Left"  text="{master>/current_proposal_contents}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>
                            <layout:Grid containerQuery="true" defaultSpan="L12 M12 S12">
                                <VBox>
                                    <Label
                                        text="{I18N>/IDEA} {I18N>/CONTENTS}({I18N>/TOBE}): "
                                        labelFor="ideaContentsTobe">
                                    </Label>
                                    <Input id="ideaContentsTobe"  width="80%"  visible="{viewModel>/editMode}"
                                        placeholder="{I18N>/IDEA} {I18N>/CONTENTS}" value="{details>/change_proposal_contents}"/>
                                    <Text id="ideaContentsTobeTxt" width="80%" textAlign="Left"  text="{master>/change_proposal_contents}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>

                      
                        </VBox>
                        </form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<uxap:ObjectPageSection id="pageSectionMain3" titleUppercase="false" title="{I18N>/BASIC_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection3" >
                    <form:SimpleForm id="midObjectForm3" editable="{midObjectViewModel>/isEditMode}">
                        <core:Title text="정량적" />
                        <VBox alignContent="Center" alignItems="Stretch" class="sapUiSmallMarginBegin">
                            <layout:Grid containerQuery="true" defaultSpan="XL2 L4">
                                <VBox>
                                    <VBox>
                                        <Label text="{I18N>/REPRESENTATION} Part No: " labelFor="partNo" />
                                        <Input id="repPartNo"  width="80%"   visible="{viewModel>/editMode}"
                                            placeholder="{I18N>/REPRESENTATION} Part No" value="{details>/material_code}"/>
                                        <Text id="repPartNoTxt" width="80%" textAlign="Left"  text="{details>/material_code}" visible="{viewModel>/showMode}"/>
                                    </VBox>
                                    <VBox>
                                        <Label text="VI {I18N>/AMOUNT} (KRW): " labelFor="partNo" />
                                        <Input id="viAmount"  width="80%"   visible="{viewModel>/editMode}"
                                            placeholder="0" value="{details>/vi_amount}" textAlign="Right" />
                                        <Text id="viAmountTxt" width="80%" textAlign="Right"  text="{details>/vi_amount}" visible="{viewModel>/showMode}"/>
                                    </VBox>
                                    <VBox>
                                        <Label text="{I18N>/MM} {I18N>/MTLMOB}(EA): " labelFor="partNo" />
                                        <Input id="monthMtlmob"  width="80%"   visible="{viewModel>/editMode}"
                                            placeholder="0" value="{details>/monthly_mtlmob_quantity}" textAlign="Right"/>
                                        <Text id="monthMtlmobTxt" width="80%" textAlign="Right"  text="{details>/monthly_mtlmob_quantity}" visible="{viewModel>/showMode}"/>
                                    </VBox>
                                    <VBox>
                                        <Label text="{I18N>/MM} impact (KRW): " labelFor="partNo" />
                                        <Input id="mmImpct"  width="80%"   visible="{viewModel>/editMode}"
                                            placeholder="0" value="{details>/monthly_purchasing_amount}" textAlign="Right"/>
                                        <Text id="mmImpctTxt" width="80%" textAlign="Right"  text="{details>/monthly_purchasing_amount}" visible="{viewModel>/showMode}"/>
                                    </VBox>
                                    <VBox>
                                        <Label text="{I18N>/ANNUAL} impact (KRW): " labelFor="partNo" />
                                        <Input id="annualImpact"  width="80%"   visible="{viewModel>/editMode}"
                                            placeholder="0" value="{details>/annual_purchasing_amount}" textAlign="Right"/>
                                        <Text id="annualImpactTxt" width="80%" textAlign="Right"  text="{details>/annual_purchasing_amount}" visible="{viewModel>/showMode}"/>
                                    </VBox>
                                </VBox>
                            </layout:Grid>                      
                        </VBox>
                        <core:Title text="정성적" />
                        <VBox alignContent="Center" alignItems="Stretch" class="sapUiSmallMarginBegin">
                            <layout:Grid containerQuery="true" defaultSpan="XL2 L4">
                                <VBox>
                                    <Input id="performCnt"  width="80%"   visible="{viewModel>/editMode}"
                                        placeholder="{I18N>/CONTENTS}" value="{details>/perform_contents}"/>
                                    <Text id="performCntTxt" width="80%" textAlign="Left"  text="{details>/perform_contents}" visible="{viewModel>/showMode}"/>
                                </VBox>
                            </layout:Grid>                      
                        </VBox>
                        </form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>


            <!-- 첨부파일 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/Attachments}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- File Upload 시작-->
                            <UploadCollection
                                id="UploadCollection"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="true"
                                sameFilenameAllowed="true"
                                instantUpload="false"
                                noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                change="onChange"
                                fileDeleted="onFileDeleted"
                                filenameLengthExceed="onFilenameLengthExceed"
                                fileSizeExceed="onFileSizeExceed"
                                typeMissmatch="onTypeMissmatch"
                                uploadComplete="onUploadComplete"
                                beforeUploadStarts="onBeforeUploadStarts" />
                            <!-- File Upload 끝-->
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- 첨부파일 끝 -->


            <!-- 결재라인 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="결재라인">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- Approval & Reference 시작 -->
                            <HBox>
        
                            </HBox>
                            <!-- Approval & Reference 끝 -->
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- 결재라인 끝 -->

		</uxap:sections>
		
		<uxap:footer>
			<OverflowToolbar>
                <Button
                    icon="sap-icon://alert"
                    type="Emphasized"
                    text="{= ${message>/}.length }"
                    visible="{= ${message>/}.length > 0 }"
                    ariaHasPopup="Dialog"
                    press=".onMessagePopoverPress" />
				<ToolbarSpacer />
                
                <Button id="pageEditButton" type="Transparent" text="{I18N>/EDIT}" press=".onPageEditButtonPress" />
				<Button id="pageSaveButton" type="Transparent" text="{I18N>/TEMP_SAVE}" press=".onPageSaveButtonPress('D')" />
				<Button id="pageCancelButton" type="Transparent" text="{I18N>/CANCEL}" press=".onPageCancelButtonPress"/>
				<Button id="pageListButton" type="Transparent" text="{I18N>/LIST}" press=".onPageListButtonPress"/>
                <Button id="pageSubmitButton" type="Emphasized" text="{I18N>/SUBMIT}" press=".onPageSaveButtonPress('R')" />
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>