<mvc:View
    controllerName="dp.pd.partCategoryMgt.controller.MainList"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core"     
    xmlns:t="sap.ui.table"
    xmlns:lib-m="ext.lib.control.m"
    height="100%">

    <f:DynamicPage
        id="page"
        headerExpanded="{mainListView>/headerExpanded}"
        toggleHeaderOnTitleClick="true">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{I18N>/PART} {I18N>/CATEGORY} {I18N>/MANAGEMENT}" />
                </f:heading>
                <f:navigationActions>
                    <Button icon="sap-icon://unfavorite" type="Transparent" />
                </f:navigationActions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <form:SimpleForm
                    id="pageSearchForm"
                    maxContainerCols="2"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    adjustLabelSpan="false"
                    labelSpanL="4"
                    labelSpanM="4"
                    emptySpanL="0"
                    emptySpanM="0"
                    columnsL="2"
                    columnsM="2">
                    <form:content>
                        <VBox>
                            <Label text="{I18N>/CATEGORY_GROUP}: "></Label>
                            <ComboBox
                                id="searchCategoryCombo"
                                width="100%"
                                selectedKey=""
                                items="{
                                    path: 'util>/Code',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2101'},
                                        {path: 'group_code', operator: 'EQ', value1: 'DP_PD_CATEGORY_GROUP'}
                                    ]
                                }">
                                <items>
                                    <core:Item key="{util>code}" text="[{util>code}] {util>code_name}" />
                                </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="{I18N>/STATUS}:" labelFor="searchActiveFlag"></Label>
                            <SegmentedButton id="searchActiveFlag" width="100%">
                                <items>
                                    <SegmentedButtonItem text="All" width="3em"/>
                                    <SegmentedButtonItem text="Active" width="5em" key="Active"/>
                                    <SegmentedButtonItem text="Inactive" width="5em" key="Inactive"/>
                                </items>
                            </SegmentedButton>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        
                        <FlexBox alignItems="End" justifyContent="End">
                            <Button id="btn_search" text="{I18N>/SEARCH}" type="Emphasized" press=".onSearch"/>
                            <layoutData>
                                <layout:GridData span="XL12 L12 M12 S12" />
                            </layoutData>
                        </FlexBox>
                    </form:content>
                </form:SimpleForm>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox>
                <t:TreeTable
                    id="treeTable"
                    toggleOpenState="toggleOpenState"
                    visibleRowCountMode="Auto"
                    rowSelectionChange=".onRowSelectionChange"
                    selectionMode="Single"
                    selectionBehavior="Row"
                    enableColumnReordering="false"
                    enableSelectAll="false"
                    minAutoRowCount="18"
                    rows="{
                        path : 'tree>/pdPartCategoryView',
                        parameters : {
                            arrayNames: ['nodes'],
                            numberOfExpandedLevels: 3
                        }
                    }">
                    <t:extension>
                        <OverflowToolbar>
                            <Title id="title" text="{I18N>/PART} {I18N>/CATEGORY} {I18N>/LIST}" level="H2"/> 
                            <ToolbarSpacer/>
                            <!-- <Button id="mainTableCreate2Button" text="Creation Request" type="Transparent" press=".onMainTableCreate2ButtonPress" enabled="{= ${master>/indices} === 2 ? ${sm>/screen} === 'M' ? true : false : false}"  /> -->
                            <Button id="mainTableCreate0Button" text="{I18N>/CREATE_SAME_LEVEL}" type="Transparent" press=".onMainTableCreate0ButtonPress" enabled="{= ${master>/indices} === 0 ? ${sm>/screen} === 'M' ? true : false : false}"  />
                            <Button id="mainTableCreate1Button" text="{I18N>/CREATE_LOWER_LEVEL}" type="Transparent" press=".onMainTableCreate1ButtonPress" enabled="{= ${master>/indices} === 1 ? ${master>/level} === 0 ? ${sm>/screen} === 'M' ? true : false : false : false}" />
                            <!-- <Button id="mainTableDeleteButton" text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" enabled="{= ${master>/indices} > 0 ? ${sm>/screen} === 'M' ? true : false : false}"/> -->
                            <!-- <Button id="mainTableSaveButton" text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" enabled="{= ${master>/indices} > 0 ? ${sm>/screen} === 'M' ? true : false : false}"/> -->
                            <ToolbarSeparator/>
                            <Button id="mainTableButtonAllOpen" text="{I18N>/EXPAND}" type="Transparent" press=".onMainTableexpandAll" enabled="{=${sm>/screen} === 'M' ? true : false}"  />
                            <Button id="mainTableButtonAllClose" text="{I18N>/COLLAPSE}" type="Transparent" press=".onMainTablecollapseAll" enabled="{=${sm>/screen} === 'M' ? true : false}"  />
                            <!-- <ToolbarSeparator/> -->
                        </OverflowToolbar>
                    </t:extension>
                    
                    <t:columns>
                        <t:Column label="{I18N>/PART} {I18N>/CATEGORY}" hAlign="Left">    
                            <t:template>
                                <Text text="{tree>category_code}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        <t:Column label="{I18N>/SORT}" width="5%" hAlign="Right">    
                            <t:template>
                                <Text text="{tree>sequence}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        
                        <t:Column label="{I18N>/CATEGORY_NAME}" hAlign="Left">    
                            <t:template>
                                <Text text="{tree>category_name}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        <t:Column label="{I18N>/CATEGORY_GROUP}" width="10%" hAlign="Center">    
                            <t:template>
                                <Text text="{tree>category_group_code}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        <t:Column label="{I18N>/CATEGORY_GROUP} {I18N>/NAME}" hAlign="Left">    
                            <t:template>
                                <Text text="{tree>category_group_name}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        <t:Column label="{I18N>/STATUS}" hAlign="Center">    
                            <t:template>
                                <Text text="{= ${tree>active_flag} === true ? 'Active' : 'Inactive'}"/>
                            </t:template>
                        </t:Column>
                        <t:Column label="{I18N>/UPDATE_USER_ID}" hAlign="Center">    
                            <t:template>
                                <Text text="{tree>update_user_id}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        <t:Column label="{I18N>/LOCAL_UPDATE_DTM}" hAlign="Center">    
                            <t:template>
                                <Text text="{tree>local_update_dtm}" wrapping="false" />
                            </t:template>
                        </t:Column>
                        <t:Column label="" width="2rem" >
                            <t:template>
                                <ObjectStatus icon="sap-icon://feeder-arrow" />
                            </t:template>
                        </t:Column>
                    </t:columns>
                    
                </t:TreeTable>
            </VBox>
    
        </f:content>
    </f:DynamicPage>
</mvc:View>