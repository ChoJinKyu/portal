<mvc:View controllerName="dp.pd.productActivityMgt.controller.MidObject" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
    xmlns:t="sap.ui.table"
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
    xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
    xmlns:lib-m="ext.lib.control.m"
	height="100%">

	<uxap:ObjectPageLayout id="page"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="true">
		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
                <uxap:heading>
                    <HBox alignItems="End">
                        <OverflowToolbarButton id="pageNavBackButton" type="Transparent" icon="sap-icon://nav-back" tooltip="back to the list" press=".onPageNavBackButtonPress" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                        <Title text="{I18N>/PRODUCT_ACTIVITY} {I18N>/MANAGEMENT} {I18N>/DETAIL}" wrapping="true" class="" />
                    </HBox>
                </uxap:heading>	

				<uxap:expandedHeading>
					<Title text="{I18N>/PRODUCT_ACTIVITY_DETAIL} {I18N>/MANAGEMENT}" wrapping="true" />
				</uxap:expandedHeading>
				<uxap:snappedHeading>
					<Title text="{I18N>/PRODUCT_ACTIVITY_DETAIL} {I18N>/MANAGEMENT}" wrapping="true" />
				</uxap:snappedHeading>
				<uxap:expandedContent>
				</uxap:expandedContent>
				<uxap:snappedContent>
				</uxap:snappedContent>
				<uxap:snappedTitleOnMobile>
					<Title text="{I18N>/PRODUCT_ACTIVITY_DETAIL} {I18N>/MANAGEMENT}" />
				</uxap:snappedTitleOnMobile>
                <uxap:navigationActions>
					<OverflowToolbarButton id="pageEnterFullScreenButton" type="Transparent" icon="sap-icon://full-screen" press="onPageEnterFullScreenButtonPress" tooltip="Enter Full Screen Mode" visible="{= ${fcl>/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
					<OverflowToolbarButton id="pageExitFullScreenButton" type="Transparent" icon="sap-icon://exit-full-screen" press="onPageExitFullScreenButtonPress" tooltip="Exit Full Screen Mode" visible="{= ${fcl>/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/>
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap">
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{= !${midObjectViewModel>/isAddedMode} ? ${I18N>/UPDATE_USER_ID} : ${I18N>/CREATE_USER_ID}} : " />
						<Label text="{master>/update_user_id}" class="sapUiTinyMarginBegin sapUiLargeMarginEnd" design="Bold"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/LATEST} {I18N>/CHANGE} {I18N>/DATE_TIME}" class="sapUiLargeMarginBegin"/>
						<Label text="{
                                        path: 'master>/local_update_dtm',
                                        formatter: '.dateFormatter.toUTCDateTimeString'
                                    }"
                                class="sapUiTinyMarginBegin"  
                                design="Bold"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections>

        <uxap:ObjectPageSection id="pageSectionMain" titleUppercase="false" title="{I18N>/DEFAULT}{I18N>/INFORMATION}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection1">
                        <form:SimpleForm         
                            editable="true"
                            layout="ResponsiveGridLayout"			
                            labelSpanXL="12"
                            labelSpanL="12"
                            labelSpanM="12"
                            labelSpanS="12"
                            adjustLabelSpan="false"
                            emptySpanXL="0"
                            emptySpanL="0"
                            emptySpanM="0"
                            emptySpanS="0"
                            columnsXL="1"
                            columnsL="1"
                            columnsM="1" >
                            
                            <form:content>
                                <VBox>            
                                    <Label text="{I18N>/ACTIVITY_CODE}" required="true"/>
                                    <Text
                                        text="{master>/product_activity_code}"
                                        visible="{= !${midObjectViewModel>/isAddedMode} }">
                                    </Text>
                                    <Input value="{
                                            path: 'master>/product_activity_code',
                                            type: 'sap.ui.model.type.String',
                                            constraints: {
                                                maxLength: 40
                                            }
                                        }" visible="{= ${midObjectViewModel>/isAddedMode} }" editable="{contModel>/createMode}" required="true"></Input>
                                        <layoutData>
                                            <layout:GridData
                                                span="XL12 L12 M12 S12" />
                                        </layoutData>
                                </VBox>
                                <VBox>			
                                    <Label text="{I18N>/DESCRIPTION}"/>
                                    <Text
                                        text="{master>/description}"
                                        visible="{= !${midObjectViewModel>/editMode} }">
                                    </Text>
                                    <Input value="{
                                            path: 'master>/description',
                                            type: 'sap.ui.model.type.String',
                                            constraints: {
                                                maxLength: 240
                                            }
                                        }" visible="{midObjectViewModel>/editMode}"></Input>
                                        <layoutData>
                                            <layout:GridData
                                                span="XL12 L12 M12 S12" />
                                        </layoutData>
                                </VBox>
                                <VBox>			
                                    <Label text="{I18N>/SEQUENCE}"/>
                                    <Text
                                        text="{master>/sequence}"
                                        visible="{= !${midObjectViewModel>/editMode} }">
                                    </Text>
                                    <Input value="{
                                            path: 'master>/sequence'
                                        }" 
                                        visible="{midObjectViewModel>/editMode}"
                                        editable="{= !${midObjectViewModel>/isAddedMode} }"
                                        liveChange="onSequenceChange"/>
                                        <layoutData>
                                            <layout:GridData
                                                span="XL12 L12 M12 S12" />
                                        </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/STATUS}"/>
                                    <Text 
                                        text="{master>/active_flag_val}"
                                        visible="{= !${midObjectViewModel>/editMode} }"/>                                   
                                    <SegmentedButton 
                                        id="editUseflag"
                                        selectedKey="{master>/active_flag}" 
                                        visible="{midObjectViewModel>/editMode}"
                                        width="100%">
                                        <items>
                                            <SegmentedButtonItem text="Active" width="5em" key="true"/>
                                            <SegmentedButtonItem text="Inactive" width="5em" key="false"/>
                                        </items>
                                    </SegmentedButton>                                        
                                    <layoutData>
                                        <layout:GridData
                                            span="XL2 L3 M6 S12" />
                                    </layoutData>
                                </VBox>                                
                            </form:content>
                        </form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
            </uxap:ObjectPageSection>

			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MULTILINGUAL} ({= (${details>/PdProdActivityTemplateLng})?${details>/PdProdActivityTemplateLng}.length:0})">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>

                        <Table
                            id="pdActivityLengTable" 
                            
                            mode="{= ${midObjectViewModel>/editMode} ? 'MultiSelect' : 'None' }"
                            sticky="HeaderToolbar,ColumnHeaders"
                            inset="false"
                            class="sapFDynamicPageAlignContent"
                            width="auto"
                            items="{details>/PdProdActivityTemplateLng}">
							<headerToolbar>
                                <Toolbar visible="{midObjectViewModel>/editMode}">
                                    <ToolbarSpacer/>
                                    <HBox >
                                        <Button text="{I18N>/ROW_ADD}" press=".onPdActivityLengCreate"  type="Transparent"/>
                                        <Button text="{I18N>/ROW_DELETE}" press=".onPdActivityLengDelete" type="Transparent"/>
                                    </HBox>
                                </Toolbar>
                            </headerToolbar>
							<columns>
                                    <Column 
                                        visible="{midObjectViewModel>/editMode}"
                                        width="4em">
                                        <Text text="{I18N>/STATUS}"/>
                                    </Column>
                                    <Column>
                                        <Text text="{I18N>/LANGUAGE}" />
                                    </Column>
                                    <Column>
                                        <Text text="{I18N>/ACTIVITY_NAME}" />
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus 
                                                visible="{midObjectViewModel>/editMode}"
                                                icon="{
                                                    path: 'details>_row_state_',
                                                    formatter: '.formatter.toModelStateColumnIcon'
                                                  }" />
                                            <HBox>
                                                <Text
                                                    visible="{= !${midObjectViewModel>/editMode} }"
                                                    text="{details>language_cd}" />
                                                <ComboBox 
                                                    visible="{midObjectViewModel>/editMode}"
                                                    showSecondaryValues= "true"
                                                    width="100%" 
                                                    selectedKey="{details>language_cd}"
                                                    items="{
                                                        path: 'langDataModel>/',
                                                        templateShareable:true
                                                    }" editable="{= ${details>_row_state_} === 'C' }" required="true"> 
                                                    <items>
                                                        <core:ListItem key="{langDataModel>code}" text="{langDataModel>code_name}" additionalText="{langDataModel>code}" />
                                                    </items>
                                                </ComboBox>

                                            </HBox>
                                            <HBox
                                                direction="Column">
                                                <Text
                                                    visible="{= !${midObjectViewModel>/editMode} }"
                                                    text="{details>code_name}" />
                                                <Input
                                                    visible="{midObjectViewModel>/editMode}"
                                                    maxLength="240"
                                                    value="{details>code_name}" />
                                            </HBox>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>

					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

		</uxap:sections>
		
		<uxap:footer>
			<OverflowToolbar>
                <ToolbarSpacer />
                
                <Button enabled="{= !${midObjectViewModel>/editMode} }" text="{I18N>/UPDATE}" type="Transparent" press=".onPageEditeButton" />							
                <Button enabled="{midObjectViewModel>/editMode}" type="Transparent" text="{I18N>/CANCEL}" press=".onPageCancelButton"/>
                <Button enabled="{= ${midObjectViewModel>/editMode} ? ${midObjectViewModel>/isAddedMode} ? false : true : false }" type="Transparent" text="{I18N>/DELETE}" press=".onPageDeleteButton"/>
                <Button enabled="{midObjectViewModel>/editMode}" type="Emphasized" text="{I18N>/SAVE}" press=".onPageSaveButton" />
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>