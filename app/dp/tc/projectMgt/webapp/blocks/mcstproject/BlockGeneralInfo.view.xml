<mvc:View controllerName="dp.tc.projectMgt.controller.blocks.mcstproject.BlockGeneralInfo"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:f="sap.f"
  xmlns:core="sap.ui.core"
  xmlns:form="sap.ui.layout.form"
  xmlns:layout="sap.ui.layout"
  xmlns:tnt="sap.tnt"
  xmlns:lib-m="ext.lib.control.m"
  xmlns:cm-ui="cm.util.control.ui"
  class="sapUiSizeCompact"
  displayBlock="true"
  height="100%">
  <VBox>
    <form:SimpleForm 
            editable="true" 
            visible="{detailModel>/mode/readMode}"
            layout="ResponsiveGridLayout">
        <form:content>
            <!--form line 1-->
            <Label text="{I18N>/PROJECT_CODE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PROJECT_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PRODUCT_GROUP}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/product_group_text/code_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/EVENT}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/develope_event_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <!--form line 2-->
            <Label text="{I18N>/REPR_MODEL_CODE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/model_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/REPR_MODEL_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/model_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PRODUCTION_COMPANY}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/production_company_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/QUOTE_PROJECT_CODE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/quotation_project_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <!--form line 3-->
            <Label text="{I18N>/STATUS}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_status_text/code_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/CREATION_DATE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{
                            path: 'detailModel>/project_create_date',
                            formatter: '.dateFormatter.toUTCDateString'
                        }">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/GRADE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_grade_text/code_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/CUSTOMER_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/customer_local_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>            

            <!--form line 4-->
            <Label text="{I18N>/PROJECT_LEADER}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true"/>
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_leader_info/user_local_name} {detailModel>/project_leader_info/job_title}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/MCST_PERSON}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/buyer_info/user_local_name} {detailModel>/buyer_info/job_title}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/MARKETING}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/marketing_person_info/user_local_name} {detailModel>/marketing_person_info/job_title}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PLANNING}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/planning_person_info/user_local_name} {detailModel>/planning_person_info/job_title}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <!--form line 5-->
            <Label text="{I18N>/LAST_CUSTOMER}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true"/>
                </layoutData>
            </Label>
            <Text text="{detailModel>/last_customer_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/LAST_CUSTOMER_MODEL_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/customer_model_desc}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/YIELD_MATERIAL_COST}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{=${detailModel>/mcst_yield_rate} || 0}%">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/BOM}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/bom_type_text/code_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>
        </form:content>
    </form:SimpleForm>
    <form:SimpleForm 
            editable="true" 
            visible="{detailModel>/mode/editMode}"
            layout="ResponsiveGridLayout">
        <form:content>
            <!--form line 1-->
            <Label text="{I18N>/PROJECT_CODE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PROJECT_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/project_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PRODUCT_GROUP}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <!--<Input value="{detailModel>/product_group_text}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>-->
            <ComboBox
                width="100%"
                selectedKey="{detailModel>/product_group_code}"
                change=".onChangeComboBox"
                items="{
                    path: 'util>/Code',
                    filters: [
                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                        {path: 'group_code', operator: 'EQ', value1: 'DC_TC_PRODUCT_GROUP_CODE'}
                    ]
                }">
                <items>
                    <core:Item key="{util>code}" text="{util>code_name}" />
                </items>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </ComboBox>

            <Label text="{I18N>/EVENT}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <!--<Input value="{detailModel>/develope_event_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>-->
            <ComboBox
                width="100%"
                selectedKey="{detailModel>/develope_event_code}"
                items="{
                    path: 'util>/Code',
                    filters: [
                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                        {path: 'group_code', operator: 'EQ', value1: 'DP_TC_DEVELOP_EVENT_CODE'}
                    ]
                }">
                <items>
                    <core:Item key="{util>code}" text="{util>code_name}" />
                </items>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </ComboBox>

            <!--form line 2-->
            <Label text="{I18N>/REPR_MODEL_CODE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/model_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/REPR_MODEL_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Text text="{detailModel>/model_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Text>

            <Label text="{I18N>/PRODUCTION_COMPANY}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Input value="{detailModel>/production_company_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>

            <Label text="{I18N>/QUOTE_PROJECT_CODE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Input value="{detailModel>/quotation_project_code}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>

            <!--form line 3-->
            <Label text="{I18N>/STATUS}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true" />
                </layoutData>
            </Label>
            <ComboBox
                width="100%"
                selectedKey="{detailModel>/project_status_code}"
                items="{
                    path: 'util>/Code',
                    filters: [
                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                        {path: 'group_code', operator: 'EQ', value1: 'DP_TC_PROJECT_STATUS_CODE'}
                    ]
                }">
                <items>
                    <core:Item key="{util>code}" text="{util>code_name}" />
                </items>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </ComboBox>            

            <Label text="{I18N>/CREATION_DATE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <!--<Input value="{
                            path: 'detailModel>/project_create_date',
                            formatter: '.dateFormatter.toUTCDateString'
                        }">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>-->
            <DatePicker
                id="DP4"
                value="{path:'detailModel>/project_create_date', type:'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true}}"
                class="sapUiSmallMarginBottom">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </DatePicker>

            <Label text="{I18N>/GRADE}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <!--<Input value="{detailModel>/project_grade_text}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>-->
            <ComboBox
                width="100%"
                selectedKey="{detailModel>/project_grade_code}"
                items="{
                    path: 'util>/Code',
                    filters: [
                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                        {path: 'group_code', operator: 'EQ', value1: 'DP_TC_PROJECT_GRADE_CODE'}
                    ]
                }">
                <items>
                    <core:Item key="{util>code}" text="{util>code_name}" />
                </items>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </ComboBox>

            <Label text="{I18N>/CUSTOMER_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Input value="{detailModel>/customer_local_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>            

            <!--form line 4-->
            <Label text="{I18N>/PROJECT_LEADER}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true"/>
                </layoutData>
            </Label>
            <VBox>
                <Input value="{detailModel>/project_leader_info/user_local_name}"
                       showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                    <customData>
                        <core:CustomData key="modelName" value="detailModel" />
                        <core:CustomData key="textPath" value="/project_leader_info/user_local_name" />
                        <core:CustomData key="codePath" value="/project_leader_empno" />
                    </customData>
                </Input>
                
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </VBox>

            <Label text="{I18N>/MCST_PERSON}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <VBox>
                <Input value="{detailModel>/buyer_info/user_local_name}"
                       showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                    <customData>
                        <core:CustomData key="modelName" value="detailModel" />
                        <core:CustomData key="textPath" value="/buyer_info/user_local_name" />
                        <core:CustomData key="codePath" value="/buyer_empno" />
                    </customData>
                </Input>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </VBox>

            <Label text="{I18N>/MARKETING}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <VBox>
                <Input value="{detailModel>/marketing_person_info/user_local_name}"
                       showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                    <customData>
                        <core:CustomData key="modelName" value="detailModel" />
                        <core:CustomData key="textPath" value="/marketing_person_info/user_local_name" />
                        <core:CustomData key="codePath" value="/marketing_person_empno" />
                    </customData>
                </Input>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </VBox>

            <Label text="{I18N>/PLANNING}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <VBox>
                <Input value="{detailModel>/planning_person_info/user_local_name}"
                       showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                    <customData>
                        <core:CustomData key="modelName" value="detailModel" />
                        <core:CustomData key="textPath" value="/planning_person_info/user_local_name" />
                        <core:CustomData key="codePath" value="/planning_person_empno" />
                    </customData>
                </Input>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </VBox>

            <!--form line 5-->
            <Label text="{I18N>/LAST_CUSTOMER}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" linebreak="true"/>
                </layoutData>
            </Label>
            <Input value="{detailModel>/last_customer_name}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>

            <Label text="{I18N>/LAST_CUSTOMER_MODEL_NAME}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <Input value="{detailModel>/customer_model_desc}">
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </Input>

            <Label text="{I18N>/YIELD_MATERIAL_COST}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <HBox>
                <Input value="{detailModel>/mcst_yield_rate}" width="95%"/>
                <Text text="%" width="100%" class="sapUiLargeMarginEnd"/>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </HBox>

            <Label text="{I18N>/BOM}">
                <layoutData>
                    <layout:GridData span="XL1 L1 M3 S12" />
                </layoutData>
            </Label>
            <ComboBox
                width="100%"
                selectedKey="{detailModel>/bom_type_code}"
                items="{
                    path: 'util>/Code',
                    filters: [
                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                        {path: 'group_code', operator: 'EQ', value1: 'DP_TC_BOM_TYPE_CODE'}
                    ]
                }">
                <items>
                    <core:Item key="{util>code}" text="{util>code_name}" />
                </items>
                <layoutData>
                    <layout:GridData span="XL2 L2 M3 S12" />
                </layoutData>
            </ComboBox>
        </form:content>
    </form:SimpleForm>
</VBox>

<VBox>
    <Table id="tblSimilModel"
            visible="{detailModel>/mode/readMode}"
            growing="true"
            growingThreshold="20"
            class="sapFDynamicPageAlignContent"
            mode="None"
            width="auto"
            items="{detailModel>/mcst_similar_model/results}"
            >
        <headerToolbar>
            <OverflowToolbar>
                <Label text="{I18N>/SIMILAR_MODEL}"/>
            </OverflowToolbar>
        </headerToolbar>
        <columns>
            <Column minScreenWidth="Tablet" hAlign="Center" width="20em" >
                <Text text="{I18N>/MODEL_CODE}" />
            </Column>
            <Column minScreenWidth="Tablet" hAlign="Center" width="20em" >
                <Text text="{I18N>/MODEL_NAME}" />
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <cells>
                    <Text text="{detailModel>similar_model_code}" />
                    <Text text="{detailModel>code_desc}" />
                </cells>
            </ColumnListItem>
        </items>
    </Table>
    <Table id="tblSimilModel_edit"
            visible="{detailModel>/mode/editMode}"
            growing="true"
            growingThreshold="20"
            class="sapFDynamicPageAlignContent"
            mode="None"
            width="auto"
            items="{detailModel>/mcst_similar_model/results}"
            >
        <headerToolbar>
            <OverflowToolbar>
                <Label text="{I18N>/SIMILAR_MODEL}"/>
            </OverflowToolbar>
        </headerToolbar>
        <columns>
            <Column minScreenWidth="Tablet" hAlign="Center" width="20em" >
                <Text text="{I18N>/MODEL_CODE}" />
            </Column>
            <Column minScreenWidth="Tablet" hAlign="Center" width="20em" >
                <Text text="{I18N>/MODEL_NAME}" />
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <cells>
                    <Input value="{detailModel>similar_model_code}" />
                    <Input value="{detailModel>code_desc}" />
                </cells>
            </ColumnListItem>
        </items>
    </Table>
    <cm-ui:EmployeeDialog id="employeeDialog" 
        title="{I18N>/EMPLOYEE} {I18N>/FIND}"
        closeWhenApplied="true"
        items="{
            filters: [
            ]
        }"
        apply=".onEmployeeDialogApplyPress"
    />
</VBox>
</mvc:View>