<!-- 
   description : BOM Mapping  버튼 클릭
-->
<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core" 
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:cm-ui="cm.util.control.ui">
    <Dialog id="diaBomMapping" class="sapUiSmallMargin sapUiSizeCompact" title="{I18N>/BOM_MAPPING}" contentWidth="70%" contentHeight="60%" >
        <content>
        <VBox class="sapUiSmallMargin">
            <VBox>
            <form:SimpleForm 
                editable="true" 
                layout="ResponsiveGridLayout"
                adjustLabelSpan="false">
                        <Label text="{I18N>/CHARGE_DEPT}" required="true">
                            <layoutData>
                                <layout:GridData span="XL1 L1 M1 S12" />
                            </layoutData>
                        </Label>
                        <ComboBox
                            id="cbxBomMapDept"
                            width="100%"
                            selectedKey="{bomMappingModel>/department_type_code}"
                            items="{
                                path: 'util>/Code',
                                filters: [
                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                    {path: 'group_code', operator: 'EQ', value1: 'DP_TC_CI_DEPT_CODE'}
                                ],
                                sorter: { path: 'sort_no'}
                            }">
                            <items>
                                <core:Item key="{util>code}" text="{util>code_name}" />
                            </items>
                            <layoutData>
                                <layout:GridData span="XL2 L2 M2 S12" />
                            </layoutData>
                        </ComboBox>

                        <Label text="{I18N>/CHARGE_PERSON}" required="true">
                            <layoutData>
                                <layout:GridData span="XL2 L2 M2 S12" />
                            </layoutData>
                        </Label>
                        <Input value="{bomMappingModel>/creator_local_name}"
                            showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                            <customData>
                                <core:CustomData key="modelName" value="bomMappingModel" />
                                <core:CustomData key="textPath" value="/creator_local_name" />
                                <core:CustomData key="codePath" value="/creator_empno" />
                            </customData>
                            <layoutData>
                                <layout:GridData span="XL2 L2 M2 S12" />
                            </layoutData>
                        </Input>

                        <Label text="{I18N>/ECO_ECR_NO}" >
                            <layoutData>
                                <layout:GridData span="XL2 L2 M2 S12" />
                            </layoutData>
                        </Label>
                        <Input value="{bomMappingModel>/eng_change_number}">
                            <layoutData>
                                <layout:GridData span="XL3 L3 M3 S12" />
                            </layoutData>
                        </Input>

                        <Label text="{I18N>/MAPPING_RSN}" required="true">
                            <layoutData>
                                <layout:GridData span="XL1 L1 M1 S12" linebreak="true"/>
                            </layoutData>
                        </Label>
                        <Input width="100%" value="{bomMappingModel>/change_reason}" >
                            <layoutData>
                                <layout:GridData span="XL11 L11 M11 S12" />
                            </layoutData>
                        </Input>
            </form:SimpleForm>
            </VBox>
            <!-- </Panel> -->

            <HBox>
                <VBox width="40%">
                    <Table  id="tblAsisMatInfo" width="100%"
                            items="{
                                path: 'bomMappingModel>/Asis',
                                sorter: {
                                    path: 'Name'
                                }
                            }">
                        <headerToolbar>
                            <OverflowToolbar>
                                <content>
                                    <Title text="{I18N>/ASIS_MTL_CODE}" level="H2"/>
                                </content>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column hAlign="Begin" width="30%">
                                <Text text="{I18N>/MATERIAL_CODE}" />
                            </Column>
                            <Column hAlign="Begin" width="70%">
                                <Text text="{I18N>/MATERIAL_DESC}" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{bomMappingModel>material_code}"/>
                                    <Text text="{bomMappingModel>material_desc}"/>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
                <VBox width="3rem" alignItems="Center" justifyContent="Center">
                    <Avatar
                        src="sap-icon://combine"
                        displaySize="Custom"
                        customDisplaySize="2rem"
                        displayShape="Square"
                        showBorder="true"/>
                </VBox>
                <VBox width="55%">
                    <Table  id="tblTobeMatInfo" width="100%"
                            items="{
                                path: 'bomMappingModel>/Tobe',
                                sorter: {
                                    path: 'Name'
                                }
                            }">
                        <headerToolbar>
                            <OverflowToolbar>
                                <content>
                                    <Title text="{I18N>/TOBE_MTL_CODE}" level="H2"/>
                                </content>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column hAlign="Begin" width="20%">
                                <Text text="{I18N>/MATERIAL_CODE}" />
                            </Column>
                            <Column hAlign="Begin" width="30%">
                                <Text text="{I18N>/MATERIAL_DESC}" />
                            </Column>
                            <Column hAlign="Begin" width="50%">
                                <Text text="{I18N>/REMARK}" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{bomMappingModel>material_code}"/>
                                    <Text text="{bomMappingModel>material_desc}"/>
                                    <Input value="{bomMappingModel>change_reason}"/>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </HBox>

        </VBox>       
        </content>
        <buttons>
            <Button text="{I18N>/CLOSE}" class="sapUiSmallMarginEnd" press=".onBomMappingExit"/>
            <Button text="{I18N>/DELETE}" class="sapUiSmallMarginEnd" press=".onBomMappingDeletePress" visible="{= ${detailModel>/mcst_status_code} !== 'CONFIRMED' &amp;&amp; ${bomMappingModel>/mapping_id} ? true : false }"/>
            <Button text="{I18N>/SAVE}" class="sapUiSmallMarginEnd" type="Emphasized" press=".onBomMappingSavePress" visible="{= ${detailModel>/mcst_status_code} === 'CONFIRMED' ? false : true }"/>
        </buttons>
        <cm-ui:EmployeeDialog id="employeeDialogBomMapping" 
            title="{I18N>/EMPLOYEE} {I18N>/FIND}"
            closeWhenApplied="true"
            items="{
                filters: [
                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                ]
            }"
            apply=".onEmployeeDialogApplyPress"
        />

    </Dialog>
</core:FragmentDefinition>
