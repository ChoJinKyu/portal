<mvc:View controllerName="dp.basePriceList.controller.BasePriceDetail" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:uxap="sap.uxap"
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:lib-m="ext.lib.m"
    xmlns:t="sap.ui.table"
    xmlns:co="sap.suite.ui.commons"
    height="100%">

    <uxap:ObjectPageLayout
        showTitleInHeaderContent="true"
		showEditHeaderButton="true"
        upperCaseAnchorBar="false"
        showAnchorBarPopover="false"
        showFooter="true">

		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
                    <Title text="(NPD) New Base Price" wrapping="true"/>
				</uxap:expandedHeading>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap">
                <!-- Requester 시작 -->
                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <ObjectStatus title="Approval No" text="{listModel>approval_number}"/>
                    <ObjectStatus title="Requester" text="{listModel>update_user_id}"/>
                    <ObjectStatus title="Request Date" text="{path:'listModel>/local_update_dtm', formatter: '.dateFormatter.toDateString'}"/>
                </layout:VerticalLayout>
                <!-- Requester 끝 -->

                <!-- Status 시작 -->
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<Label text="Status :"/>
                    <ObjectStatus class="sapMObjectStatusLarge" text="Drafting" state="Error" />
				</layout:VerticalLayout>
                <!-- Status 끝 -->

                <!-- Process 시작 -->
                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<Label text="Process : "/>
                    <!-- <co:ProcessFlow id="pageHeaderProcessFlow" scrollable="false">
                        <co:lanes>
                            <co:ProcessFlowLaneHeader
                                laneId="pageHeaderProcessFlowOrderLane"
                                iconSrc="sap-icon://order-status"
                                text="Drafting"
                                position="0" />
                            <co:ProcessFlowLaneHeader
                                laneId="pageHeaderProcessFlowDeliveryLane"
                                iconSrc="sap-icon://monitor-payments"
                                text="Request For Approval"
                                position="1" />
                            <co:ProcessFlowLaneHeader
                                laneId="pageHeaderProcessFlowInvoiceLane"
                                iconSrc="sap-icon://payment-approval"
                                text="Approved"
                                position="2" />
                            <co:ProcessFlowLaneHeader
                                laneId="pageHeaderProcessFlowAccountingLane"
                                iconSrc="sap-icon://money-bills"
                                text="Rejected"
                                position="3" />
                        </co:lanes>
                    </co:ProcessFlow> -->

                    <HBox>
                        <co:MicroProcessFlow>
                            <co:content>
                                <co:MicroProcessFlowItem state="Error" stepWidth="5rem" icon="sap-icon://circle-task" />
                                <co:MicroProcessFlowItem state="None" stepWidth="5rem" />
                                <co:MicroProcessFlowItem state="None" stepWidth="5rem" />
                            </co:content>
                        </co:MicroProcessFlow>
                    </HBox>
                    <HBox>
                        <Text text="Drafting" width="4rem" />
                        <Text text="Request&#10; For Approval" width="6rem" textAlign="Center" />
                        <Text text="Approved" width="6rem" textAlign="Center" />
                    </HBox>
				</layout:VerticalLayout>
                <!-- Process 시작 -->
			</FlexBox>
		</uxap:headerContent>

        <uxap:sections>
            <!-- General Information 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <HBox alignItems="Center">
                                <Label
                                    text="Approval Name"
                                    design="Bold"
                                    class="sapUiTinyMarginEnd"
                                    textAlign="Left"
                                    labelFor="input"
                                    required="true"/>
                                <Input
                                    width="20rem"
                                    placeholder=""
                                    value="">
                                </Input>
                            </HBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- General Information 끝 -->

            <!-- Material Code 시작 -->
            <uxap:ObjectPageSection titleUppercase="false" title="Base Price List({= ${listModel>/results}.length})">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <VBox>
                                <!-- Material Code List 시작 -->
                                <t:Table id="mainTable"
                                    selectionMode="MultiToggle"
                                    rows="{listModel>/details/results}"
                                    rowSelectionChange=".onRowSelectionChange"
                                    fixedColumnCount="2"
                                    visibleRowCountMode="Auto">
                                    <t:extension>
                                        <OverflowToolbar class="sapFDynamicPageAlignContent">
                                            <ToolbarSpacer />
                                            <!-- <Button text="{I18N>/CHANGE_DEVELOPER}" type="Transparent"/>
                                            <Button text="{I18N>/DOWNLOAD}" type="Transparent"/>
                                            <Button text="{I18N>/UPLOAD}" type="Transparent"/>
                                            <Button text="{I18N>/DELETE}" type="Transparent"/> -->
                                            <Button text="Template Upload" type="Transparent"/>
                                            <Button text="Upload" type="Transparent"/>
                                            <Button text="Add" type="Transparent" press=".onOpenMaterialDialog" />
                                            <Button text="Delete" type="Transparent" press="" />
                                            <Button icon="sap-icon://excel-attachment" />
                                            <Button icon="sap-icon://group-2" />
                                            <Button icon="sap-icon://action-settings" />
                                        </OverflowToolbar>
                                    </t:extension>
                                    <t:columns>
                                        <t:Column hAlign="Center" width="4rem">
                                            <!-- <Label text="{I18N>/DIV}" textAlign="Center" /> -->
                                            <Label text="Div" />
                                            <t:template>
                                                <Text text="{listModel>/org_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="10rem">
                                            <!-- <Label text="{I18N>/PART_NO}" /> -->
                                            <Label text="Material Code" />
                                            <t:template>
                                                <Input 
                                                    value="{listModel>material_code}" 
                                                    visible="{= ${listModel>basis} !== '3' ? true : false }"
                                                    showValueHelp="true"
                                                    valueHelpRequest=".onOpenMaterialCode" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="16rem">
                                            <!-- <Label text="{I18N>/DESCRIPTION}" textAlign="Center" /> -->
                                            <Label text="Description" />
                                            <t:template>
                                                <Text text="{listModel>description}" visible="{= ${listModel>basis} !== '3' ? true : false }" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="12rem">
                                            <!-- <Label text="{I18N>/SPECIFICATION}" /> -->
                                            <Label text="Spec" />
                                            <t:template>
                                                <Text text="{listModel>spec}" visible="{= ${listModel>basis} !== '3' ? true : false }" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="8rem">
                                            <!-- <Label text="{I18N>/BASIS}" textAlign="Center" width="100%"/> -->
                                            <Label text="Basis" />
                                            <t:template>
                                                <ComboBox
                                                    items="{codeModel>/basis}"
                                                    selectedKey="{listModel>basis}">
                                                    <items>
                                                        <core:Item key="{codeModel>code}" text="{codeModel>text}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column headerSpan="3" hAlign="Center" width="10rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%"/> -->
                                                <Label text="Domestic" />
                                                <Label text="Base Date" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Text text="{
                                                    path: 'listModel>base_date',
                                                    formatter: '.dateFormatter.toDateString'}" />
                                            </t:template>
                                            </t:Column>
                                        <t:Column width="12rem" hAlign="Center">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%"/> -->
                                                <Label text="Domestic"/>
                                                <Label text="New Base Price" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Input value="{listModel>prices/0/new_base_price}" type="Number" />
                                            </t:template>
                                            </t:Column>
                                        <t:Column width="6rem" hAlign="Center">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/CURRENCY}" textAlign="Center" width="100%"/> -->
                                                <Label text="Domestic"/>
                                                <Label text="Curr." />
                                            </t:multiLabels>
                                            <t:template>
                                                <ComboBox
                                                    items="{codeModel>/currency}"
                                                    selectedKey="{listModel>prices/0/new_base_price_currency_code}">
                                                    <items>
                                                        <core:Item key="{codeModel>currency_code}" text="{codeModel>currency_code}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column headerSpan="3" hAlign="Center" width="10rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%"/> -->
                                                <Label text="Export" />
                                                <Label text="Base Date" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Text text="{
                                                    path: 'listModel>base_date',
                                                    formatter: '.dateFormatter.toDateString'}" />
                                            </t:template>
                                            </t:Column>
                                        <t:Column width="12rem" hAlign="Center">
                                            <t:multiLabels>
                                                    <!-- <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%"/> -->
                                                <Label text="Export"/>
                                                <Label text="New Base Price" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Input value="{listModel>prices/1/new_base_price}" type="Number" />
                                            </t:template>
                                            </t:Column>
                                        <t:Column width="6rem" hAlign="Center">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/CURRENCY}" textAlign="Center" width="100%"/> -->
                                                <Label text="Export"/>
                                                <Label text="Curr." />
                                            </t:multiLabels>
                                            <t:template>
                                                <ComboBox
                                                    items="{codeModel>/currency}"
                                                    selectedKey="{listModel>prices/1/new_base_price_currency_code}">
                                                    <items>
                                                        <core:Item key="{codeModel>currency_code}" text="{codeModel>currency_code}" />
                                                    </items>
                                                </ComboBox>
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="12rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                                <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" width="100%"/> -->
                                                <Label text="Base Price Type" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Text text="{listModel>supplier_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column headerSpan="4" hAlign="Center" width="6rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/FAMILY_PART_NO}" textAlign="Center" width="100%"/>
                                                <Label text="{I18N>/DIV}" textAlign="Center" width="100%"/> -->
                                                <Label text="Family Part-No" />
                                                <Label text="Div" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Text text="{listModel>div}" />
                                            </t:template>
                                            </t:Column>
                                        <t:Column hAlign="Center" width="12rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                                <Label text="{I18N>/PART_NO}" textAlign="Center" width="100%"/> -->
                                                <Label text="Family Part-No"/>
                                                <Label text="Material Code" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Input 
                                                    value="{listModel>PART_NO}" 
                                                    visible="{= ${listModel>basis} === '3' ? true : false }"
                                                    showValueHelp="true"
                                                    valueHelpRequest=".onOpenFamilyPartNo" />
                                            </t:template>
                                            </t:Column>
                                        <t:Column hAlign="Center" width="12rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                                <Label text="{I18N>/SUPPLIER_CODE}" textAlign="Center" width="100%"/> -->
                                                <Label text="Family Part-No"/>
                                                <Label text="Supplier Code" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Text text="{listModel>supplier_code}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center" width="12rem">
                                            <t:multiLabels>
                                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                                <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" width="100%"/> -->
                                                <Label text="Family Part-No"/>
                                                <Label text="Supplier Name" />
                                            </t:multiLabels>
                                            <t:template>
                                                <Text text="{listModel>supplier_name}" />
                                            </t:template>
                                        </t:Column>
                                        <t:Column hAlign="Center"  width="12rem">
                                            <!-- <Label text="{I18N>/HQ_NPD_BASE_PRICE}" /> -->
                                            <Label text="(HQ) NPD  Base Price" />
                                            <t:template>
                                                <Text text="{listModel>hq_npd_base_price}" />
                                            </t:template>
                                        </t:Column>
                                    </t:columns>
                                </t:Table>
                                <!-- Material Code List 끝 -->
                            </VBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Material Code 끝 -->

            <!-- Description 시작 -->
            <uxap:ObjectPageSection titleUppercase="false" title="Description">
                <uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- Text Editor 시작 -->
                            <layout:VerticalLayout id="idVerticalLayout" class="sapUiContentPadding" width="100%">
                            </layout:VerticalLayout>
                            <!-- Text Editor 끝 -->
                        </uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Description 시작 -->

            <!-- Attachment 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="Attachment">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- File Upload 시작-->
                            <UploadCollection
                                id="UploadCollection"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="true"
                                sameFilenameAllowed="true"
                                instantUpload="false"
                                noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                change="onChange"
                                fileDeleted="onFileDeleted"
                                filenameLengthExceed="onFilenameLengthExceed"
                                fileSizeExceed="onFileSizeExceed"
                                typeMissmatch="onTypeMissmatch"
                                uploadComplete="onUploadComplete"
                                beforeUploadStarts="onBeforeUploadStarts" />
                            <!-- File Upload 끝-->
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- GAttachment 끝 -->

            <!-- Report Line 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="Report Line">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <!-- Approval & Reference 시작 -->
                            <VBox>
                            <Table id="ApprovalTable"       
                                    growing="true"
                                    growingThreshold="20"
                                    class="sapFDynamicPageAlignContent" 
                                    mode="None"
                                    width="auto"
                                    items="{applistModel>/undefined}"
                                    >
                                <headerToolbar>
                                    <OverflowToolbar>
                                    <Label text="Approval Line"/>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column minScreenWidth="Tablet" hAlign="Center" mergeDuplicates="true" width="3rem" >
                                        <Text text="No." />
                                    </Column>
                                    <Column minScreenWidth="Tablet" hAlign="Center" mergeDuplicates="true" width="6em" >
                                        <Text text="Type" />
                                    </Column>
                                    <Column minScreenWidth="Tablet" hAlign="Center" width="16em" >
                                        <Text text="Name/Dept" />
                                    </Column>
                                    <Column minScreenWidth="Tablet" hAlign="Center"  >
                                        <Text text="Comment" />
                                    </Column>
                                    <Column minScreenWidth="Tablet" hAlign="Center" width="6em" >
                                        <Text text="Status" />
                                    </Column> 
                                    <Column minScreenWidth="Tablet" hAlign="Center" width="8em" >
                                        <Text text="Add / Delete" />
                                    </Column>					
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <!-- <ObjectIdentifier title="{Name}" text="{ProductId}"/> -->
                                            <Text text="{applistModel>no}" />
                                            <ComboBox  width="100%"
                                                selectedKey="{applistModel>type}" 
                                                enabled="{applistModel>editMode}"
                                                items="{
                                                    path: 'org>/Org_Company',
                                                    filters: [
                                                        {path: 'tenant_id', operator: 'EQ', value1: 'L1100'}
                                                    ],
                                                    sorter: { path: 'company_code'}
                                                }"
                                                >
                                            <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                            </ComboBox>
                                            <SearchField enabled="{applistModel>editMode}" search=".onSearch" width="100%" placeholder="Search employee" value="{applistModel>nameDept}"/>
                                            <Text text="{applistModel>status}" />
                                            <Text text="{applistModel>comment}" />
                                            <Button icon="{applistModel>arrowUp}" press=".onSortUp(${applistModel>no})" tooltip="sort" visible="{= ${applistModel>arrowUp}===''?false:true }"></Button>
                                            <Button icon="{applistModel>arrowDown}" press=".onSortDown(${applistModel>no})"  visible="{= ${applistModel>arrowDown}===''?false:true }" tooltip="sort"></Button>
                                            <Button icon="sap-icon://delete" press=".setApprovalRemoveRow(${applistModel>no})" tooltip="삭제" visible="{applistModel>trashShow}"></Button>
                                        </cells>
                                    </ColumnListItem>   
                                </items>
                            </Table>

                            <Text text="Referrer" />
                            <Input value="{listModel>/abc}" 
                                showValueHelp="true"
                                valueHelpRequest=".onOpenMaterialCode" />
                            </VBox>
                            <!-- Approval & Reference 끝 -->
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            <!-- Report Line 끝 -->
        </uxap:sections>

        <uxap:footer>
			<OverflowToolbar>
                <Button
                    text="Back" press=".onBack" />
				<ToolbarSpacer />
                <Button
                    text="Change Developer" press=".onChangeDeveloper" />
				<Button
                    text="Draft" press=".onDraft" />
                <Button
                    text="Preview" press="" />
                <Button
                    text="Cancel" press="" />
                <Button
                    text="Delete" press="" />
                <Button
                    type="Emphasized"
                    text="Request"
                    press=".onRequest" />
			</OverflowToolbar>
		</uxap:footer>
    </uxap:ObjectPageLayout>
</mvc:View>