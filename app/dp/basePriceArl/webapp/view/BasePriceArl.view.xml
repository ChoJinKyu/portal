<mvc:View controllerName="dp.basePriceArl.controller.BasePriceArl" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:lib-m="ext.lib.m"
    xmlns:t="sap.ui.table"
    height="100%">

    <f:DynamicPage id="page"
        headerExpanded="true"
        showFooter="true"
        toggleHeaderOnTitleClick="true">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="(NPD) New Base Price_" />
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <Text text="New Part means that a unit price do noet be existed in GERP._" />
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox>

                <!--Part No List 시작-->
                <t:Table id="mainTable"
                    selectionMode="MultiToggle"
                    rows="{list>/details}"
                    visibleRowCountMode="Auto">
                    <t:extension>
                        <OverflowToolbar class="sapFDynamicPageAlignContent">
                            <!-- <Title text="{I18N>/PART_NO_LIST}" level="H2"/> -->
                            <Title text="Part-No List" level="H2"/>
                            <SearchField width="12rem" />
                            <ToolbarSpacer/>
                            <!-- <Button text="{I18N>/CHANGE_DEVELOPER}" type="Transparent"/>
                            <Button text="{I18N>/DOWNLOAD}" type="Transparent"/>
                            <Button text="{I18N>/UPLOAD}" type="Transparent"/>
                            <Button text="{I18N>/DELETE}" type="Transparent"/> -->
                            <Button text="Change Developer" type="Transparent"/>
                            <Button text="Download" type="Transparent"/>
                            <Button text="Upload" type="Transparent"/>
                            <Button text="Delete" type="Transparent"/>
                            <Button icon="sap-icon://excel-attachment" />
                            <Button icon="sap-icon://group-2" />
                            <Button icon="sap-icon://action-settings" />
                        </OverflowToolbar>
                    </t:extension>
                    <t:columns>
                        <t:Column hAlign="Center" width="4rem">
                            <!-- <Label text="{I18N>/DIV}" textAlign="Center" /> -->
                            <Label text="Div" textAlign="Center" />
                            <t:template>
                                <Text text="{list>_row_state_}" />
                            </t:template>
                        </t:Column>
                        <t:Column hAlign="Center"  width="8rem">
                            <!-- <Label text="{I18N>/PART_NO}" /> -->
                            <Label text="Part_No" />
                            <t:template>
                                <Text text="{list>tenant_id}" />
                            </t:template>
                        </t:Column>
                        <t:Column hAlign="Center"  width="16rem">
                            <!-- <Label text="{I18N>/DESCRIPTION}" textAlign="Center" /> -->
                            <Label text="Description" textAlign="Center" />
                            <t:template>
                                <Input value="{list>timezone_code}" visible="{= ${list>basis} !== '3' ? true : false }" />
                            </t:template>
                        </t:Column>
                        <t:Column hAlign="Center"  width="12rem">
                            <!-- <Label text="{I18N>/SPECIFICATION}" /> -->
                            <Label text="Spec" />
                            <t:template>
                                <Input value="{list>timezone_name}" visible="{= ${list>basis} !== '3' ? true : false }" />
                            </t:template>
                        </t:Column>
                        <t:Column id="mainCountryCodeColumn">
                            <!-- <Label text="{I18N>/BASIS}" textAlign="Center" width="100%"/> -->
                            <Label text="Basis" textAlign="Center" width="100%"/>
                            <t:template>
                                <ComboBox
                                    items="{codeModel>/basis}"
                                    selectedKey="{list>basis}">
                                    <items>
                                        <core:Item key="{codeModel>code}" text="{codeModel>text}" />
                                    </items>
                                </ComboBox>
                            </t:template>
                        </t:Column>
                        <t:Column headerSpan="3">
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%"/> -->
                                <Label text="Domestic" textAlign="Center" width="100%"/>
                                <Label text="Base Date" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Text text="{list>domestic_base_date}" />
                            </t:template>
                            </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%"/> -->
                                <Label text="Domestic"/>
                                <Label text="New Base Price" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Input value="{list>prices/0/new_base_price}" type="Number" />
                            </t:template>
                            </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/DOMESTIC}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/CURRENCY}" textAlign="Center" width="100%"/> -->
                                <Label text="Domestic"/>
                                <Label text="Curr." textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <ComboBox
                                    items="{codeModel>/currency}"
                                    selectedKey="{list>prices/0/new_base_price_currency_code}">
                                    <items>
                                        <core:Item key="{codeModel>code}" text="{codeModel>text}" />
                                    </items>
                                </ComboBox>
                            </t:template>
                        </t:Column>
                        <t:Column headerSpan="3">
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/BASE_DATE}" textAlign="Center" width="100%"/> -->
                                <Label text="Export" textAlign="Center" width="100%"/>
                                <Label text="Base Date" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Text text="{list>export_base_date}" />
                            </t:template>
                            </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                 <!-- <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/NEW_BASE_PRICE}" textAlign="Center" width="100%"/> -->
                                <Label text="Export"/>
                                <Label text="New Base Price" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Input value="{list>prices/1/new_base_price}" type="Number" />
                            </t:template>
                            </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/EXPORT}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/CURRENCY}" textAlign="Center" width="100%"/> -->
                                <Label text="Export"/>
                                <Label text="Curr." textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <ComboBox
                                    items="{codeModel>/currency}"
                                    selectedKey="{list>prices/1/new_base_price_currency_code}">
                                    <items>
                                        <core:Item key="{codeModel>code}" text="{codeModel>text}" />
                                    </items>
                                </ComboBox>
                            </t:template>
                        </t:Column>
                        <t:Column headerSpan="4">
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/FAMILY_PART_NO}" textAlign="Center" width="100%"/>
                                <Label text="{I18N>/DIV}" textAlign="Center" width="100%"/> -->
                                <Label text="Family Part-No" textAlign="Center" width="100%"/>
                                <Label text="Div" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Text text="{list>div}" />
                            </t:template>
                            </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                <Label text="{I18N>/PART_NO}" textAlign="Center" width="100%"/> -->
                                <Label text="Family Part-No"/>
                                <Label text="Part-No" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Input 
                                    value="{list>PART_NO}" 
                                    visible="{= ${list>basis} === '3' ? true : false }"
                                    showValueHelp="true"
			                        valueHelpRequest=".onValueHelpRequest" />
                            </t:template>
                            </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                <Label text="{I18N>/SUPPLIER_CODE}" textAlign="Center" width="100%"/> -->
                                <Label text="Family Part-No"/>
                                <Label text="Supplier Code" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Text text="{list>supplier_code}" />
                            </t:template>
                        </t:Column>
                        <t:Column>
                            <t:multiLabels>
                                <!-- <Label text="{I18N>/FAMILY_PART_NO}"/>
                                <Label text="{I18N>/SUPPLIER_NAME}" textAlign="Center" width="100%"/> -->
                                <Label text="Family Part-No"/>
                                <Label text="Supplier Name" textAlign="Center" width="100%"/>
                            </t:multiLabels>
                            <t:template>
                                <Text text="{list>supplier_name}" />
                            </t:template>
                        </t:Column>
                        <t:Column hAlign="Center"  width="12rem">
                            <!-- <Label text="{I18N>/HQ_NPD_BASE_PRICE}" /> -->
                            <Label text="(HQ) NPD  Base Price" />
                            <t:template>
                                <Text text="{list>hq_npd_base_price}" />
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:Table>
                <!--Part No List 끝-->
                
                <!-- File Upload 시작-->
                <UploadCollection
                    id="UploadCollection"
                    maximumFilenameLength="55"
                    maximumFileSize="10"
                    multiple="true"
                    sameFilenameAllowed="true"
                    instantUpload="false"
                    noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                    change="onChange"
                    fileDeleted="onFileDeleted"
                    filenameLengthExceed="onFilenameLengthExceed"
                    fileSizeExceed="onFileSizeExceed"
                    typeMissmatch="onTypeMissmatch"
                    uploadComplete="onUploadComplete"
                    beforeUploadStarts="onBeforeUploadStarts" />
                <!-- File Upload 끝-->

                <!-- Approval & Reference 시작 -->
                <HBox>
                    <Table id="ApprovalTable"       
                            growing="true"
                            growingThreshold="20"
                            class="sapFDynamicPageAlignContent sapUiSmallMargin" 
                            mode="None"
                            width="auto"
                            items="{appList>/undefined}"
                            >
                        <headerToolbar>
                            <OverflowToolbar>
                            <Label text="Approval Line"/>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column minScreenWidth="Tablet" hAlign="Center" mergeDuplicates="true" width="3rem" >
                                <Text text="No." />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" mergeDuplicates="true" width="6em" >
                                <Text text="Type" />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" width="16em" >
                                <Text text="Name/Dept" />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" width="6em" >
                                <Text text="Status" />
                            </Column> 
                            <Column minScreenWidth="Tablet" hAlign="Center"  >
                                <Text text="Comment" />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" width="8em" >
                                  <Text text="" />
                            </Column>					
                        </columns>
                        <items>
                             <ColumnListItem>
                                <cells>
                                    <!-- <ObjectIdentifier title="{Name}" text="{ProductId}"/> -->
                                    <Text text="{appList>no}" />
                                    <ComboBox  width="100%"
                                        selectedKey="{appList>type}" 
                                        enabled="{appList>editMode}"
                                        items="{
                                            path: 'org>/Org_Company',
                                            filters: [
                                                {path: 'tenant_id', operator: 'EQ', value1: 'L1100'}
                                            ],
                                            sorter: { path: 'company_code'}
                                        }"
                                        >
                                    <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                    </ComboBox>
                                    <SearchField enabled="{appList>editMode}" search=".onSearch" width="100%" placeholder="Search employee" value="{appList>nameDept}"/>
                                    <Text text="{appList>status}" />
                                    <Text text="{appList>comment}" />
                                    <Button icon="{appList>arrowUp}" press=".onSortUp(${appList>no})" tooltip="sort" visible="{= ${appList>arrowUp}===''?false:true }"></Button>
                                    <Button icon="{appList>arrowDown}" press=".onSortDown(${appList>no})"  visible="{= ${appList>arrowDown}===''?false:true }" tooltip="sort"></Button>
                                    <Button icon="sap-icon://delete" press=".setApprovalRemoveRow(${appList>no})" tooltip="삭제" visible="{appList>trashShow}"></Button>
                                </cells>
                            </ColumnListItem>   
                        </items>
                    </Table>
                    
                    <Table id="ReferenceTable"       
                            growing="true"
                            growingThreshold="20"
                            class="sapFDynamicPageAlignContent sapUiSmallMargin" 
                            mode="None"
                            width="auto"
                            items="{appList>/undefined}"
                            >
                        <headerToolbar>
                            <OverflowToolbar>
                            <Label text="Reference Line"/>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column minScreenWidth="Tablet" hAlign="Center" mergeDuplicates="true" width="3rem" >
                                <Text text="No." />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" mergeDuplicates="true" width="6em" >
                                <Text text="Type" />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" width="16em" >
                                <Text text="Name/Dept" />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" width="6em" >
                                <Text text="Status" />
                            </Column> 
                            <Column minScreenWidth="Tablet" hAlign="Center"  >
                                <Text text="Comment" />
                            </Column>
                            <Column minScreenWidth="Tablet" hAlign="Center" width="8em" >
                                  <Text text="" />
                            </Column>					
                        </columns>
                        <items>
                             <ColumnListItem>
                                <cells>
                                    <!-- <ObjectIdentifier title="{Name}" text="{ProductId}"/> -->
                                    <Text text="{appList>no}" />
                                    <ComboBox  width="100%"
                                        selectedKey="{appList>type}" 
                                        enabled="{appList>editMode}"
                                        items="{
                                            path: 'org>/Org_Company',
                                            filters: [
                                                {path: 'tenant_id', operator: 'EQ', value1: 'L1100'}
                                            ],
                                            sorter: { path: 'company_code'}
                                        }"
                                        >
                                    <core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
                                    </ComboBox>
                                    <SearchField enabled="{appList>editMode}" search=".onSearch" width="100%" placeholder="Search employee" value="{appList>nameDept}"/>
                                    <Text text="{appList>status}" />
                                    <Text text="{appList>comment}" />
                                    <Button icon="{appList>arrowUp}" press=".onSortUp(${appList>no})" tooltip="sort" visible="{= ${appList>arrowUp}===''?false:true }"></Button>
                                    <Button icon="{appList>arrowDown}" press=".onSortDown(${appList>no})"  visible="{= ${appList>arrowDown}===''?false:true }" tooltip="sort"></Button>
                                    <Button icon="sap-icon://delete" press=".setApprovalRemoveRow(${appList>no})" tooltip="삭제" visible="{appList>trashShow}"></Button>
                                </cells>
                            </ColumnListItem>   
                        </items>
                    </Table>              
                </HBox>
                <!-- Approval & Reference 끝 -->
                
                <!-- Text Editor 시작 -->
                <Panel>
                    <headerToolbar>
                        <OverflowToolbar>
                            <Title text="Comment"/>
                        </OverflowToolbar>
                    </headerToolbar>
                    <content>
                        <layout:VerticalLayout id="idVerticalLayout" class="sapUiContentPadding" width="100%">
                        </layout:VerticalLayout>
                    </content>
                </Panel>
                <!-- Text Editor 끝 -->
            
            </VBox>
        </f:content>
        <!-- DynamicPage Footer -->
		<f:footer>
			<OverflowToolbar>
                <ToolbarSpacer />
                <Button
                    text="Save" press=".onSave" />
                <Button
                    type="Emphasized"
                    text="Submit"
                    press=".onSubmit" />
			</OverflowToolbar>
		</f:footer>
    </f:DynamicPage>
</mvc:View>