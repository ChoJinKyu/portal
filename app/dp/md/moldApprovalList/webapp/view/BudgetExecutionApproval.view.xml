<!--
    @description : 예산집행품의 화면 
    @date        : 2020.12.22 
    @author      : jinseon.lee 
-->
<mvc:View controllerName="dp.md.moldApprovalList.controller.BudgetExecutionApproval" 
  xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns:form="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" 
    xmlns:layout="sap.ui.layout"
    xmlns:tnt="sap.tnt"
    xmlns:sc="sap.suite.ui.commons"
    xmlns:si="sap.suite.ui.commons.statusindicator"
    xmlns:u="sap.ui.unified" 
    xmlns:table="sap.ui.table" 
    xmlns="sap.m"
	height="100%">

	<uxap:ObjectPageLayout 
        id="page"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
        upperCaseAnchorBar="false"
		showFooter="true"
		editHeaderButtonPress="handleEditBtnPress" >
		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
					<Title text="Budget Execution Approval" wrapping="true" />
				</uxap:expandedHeading>

				<uxap:snappedHeading>
                    <FlexBox fitContainer="true" alignItems="Center">
						<Title text="Budget Execution Approval" wrapping="true"/>
					</FlexBox>
				</uxap:snappedHeading>

			    <uxap:expandedContent>
				</uxap:expandedContent>

				<uxap:snappedContent>
				</uxap:snappedContent>

				<uxap:snappedTitleOnMobile>
				</uxap:snappedTitleOnMobile>

				<uxap:actions>
				    
				</uxap:actions>

                <uxap:navigationActions>
					<OverflowToolbarButton type="Transparent" icon="sap-icon://decline" text="back" tooltip="back to the list" press=".onPageNavBackButtonPress" />
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap" >
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <ObjectStatus
                        title="Report No"
                        text="{appMaster>/approval_number}"/>
                    <ObjectStatus
                        title="Requester"
                        text="[{appMaster>/requestor_empno}]{appMaster>/user_local_name}"/>
                    <ObjectStatus
                        title="Request Date"
                        text="{appMaster>/request_date}"/>
				</layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<Label text="Status :"/>
                    <ObjectStatus
                        class="sapMObjectStatusLarge"
                        text="{= ${appMaster>/approval_number} === undefined ?'New':''}{appMaster>/approve_status_code_nm}"
                        state="Error" />
				</layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                      <HBox>
                        <Title text="Process"/>
                    </HBox>
                    <HBox>
                        <sc:MicroProcessFlow>
                            <sc:content>
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem" icon="sap-icon://complete" />
                                <sc:MicroProcessFlowItem state="Error" stepWidth="3rem" icon="sap-icon://circle-task" />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem"  />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem"  />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem"  />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem" />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem" />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem" />
                                <sc:MicroProcessFlowItem state="None" stepWidth="3rem" />
                            </sc:content>
                        </sc:MicroProcessFlow>
                    </HBox>
                    <HBox>
                        <Text text=" PR" renderWhitespace="true" />
                        <Text text="Budget" width="6em" textAlign="Right" />
                        <Text text="RFQ" width="6em" textAlign="Center" />
                        <Text text="   Mold&#10;   Spec" renderWhitespace="true" />
                        <Text text="Purchase&#10; Contract" width="8em" textAlign="Center" />
                        <Text text="PO" renderWhitespace="true" />
                        <Text text="RCV" width="5em" textAlign="Right" />
                        <Text text="Lease&#10;Contract" width="7.5em" textAlign="Center" />
                        <Text text="Invoice" />
                    </HBox>
                </layout:VerticalLayout>
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections id="pss">

			<uxap:ObjectPageSection  id="pageSectionMain" titleUppercase="true" title="General Info">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageGeneralInfoSection">
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

            <uxap:ObjectPageSection titleUppercase="false" title="Item for Budget Execution">
				<uxap:subSections>
                    <uxap:ObjectPageSubSection> 
                        <form:SimpleForm editable="true" 
                         layout="ResponsiveGridLayout" 
                         labelSpanXL="2" 
                         labelSpanL="2" 
                         labelSpanM="2" 
                         labelSpanS="2" 
                         adjustLabelSpan="false" 
                         emptySpanXL="0" 
                         emptySpanL="0" 
                         emptySpanM="0" 
                         emptySpanS="0" 
                         columnsXL="2" 
                         columnsL="1" 
                         columnsM="1" 
                         width="70%"
                         singleContainerFullSize="true">
			        <form:content>
                    <VBox height="6em">
					<!-- Budget Type -->
					<Label text="Budget Type" required="true"/>
					<SegmentedButton visible="{mode>/editFlag}"
                                     id="segInspection" 
                                     selectedKey="{mdCommon>/investment_ecst_type_code}" 
                                     width="100%" 
                                     items="{ path : 'util>/Code',
                                              filters : [
                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L1100'},
                                                {path : 'group_code', operator : 'EQ', value1 : 'DP_MD_BUDGET_TYPE'}
                                              ]
                                            }">
						<items>
							<SegmentedButtonItem width="6em" text="{util>code_name}" key="{util>code}"/>
						</items>
					</SegmentedButton>
                     <!-- view Mode -->
                    <Text text="{mdCommon>/investment_ecst_type_code_nm}" visible="{mode>/viewFlag}"/>
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="Acquisition Department" required="true"/>
                    <!-- edit Mode -->
					<Input id="acquisition_department"  value="" class="readonlyField" editable="{mode>/editFlag}" showValueHelp="true" />
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="Account Department" required="true"/>
                    <!-- edit Mode -->
					<ComboBox id="accounting_department"
                              editable="{mode>/editFlag}" 
                              class="readonlyField"
                              width="100%"  
                              selectedKey="{mdCommon>/accounting_department_code}" 
                              items="{}">
						<core:Item key="{util>code}" text="{util>code_description}"/>
					</ComboBox>

					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="Import Company"/>
                    <!-- edit Mode -->
					<ComboBox  editable="{mode>/editFlag}" 
                              class="readonlyField"
                              width="100%" 
                              id="importCompany" 
                              selectionChange=".onBCompanyChange"
                              selectedKey="{mdCommon>/import_company_code}" 
                              enabled="{=${mdCommon>/investment_ecst_type_code}!=='S'?false:true}"
                              items="{
                                   path: 'org>/Company',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L1100'}
                                        ],
                                        sorter: { path: 'company_code'}
                              }">
						<core:Item key="{org>company_code}" text="[{org>company_code}] {org>company_name}" />
					</ComboBox>
                   
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<!-- projectcode  {I18N>/PROJECT_CODE}-->
					<Label text="Project Code" required="true"/> 
                    <!-- edit Mode -->
					<ComboBox editable="{mode>/editFlag}" 
                              class="readonlyField"
                              width="100%" 
                              id="projectCode" 
                              selectedKey="{mdCommon>/project_code}" 
                              items="{}">
						<core:Item key="{util>code}" text="{util>code_description}"/>
					</ComboBox>

					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="Import Plant"/>
					<ComboBox width="100%" 
                              editable="{mode>/editFlag}" 
                              class="readonlyField"
                              id="importPlant" 
                              selectedKey="{mdCommon>/import_company_org_code}" 
                              enabled="{=${mdCommon>/investment_ecst_type_code}!=='S'?false:true}"
                              items="{
                                  path: 'importPlant>/Pur_Operation_Org'
                              }">
						<core:Item key="{importPlant>org_code}" text="[{importPlant>org_code}]{importPlant>org_name}" />
					</ComboBox>
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="{I18N>/ACCOUNT}" required="true"/>
					<ComboBox editable="{mode>/editFlag}" 
                              class="readonlyField"  
                              width="100%" 
                              id="account" 
                              required="true"
                              selectedKey="{mdCommon>/account_code}" 
                              items="{ path : 'util>/Code',
                                        filters : [
                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L1100'},
                                            {path : 'group_code', operator : 'EQ', value1 : 'DP_MD_ACCOUNT_NEW'}
                                        ]
                                    }">
						<core:Item key="{util>code}" text="{util>code_name}"/>
					</ComboBox>
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="{I18N>/CUSTOMER}"/>
					<Input value="" showValueHelp="true" visible="{mode>/editFlag}" /> 
                    <Text text="" visible="{mode>/viewFlag}"/>
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="Balanced Budget"/>
					<HBox alignItems="End" justifyContent="End">
						<ObjectStatus text="{mdCommon>/provisional_budget_amount}"/>
						<ObjectStatus text="  KRW" state="Error"/>
					</HBox>
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<VBox  height="6em">
					<Label text="Customer PO No"/>
					<Input value=""  visible="{mode>/editFlag}" />
                    <Text text="" visible="{mode>/viewFlag}"/>
					<layoutData>
						<layout:GridData span="XL6 L6 M12 S12"/>
					</layoutData>
				</VBox>
				<HBox>
					<VBox class="sapUiSmallMargin">
						<Label text="{I18N>/AFFILIATE}"/>
						<ObjectStatus text="[{company>/company_code}] {company>/company_name}" state="Error"/>
					</VBox>
					<VBox class="sapUiSmallMargin">
						<Label text="{I18N>/BUSINESS_DIVISION}"/>
						<ObjectStatus text="[{plant>/org_code}] {plant>/org_name}" state="Error"/>
					</VBox>
				</HBox>
                </form:content>
		        </form:SimpleForm>
                </uxap:ObjectPageSubSection>
                <uxap:ObjectPageSubSection id="pageItemSection">
                
                </uxap:ObjectPageSubSection>
                    
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<uxap:ObjectPageSection titleUppercase="false" title="Attachments">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageAttachmentsSection" >
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<uxap:ObjectPageSection titleUppercase="false" title="Approval Line">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageApprovalLineSection" >
                    </uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

		</uxap:sections>
		<uxap:footer>
			<OverflowToolbar>
				<ToolbarSpacer />
                <Button type="Transparent" text="Edit"      press=".onPageEditButtonPress" visible="{= ${appMaster>/approve_status_code} === 'AR'?false:${mode>/viewFlag} }"/>
                <Button type="Transparent" text="Cancel"    press=".onPageCancelEditButtonPress" visible="{mode>/editFlag}" />
				<Button type="Transparent" text="Draft"     press=".onPageDraftButtonPress"   visible="{mode>/editFlag}"/>
                <Button type="Transparent" text="Request Cancel"  press=".onPageRequestCancelButtonPress"   visible="{=${appMaster>/approve_status_code}==='AR'?true:false}" />
				<Button type="Transparent" text="Preview"   press=".onPagePreviewButtonPress"  />
				<Button type="Emphasized"  text="Request"   press=".onPageRequestButtonPress" visible="{=${appMaster>/approve_status_code}==='AR'?false:true}"/>
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>