<core:FragmentDefinition xmlns="sap.m" 
                         xmlns:uxap="sap.uxap" 
                         xmlns:form="sap.ui.layout.form" 
                         xmlns:core="sap.ui.core" 
                         xmlns:layout="sap.ui.layout" 
                         xmlns:tnt="sap.tnt" 
                         xmlns:co="sap.suite.ui.commons" 
                         xmlns:si="sap.suite.ui.commons.statusindicator" 
                         xmlns:u="sap.ui.unified" 
                         xmlns:table="sap.ui.table"
                         xmlns:smartForm="sap.ui.comp.smartform" 
                         xmlns:smartMultiInput="sap.ui.comp.smartmultiinput"
                         xmlns:dnd="sap.ui.core.dnd"
                         >
	<VBox class="sapUiSmallMargin">
		<form:SimpleForm editable="true" 
                         layout="ResponsiveGridLayout" 
                         labelSpanXL="2" 
                         labelSpanL="2" 
                         labelSpanM="2" 
                         labelSpanS="2" 
                         adjustLabelSpan="false" 
                         emptySpanXL="0" 
                         emptySpanL="0" 
                         emptySpanM="0" 
                         emptySpanS="0" 
                         columnsXL="2" 
                         columnsL="1" 
                         columnsM="1" 
                         singleContainerFullSize="true">
			<form:content>
				<!-- Approval Line 
                description : UI 드리그앤 드롭으로 변경 
                date : 2021.01.21 
                author : jinseon.lee 
                --> 
				<Table id="ApproverTable"       
                        growing="true"
                        growingThreshold="20"
                        class="sapFDynamicPageAlignContent" 
                        updateFinished=".onListMainTableUpdateFinished"
                        mode="None"
                        width="auto"
                        items="{approver>/Approvers}" 
                        >
                    <headerToolbar>
                        <OverflowToolbar>
                            <Label text="Approval Line"/>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column id="approver_empno" minScreenWidth="Tablet" hAlign="Center" visible="false" width="3em" >
                            <Text text="approver_empno" />
                        </Column>
                        <Column id="no" minScreenWidth="Tablet" hAlign="Center"  width="3em" >
                            <Text text="No." />
                        </Column>
                        <Column id="type" minScreenWidth="Tablet" hAlign="Center" width="10em" >
                            <Text text="Type" />
                        </Column>
                        <Column id="nameDept" minScreenWidth="Tablet" hAlign="Center" width="20em" >
                            <Text text="Name/Dept" />
                        </Column>
                        <Column id="status" minScreenWidth="Tablet" hAlign="Center" width="12em" >
                            <Text text="Status" />
                        </Column> 
                        <Column id="comment" minScreenWidth="Tablet" hAlign="Center" >
                            <Text text="Comment" />
                        </Column>
                        <Column id="up" minScreenWidth="Tablet" hAlign="Center" width="3em" >
                                <Text text="" />
                        </Column>					
                        <Column id="down" minScreenWidth="Tablet" hAlign="Center" width="3em" >
                                <Text text="" />
                        </Column>					
                        <Column id="action" minScreenWidth="Tablet" hAlign="Center" width="3em" >
                                <Text text="" />
                        </Column>
                    </columns>
                    <dragDropConfig>
                        <dnd:DragInfo groupName="itemsgroup" 
                            sourceAggregation="items"
                             dragStart="onDragStart"
                            />
                        <dnd:DropInfo groupName="dragdrop" drop="onDragDrop"/>
                    </dragDropConfig>					
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{approver>approver_empno}" />
                                <Text text="{approver>approve_sequence}" />
                                <ComboBox width="100%"
                                    selectedKey="{approver>approver_type_code}" 
                                    items="{ path : 'util>/Code',
                                                filters : [
                                                    {path : 'tenant_id', operator : 'EQ', value1 : 'L2600'},
                                                    {path : 'group_code', operator : 'EQ', value1 : 'CM_APPROVER_TYPE'}
                                                ],
                                                sorter: { path: 'sort_no'}
                                            }"
                                    enabled="{= ${approver>editMode}?${mode>/editFlag}:false }">  
                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                </ComboBox>
                                <SearchField search=".onApproverSearch" width="100%"
                                    value="{approver>approver_name}" placeholder="Search employee" 
                                    enabled="{= ${approver>editMode}?${mode>/editFlag}:false }"/>
                                <Text text="{approver>approve_status_code}" />
                                <Text text="{approver>approve_comment}" />
                                <Button icon="{approver>arrowUp}" press=".onApproverSortUp(${approver>approve_sequence})" tooltip="sort" visible="{= ${approver>arrowUp}!==''?${mode>/editFlag}:false }"></Button>
                                <Button icon="{approver>arrowDown}" press=".onApproverSortDown(${approver>approve_sequence})" tooltip="sort" visible="{= ${approver>arrowDown}===''?false:${mode>/editFlag} }"></Button>
                                <Button icon="sap-icon://delete" press=".setApproverRemoveRow(${approver>approve_sequence})" tooltip="삭제" visible="{= ${approver>trashShow}?${mode>/editFlag}:false }"></Button>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table> 
			</form:content>
		</form:SimpleForm>
		<form:SimpleForm editable="true" 
                         layout="ResponsiveGridLayout" 
                         labelSpanXL="2" 
                         labelSpanL="2" 
                         labelSpanM="2" 
                         labelSpanS="2" 
                         adjustLabelSpan="false" 
                         emptySpanXL="0" 
                         emptySpanL="0" 
                         emptySpanM="0" 
                         emptySpanS="0" 
                         columnsXL="2" 
                         columnsL="1" 
                         columnsM="1" 
                         singleContainerFullSize="true">
			<form:content>
				<VBox class="sapUiSmallMarginBegin">
                    <Toolbar>
                    <Label text="Referer" />
                    <ToolbarSpacer/>
                    <HBox alignItems="End" justifyContent="End" >
                        <Label text="Adress Book" class=""/>
                        <core:Icon 
                            src="sap-icon://address-book"
                            class="size2 sapUiSmallMarginBeginEnd" 
                            >
                        </core:Icon>
                    </HBox>
                    </Toolbar>
                    <layout:VerticalLayout class="sapUiContentPadding" width="100%"> 
                        <MultiInput id="referMulti"
                                placeholder="Choose codes from the ValueHelp"
                                showValueHelp="true" 
                                valueHelpRequest=".onMultiInputWithCodeValuePress"
                                editable="{mode>/editFlag}"
                                >
                        </MultiInput>
                        <!-- <MultiComboBox
                            selectionChange="handleSelectionChangeReferer"
                            selectionFinish="handleSelectionFinishReferer"
                            width="100%" 
                            selectedKeys="{refererMultiCB>/refer}"
                            items="{ path: '/RefererSearch',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2600'}
                                        ]
                                    }"
                            editable="{mode>/editFlag}">
                            <core:Item key="{employee_number}" text="{s_referer_name}" />
                        </MultiComboBox> -->
                    </layout:VerticalLayout>
                    <layoutData>
                        <layout:GridData span="XL12 L12 M12 S12" />
                    </layoutData> 
                </VBox>
			</form:content>
		</form:SimpleForm>
	</VBox>
</core:FragmentDefinition>
