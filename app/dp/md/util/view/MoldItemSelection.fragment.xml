<!-- 
   @description : 품의서 Participating Supplier 항목의 Add 버튼 클릭 공통 
   @author : jinseon.lee
   @date : 2020.12.10 
-->
<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core" 
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout" >
    <Dialog id="dialogMolItemSelection" class="sapUiSmallMargin" title="" contentWidth="45%" >
        <VBox class="sapUiSmallMargin">
            <form:SimpleForm
                editable="false"
                layout="ResponsiveGridLayout"
                labelSpanXL="4"
                labelSpanL="3"
                labelSpanM="4"
                labelSpanS="12"
                adjustLabelSpan="false"
                emptySpanXL="0"
                emptySpanL="4"
                emptySpanM="0"
                emptySpanS="0"
                singleContainerFullSize="true" >
                    
                    <form:content>
                        <VBox>
                            <Label text = "{I18N>/COMPANY}" required="true"/> 
                            <ComboBox id="moldItemPopCompany"  width="100%" selectedKey="{moldItemPop>/company_code}" 
                                        enabled="false" items="{ path: 'moldSelectionCompanyPopList>/Org_Company' }">
                                <items>
                                    <core:Item key="{moldSelectionCompanyPopList>company_code}"  text="[{moldSelectionCompanyPopList>company_code}] {moldSelectionCompanyPopList>company_name}" />
                                </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL5 L5 M5 S5" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "{I18N>/PLANT}" required="true"/> 
                            <ComboBox id="moldItemPopPlant"  width="100%" selectedKey="{moldItemPop>/org_code}" 
                                    enabled="false" items="{ path: 'moldSelectionPlantPopList>/Divisions'}">
                                <items>
                                    <core:Item key="{moldSelectionPlantPopList>org_code}" text="[{moldSelectionPlantPopList>org_code}]{moldSelectionPlantPopList>org_name}" />
                                </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL5 L5 M5 S5" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Button id="btnMoldItemPopSearch" text="{I18N>/SEARCH}" class="sapUiSmallMargin" type="Emphasized" press=".onMoldItemSelection"/>
                               <layoutData>
                                <layout:GridData span="XL2 L2 M2 S2" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "{I18N>/MODEL}"/> 
                             <Input id="moldItemPopModel" width="100%"/>
                             <layoutData>
                                <layout:GridData span="XL5 L5 M5 S5" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Part No"/>
                             <Input id="moldItemPopPartNo" width="100%"/> 
                             <layoutData>
                                <layout:GridData span="XL5 L5 M5 S5" />
                            </layoutData> 
                        </VBox>
                       </form:content>
                    <form:content>
                    <HBox>
                        <Table id="popMoldItemSelectTable"       
                            growing="true"
                            growingThreshold="3"
                            class="sapFDynamicPageAlignContent" 
                            updateFinished="" 
                            selectionChange=".selectMoldItemChange" 
                            mode="MultiSelect"
                            width="auto"
                            items="{moldItemPopList>/MoldItemSelect}"
                            >
                         <headerToolbar>
                            <OverflowToolbar>
                                <Label text="{= ${moldItemPop>/sLength} > 0 ? ( 'Selected : '+${moldItemPop>/sLength} ) : '' }"/>
                            </OverflowToolbar>
                        </headerToolbar> 
                        <columns>
                            <Column id="modelItem_mold_id" visible="false" >
                                <Text text="mold_id" />
                            </Column>
                            <Column id="modelItem_model" minScreenWidth="Tablet" hAlign="Center"   >
                                <Text text="{I18N>/MODEL}" />
                            </Column>
                            <Column id="modelItem_modelPartNo" minScreenWidth="Tablet" hAlign="Center" >
                                <Text text="Model Part No" />
                            </Column>
                            <Column id="modelItem_seq" minScreenWidth="Tablet" hAlign="Center"  >
                                <Text text="Seq" />
                            </Column>
                            <Column id="modelItem_description" minScreenWidth="Tablet" hAlign="Center"  >
                                <Text text="Description" />
                            </Column> 
                            <Column id="modelItem_moldItemTypeNm" minScreenWidth="Tablet" hAlign="Center" width="8em"  >
                                <Text text="Mold Item Type" />
                            </Column>
                            <Column id="modelItem_moldItemTypeCode" visible="false"  minScreenWidth="Tablet" hAlign="Center" width="8em"  >
                                <Text text="Mold Item Type" />
                            </Column>
                            <Column id="modelItem_bookCurrency" visible="false" minScreenWidth="Tablet" hAlign="Center"  >
                                  <Text text="Book Currency" />
                            </Column>					
                            <Column id="modelItem_budgetAmount" visible="false" minScreenWidth="Tablet" hAlign="Center"  >
                                  <Text text="Budget Amount" />
                            </Column>					
                            <Column visible="false" >
                                  <Text text="family_part_number_1" />
                            </Column>					
                            <Column visible="false" >
                                  <Text text="family_part_number_2" />
                            </Column>					
                            <Column  visible="false">
                                  <Text text="family_part_number_3" />
                            </Column>					
                            <Column visible="false" >
                                  <Text text="family_part_number_4" />
                            </Column>					
                            <Column visible="false" >
                                  <Text text="family_part_number_5" />
                            </Column>																	
                            <Column visible="false" >
                                  <Text text="currency_code" />
                            </Column>
                            <Column visible="false" >
                                  <Text text="purchasing_amount" />
                            </Column>					
                            <Column visible="false" >
                                  <Text text="supplier_code" />
                            </Column>					
                            <Column  visible="false">
                                  <Text text="target_amount" />
                            </Column>					
                            <Column visible="false" >
                                  <Text text="mold_production_type_code" />
                            </Column>
                            <Column visible="false" >
                                  <Text text="account_code" />
                            </Column>
                        </columns>
                        <items>
                             <ColumnListItem>
                                <cells>
                                    <!-- <ObjectIdentifier title="{Name}" text="{ProductId}"/> -->
                                    <Text text="{moldItemPopList>mold_id}" />
                                    <Text text="{moldItemPopList>model}" />
                                    <Text text="{moldItemPopList>mold_number}" />
                                    <Text text="{moldItemPopList>mold_sequence}" />
                                    <Text text="{moldItemPopList>spec_name}" />
                                    <Text text="{moldItemPopList>mold_item_type_code_nm}" />
                                    <Text text="{moldItemPopList>mold_item_type_code}" />
                                    <Text text="{moldItemPopList>book_currency_code}" />
                                    <Text text="{moldItemPopList>provisional_budget_amount}" />
                                    <Text text="{moldItemPopList>family_part_number_1}" />
                                    <Text text="{moldItemPopList>family_part_number_2}" />
                                    <Text text="{moldItemPopList>family_part_number_3}" />
                                    <Text text="{moldItemPopList>family_part_number_4}" />
                                    <Text text="{moldItemPopList>family_part_number_5}" />
                                    <Text text="{moldItemPopList>currency_code}" />
                                    <Text text="{moldItemPopList>purchasing_amount}" />
                                    <Text text="{moldItemPopList>supplier_code}" />
                                    <Text text="{moldItemPopList>target_amount}" />
                                    <Text text="{moldItemPopList>mold_production_type_code}" />
                                    <Text text="{moldItemPopList>account_code}" />
                                </cells>
                            </ColumnListItem>   
                            </items>
                            
                        </Table>
                         <layoutData>
                            <layout:GridData span="XL12 L12 M12 S12" />
                        </layoutData> 
                       </HBox>
                         </form:content>
                  </form:SimpleForm>
            </VBox>       
      
        <ToolbarSpacer/>
        <HBox alignItems="End" justifyContent="End" >
            <Button text="{I18N>/CANCEL}" type="Transparent" class="sapUiSmallMarginEnd" press=".onExit"/>
            <Button text="{I18N>/APPLY}" class="sapUiSmallMarginEnd" type="Emphasized" press=".onMoldItemSelectionApply"/>
        </HBox>
    </Dialog>
</core:FragmentDefinition>
