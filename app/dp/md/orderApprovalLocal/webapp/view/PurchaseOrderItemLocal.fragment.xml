<core:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:uxap="sap.uxap" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" 
    xmlns:layout="sap.ui.layout" 
    xmlns:tnt="sap.tnt" 
    xmlns:co="sap.suite.ui.commons" 
    xmlns:si="sap.suite.ui.commons.statusindicator" 
    xmlns:u="sap.ui.unified" 
    xmlns:table="sap.ui.table">
	<VBox class="sapUiSmallMargin">
		<form:SimpleForm editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
			<form:content>
                <HBox>
                    <VBox class="sapUiSmallMargin">
                        <Label text="{I18N>/AFFILIATE}" />
                        <ObjectStatus
                            text="[{company>/company_code}] {company>/company_name}" 
                            state="Error"
                            />
                    </VBox>
                    <VBox class="sapUiSmallMargin">
                        <Label text="{I18N>/BUSINESS_DIVISION}" />
                        <ObjectStatus
                            text="[{plant>/plant_code}] {plant>/plant_name}" 
                            state="Error"
                            />
                    </VBox>
                </HBox>
            </form:content>
        </form:SimpleForm>
        <form:SimpleForm editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
            <form:content>
				<!-- Purchase Order Item Table -->
				<table:Table id="poItemTable"
                    selectionMode="MultiToggle"
                    visibleRowCountMode="Auto"
                    rows="{appDetail>/ApprovalDetails}"
                    cellClick=".onCellClick"
                    rowSelectionChange=".onCheck">
                    <table:extension>
                        <OverflowToolbar>
                            <ToolbarSpacer/>
                            <Button id="btnPoItemAdd"    type="Transparent" text="{I18N>/ROW_ADD}" press=".onPoItemAddRow" >
                                <customData>
                                    <core:CustomData key="multi" value="true" />
                                </customData>
                            </Button>
                            <Button id="btnPoItemDelete" type="Transparent" text="{I18N>/ROW_DELETE}"  press=".onPoItemDelRow" />
                        </OverflowToolbar>
                    </table:extension>                             
                    <table:columns>
                        <table:Column id="moldIdColumn" width="10em" >
                            <Label text="Mold ID"/>
                            <table:template>
                                <Text id="moldId" text="{appDetail>mold_id}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="moldModelColumn" width="15em" >
                            <Label text="Model"/>
                            <table:template>
                                <Text id="model" text="{appDetail>model}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="moldPartNoColumn" width="8em" hAlign="Center">
                            <Label text="Mold No"/>
                            <table:template>
                                <Text id="mold_number" text="{appDetail>mold_number}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="moldSeqColumn" width="3em" hAlign="Center">
                            <Label text="Seq"/>
                            <table:template>
                                <Text id="mold_sequence" text="{appDetail>mold_sequence}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="moldDescriptionColumn" width="12em">
                            <Label text="Description"/>
                            <table:template>
                                <Text id="spec_name" text="{appDetail>spec_name}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="moldItemTypeColumn" width="8em" hAlign="Center">
                            <VBox>
                            <Label text="Mold Item"/>
                            <Label text="Type"/>
                            </VBox>
                            <table:template>
                                <ComboBox   id="mold_item_type_code"
                                            selectedKey="{appDetail>mold_item_type_code}"
                                            items="{
                                                        path : 'util>/CodeDetails',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L1100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'DP_MD_ITEM_TYPE'}
                                                        ]
                                                    }"
                                editable="false" class="readonlyField" >
                                    <core:Item key="{util>code}" text="{util>code_description}" />
                                </ComboBox>
                            </table:template>
                        </table:Column>
                        <table:Column id="bookCrrencyColumn" width="6em" hAlign="Center">
                            <VBox>
                            <Label text="Book"/>
                            <Label text="Currency"/>
                            </VBox>
                            <table:template>
                                <Text id="bookCurrency" text="{appDetail>book_currency_code}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="budetAmountColumn" width="7em" hAlign="End">
                            <VBox>
                            <Label text="Budget"/>
                            <Label text="Amount"/>
                            </VBox>
                            <table:template>
                                <ObjectIdentifier text="{
                                    path: 'appDetail>provisional_budget_amount',
                                    formatter: '.numberFormatter.toNumberString'
                                }"/>
                                <ObjectNumber id="budetAmount" emphasized="false"
                                number="{parts:[{path:'appDetail>provisional_budget_amount'},{path:'appDetail>book_currency_code'}],
                                        type: 'sap.ui.model.type.Currency',
                                        formatOptions: {showMeasure: false}}" />
                            </table:template>
                        </table:Column>
                        <table:Column id="crrencyColumn" width="6em" hAlign="Center">
                            <Label text="Currency"/>           
                            <table:template>
                                <Text id="currency" text="{appDetail>currency_code}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="poAmountColumn" width="7em" hAlign="End">
                            <VBox>
                            <Label text="PO"/>
                            <Label text="Amount"/>
                            </VBox>
                            <table:template>
                                <ObjectNumber id="poAmount" emphasized="false"
                                number="{parts:[{path:'appDetail>purchasing_amount'},{path:'appDetail>currency_code'}],
                                        type: 'sap.ui.model.type.Currency',
                                        formatOptions: {showMeasure: false}}" />
                            </table:template>
                        </table:Column>
                        <table:Column id="orderSupplierColumn" width="10em" hAlign="Center">
                            <VBox>
                            <Label text="Order"/>
                            <Label text="Supplier"/>
                            </VBox>
                            <table:template>
                                <Text id="orderSupplier" text="{appDetail>supplier_code}"/>
                            </table:template>
                        </table:Column>
                        <table:Column id="targetAmountColumn" width="7em" hAlign="Center">
                            <VBox>
                            <Label text="Target"/>
                            <Label text="Amount"/>
                            </VBox>
                            <table:template>
                                <Text id="targetAmount" emphasized="false"
                                number="{parts:[{path:'appDetail>target_amount'},{path:'appDetail>currency_code'}],
                                        type: 'sap.ui.model.type.Currency',
                                        formatOptions: {showMeasure: false}}" />
                            </table:template>
                        </table:Column>
                        <table:Column id="moldProductionTypeColumn" width="12em" hAlign="Center">
                            <VBox>
                            <Label text="Production"/>
                            <Label text="Type"/>
                            </VBox>
                            <table:template>
                                <ComboBox   id="mold_production_type_code"
                                            selectedKey="{appDetail>mold_production_type_code}"
                                            items="{
                                                        path : 'util>/CodeDetails',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L1100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'DP_MD_PROD_TYPE'}
                                                        ]
                                                    }"
                                editable="false" class="readonlyField" >
                                    <core:Item key="{util>code}" text="{util>code_description}" />
                                </ComboBox>
                            </table:template>
                        </table:Column>
                        <table:Column id="moldFamilyPartNoColumn" width="12em" hAlign="Center">
                            <VBox>
                            <Label text="Family"/>
                            <Label text="Part No"/>
                            </VBox>
                            <table:template>
                                <Text id="family_part_number_1" text="{appDetail>family_part_number_1}" />
                            </table:template>
                        </table:Column>
                    </table:columns>
                </table:Table>
			</form:content>
		</form:SimpleForm>
        <form:SimpleForm editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
			<form:content>
                <VBox>
                    <CheckBox id="partialPayment" text="Partial Payment" selected="{moldMaster>/MoldMasters/0/split_pay_type_code}" select=".onChangePayment" />
                    <layoutData>
                        <layout:GridData span="XL12 L12 M12 S12" />
                    </layoutData>
                </VBox>
                <VBox>
                    <Label text="Advanced"/>
                    <Input id="advanced" value="{moldMaster>/MoldMasters/0/prepay_rate}" textAlign="End" liveChange=".onChangePayment" />
                    <layoutData>
                        <layout:GridData span="XL2 L3 M6 S12" />
                    </layoutData>
                </VBox>
                <VBox>
                    <Label text="Part"/>
                    <Input id="part" value="{moldMaster>/MoldMasters/0/progresspay_rate}" textAlign="End" liveChange=".onChangePayment" />
                    <layoutData>
                        <layout:GridData span="XL2 L3 M6 S12" />
                    </layoutData>
                </VBox>
                <VBox>
                    <Label text="Residual"/>
                    <Input id="residual" value="{moldMaster>/MoldMasters/0/rpay_rate}" textAlign="End" liveChange=".onChangePayment" />
                    <layoutData>
                        <layout:GridData span="XL2 L3 M6 S12" />
                    </layoutData>
                </VBox>
            </form:content>
		</form:SimpleForm>
	</VBox>
</core:FragmentDefinition>
