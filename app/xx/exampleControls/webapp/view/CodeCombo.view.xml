<mvc:View controllerName="xx.exampleControls.controller.CodeCombo"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:lib-m="ext.lib.control.m"
    height="100%">

    <Page id="page" title="Code Combo" titleLevel="H2" class="sapUiContentPadding" showNavButton="true" navButtonPress=".onNavigationBackPress">
        <content>
            <VBox>

                <form:SimpleForm maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" class="searchBox"
                    adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                    <form:content>
                        <VBox>
                            <Label text="Input (Code): "></Label>
                            <lib-m:CodePicker id="searchCodePicker"
                                placeholder="Enter a code name"
                                suggestionItems="{
                                    path: '/',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                        {path: 'group_code', operator: 'EQ', value1: 'CM_CHAIN_CD'}
                                    ],
                                    serviceName: 'cm.util.CommonService',
                                    entityName: 'Code'
                                }">
                                <lib-m:CodePickerValueHelp />
                            </lib-m:CodePicker>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="CoboBox (Code): "></Label>
                            <lib-m:CodeComboBox id="searchCode1" width="100%" showSecondaryValues="true" 
                                useEmpty="true" 
                                items="{
                                    path: '/',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                        {path: 'group_code', operator: 'EQ', value1: 'CM_CHAIN_CD'}
                                    ],
                                    serviceName: 'cm.util.CommonService',
                                    entityName: 'Code'
                                }">
                            </lib-m:CodeComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="CoboBox (Tenant): "></Label>
                            <lib-m:CodeComboBox id="searchCode2" width="100%" showSecondaryValues="true" 
                                keyField="tenant_id" textField="tenant_name" useEmpty="true"
                                items="{
                                    path: '/',
                                    serviceUrl: 'srv-api/odata/v2/cm.util.OrgService/',
                                    entityName: 'Tenant'
                                }">
                            </lib-m:CodeComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="CoboBox (Currency): "></Label>
                            <lib-m:CodeComboBox id="searchCurrencyCombo" width="100%" showSecondaryValues="true" 
                                keyField="currency_code" textField="currency_code_name" 
                                useEmpty="true" emptyText="전체"
                                items="{
                                    path: '/',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                    ],
                                    sorter: {
                                        path: 'currency_code',
                                        descending: true
                                    },
                                    serviceName: 'cm.util.CommonService',
                                    entityName: 'Currency'
                                }">
                            </lib-m:CodeComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="MultiCoboBox (Code): "></Label>
                            <MultiComboBox id="searchMultiComboCode" width="100%" showSecondaryValues="true" 
                                items="{
                                    path: 'util>/Code',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                        {path: 'group_code', operator: 'EQ', value1: 'CM_CHAIN_CD'}
                                    ]
                                }">
                                <items>
                                    <core:ListItem key="{util>code}" text="{util>code_name}" additionalText="{util>code}"/>
                                </items>
                            </MultiComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <FlexBox alignItems="End" justifyContent="End" class="searchBoxButtonArea">
                            <Button text="Search" type="Emphasized" press=".onSearchButtonPress"/>
                            <layoutData>
                                <layout:GridData span="XL12 L12 M12 S12" />
                            </layoutData>
                        </FlexBox>
                    </form:content>
                </form:SimpleForm>

                <Table id="midTable" 
                        sticky="HeaderToolbar,ColumnHeaders" 
                        inset="false" 
                        items="{form>/list}"
                        class="sapFDynamicPageAlignContent" 
                        updateFinished=".onMidTableUpdateFinished"
                        mode="SingleSelectLeft" 
                        width="auto">
                    <columns>
                        <Column minScreenWidth="Tablet" hAlign="Center">
                            <Text text="Level" />
                        </Column>
                        <Column minScreenWidth="Tablet" hAlign="Center">
                            <Text text="Level Value" />
                        </Column>
                        <Column minScreenWidth="Tablet" hAlign="Center" >
                            <Text text="eMail" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem type="Inactive" press=".onMidTableItemPress">
                            <cells>
                                <Input value="{
                                        path: 'form>value2', 
                                        constraints: {

                                        }
                                    }"/>
                                <Input value="{
                                        path: 'form>value3', 
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            search: '\\S+@\\S+\\.\\S+'
                                        }
                                    }"/>
                                <Input value="{
                                        path: 'form>value4', 
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            search: '\\S+@\\S+\\.\\S+'
                                        }
                                    }"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

            </VBox>
        </content>
    </Page>
</mvc:View>