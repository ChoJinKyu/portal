<mvc:View controllerName="xx.exampleControls.controller.CodeCombo"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:lib-m="ext.lib.control.m"
    height="100%">

    <Page id="page" title="Code Combo" titleLevel="H2" class="sapUiContentPadding" showNavButton="true" navButtonPress=".onNavigationBackPress">
        <content>
            <VBox>

                <form:SimpleForm maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" class="searchBox"
                    adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                    <form:content>
                        <VBox>
                            <Label text="Test: "></Label>
                            <lib-m:CodeInput id="searchTest" width="100%" groupCode="CM_CHAIN_CD">
                            </lib-m:CodeInput>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="Code: "></Label>
                            <lib-m:CodeComboBox id="searchCode" width="100%" 
                                useEmpty="true" groupCode="CM_CHAIN_CD">
                                <!-- useEmpty="true"  textPattern="$text [= $[code] === '' ? '' : '['+$[code]+']' ]" groupCode="CM_CHAIN_CD"> -->
                                <!-- useEmpty="true"  textPattern="$text $(= $$(code)$ === '' ? '' : '('+$$(code)$+')' )$" groupCode="CM_CHAIN_CD"> -->
                            </lib-m:CodeComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="Tenant: "></Label>
                            <lib-m:TenantComboBox id="searchTenant" width="100%" 
                                useEmpty="true">
                            </lib-m:TenantComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label text="Currency: "></Label>
                            <lib-m:CurrencyComboBox id="searchCurrency" width="100%" 
                                useEmpty="true" emptyKey="ALL" emptyText="ALL" >
                            </lib-m:CurrencyComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>
                        </VBox>
                        <FlexBox alignItems="End" justifyContent="End" class="searchBoxButtonArea">
                            <Button text="Search" type="Emphasized" press=".onSearchButtonPress"/>
                            <layoutData>
                                <layout:GridData span="XL12 L12 M12 S12" />
                            </layoutData>
                        </FlexBox>
                    </form:content>
                </form:SimpleForm>

                <Table id="midTable" 
                        sticky="HeaderToolbar,ColumnHeaders" 
                        inset="false" 
                        items="{form>/list}"
                        class="sapFDynamicPageAlignContent" 
                        updateFinished=".onMidTableUpdateFinished"
                        mode="SingleSelectLeft" 
                        width="auto">
                    <columns>
                        <Column minScreenWidth="Tablet" hAlign="Center">
                            <Text text="Level" />
                        </Column>
                        <Column minScreenWidth="Tablet" hAlign="Center">
                            <Text text="Level Value" />
                        </Column>
                        <Column minScreenWidth="Tablet" hAlign="Center" >
                            <Text text="eMail" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem type="Inactive" press=".onMidTableItemPress">
                            <cells>
                                <Input value="{
                                        path: 'form>value2', 
                                        constraints: {

                                        }
                                    }"/>
                                <Input value="{
                                        path: 'form>value3', 
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            search: '\\S+@\\S+\\.\\S+'
                                        }
                                    }"/>
                                <Input value="{
                                        path: 'form>value4', 
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            search: '\\S+@\\S+\\.\\S+'
                                        }
                                    }"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

            </VBox>
        </content>
    </Page>
</mvc:View>