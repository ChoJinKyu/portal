<mvc:View
    class="sapUiSizeCompact"
    controllerName="cm.purOrgMgt.controller.purOrgMgt"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:layout="sap.ui.layout"
    xmlns:table="sap.ui.table"
    xmlns:form="sap.ui.layout.form"
    displayBlock="true">

    <App id="app">
        <f:DynamicPage id="purOrgMgtPage" toggleHeaderOnTitleClick="true" headerExpanded="true">
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>
                        <Title text="{i18n>appTitle}" />
                    </f:heading>
                    <f:snappedContent>
                    </f:snappedContent>
                    <f:expandedContent>
                    </f:expandedContent>
                    <f:actions>
                        <Button id="pageSearchButton" text="Search" type="Emphasized" press=".onSearch" />
                    </f:actions>
                    <f:navigationActions>
                        <Button icon="sap-icon://unfavorite" type="Transparent" />
                    </f:navigationActions>
                </f:DynamicPageTitle>

            </f:title>
            <f:header>
                <f:DynamicPageHeader pinnable="true">
                    <layout:HorizontalLayout>
                        <form:Form editable="true" width="100%">
                            <form:formContainers>
                                <form:FormContainer>
                                    <form:formElements>
                                        <form:FormElement>
                                            <form:fields>
                                                <VBox>
                                                    <Label text="테넌트" labelFor="searchTenantCombo" required="true"></Label>
                                                    <!-- items="{mSearch>/tenant/items}" -->
                                                    <ComboBox
                                                        id="searchTenantCombo"
                                                        showSecondaryValues="true"
                                                        required="true"
                                                        selectionChange=".onSelectionChange($event, 'tenant_id')"
                                                        width="100%"
                                                        items="{ 
                                                            path: 'org>/Org_Tenant',
                                                            filters: [
                                                            ]
                                                        }"
                                                    >
                                                    <items>
                                                        <core:ListItem key="{org>tenant_id}" text="{org>tenant_name}" additionalText="{org>tenant_id}"/>
                                                    </items>
                                                    </ComboBox>
                                                </VBox>
                                                <VBox>
                                                    <Label text = "회사" labelFor="searchCompanyCode"/> 
                                                    <ComboBox 
                                                        id="searchCompanyCode"
                                                        showSecondaryValues="true"
                                                        items="{
                                                            path: 'org>/Org_Company',
                                                            filters: [
                                                            ]
                                                        }"
                                                    >
                                                        <items>
                                                            <core:ListItem key="{org>company_code}" text="{org>company_name}" additionalText="{org>company_code}"/>
                                                        </items>
                                                    </ComboBox>

                                                </VBox>
                                                <VBox>
                                                    <Label text="조직유형" labelFor="searchOrgTypeCombo" required="false"></Label>
                                                    <ComboBox
                                                    id="searchOrgTypeCombo"
                                                    width="100%"
                                                    items="{
                                                        path: 'util>/Code',
                                                        filters: [
                                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                                            {path: 'group_code', operator: 'EQ', value1: 'CM_ORG_TYPE_CODE'}
                                                        ]
                                                    }">
                                                    <items>
                                                        <core:Item key="{util>code}" text="{util>code}: {util>code_description}" />
                                                    </items>
                                                    </ComboBox>
                                                </VBox>
                                                <VBox>
                                                    <Label text="사용여부" labelFor="searchUseFlag"></Label>
                                                    <SegmentedButton 
                                                        id="searchUseFlag"
                                                        selectedKey="" 
                                                        width="100%">
                                                        <items>
                                                            <SegmentedButtonItem text="All" width="3em"/>
                                                            <SegmentedButtonItem text="Yes" width="3em" key="true"/>
                                                            <SegmentedButtonItem text="No" width="3em" key="false"/>
                                                        </items>
                                                    </SegmentedButton>
                                                </VBox>
                                            </form:fields>
                                        </form:FormElement>
                                    </form:formElements>
                                </form:FormContainer>
                            </form:formContainers>
                            <form:layout>
                            <form:ResponsiveGridLayout columnsM="4" columnsL="4" columnsXL="4"/>
                            </form:layout>
                        </form:Form>
                    </layout:HorizontalLayout>
                </f:DynamicPageHeader>
            </f:header>
            <f:content>
                <VBox>        
                    <Table 
                        id="operationOrgTable"
                        items="{
                            path: 'list>/Pur_Operation_Org' 
                        }"
                        selectionMode="Single"
                        selectionBehavior="Row"
                        updateFinished="onMstUpdateFinished"
                        growing="true"
                        growingThreshold="100"
                    >
                        <headerToolbar>
                            <OverflowToolbar>
                                <Title text="구매 관리 ({= ${list>/Pur_Operation_Org}.length || 0})" level="H2"/>
                                <ToolbarSpacer/>
                                <Button id="mainTableAddButton" text="Add" type="Transparent" press=".onAdd" />
                                <ToolbarSeparator/>
                                <Button icon="sap-icon://action-settings" press=".onMainTablePersoButtonPressed" >
                                    <layoutData>
                                        <OverflowToolbarLayoutData priority="NeverOverflow" />
                                    </layoutData>
                                </Button>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <Column hAlign="Center">
                                <header>
                                    <Label text="테넌트"/>
                                </header>
                            </Column>
                            <Column hAlign="Center">
                                <header>
                                    <Label text="회사"/>
                                </header>
                            </Column>
                            <Column hAlign="Center">
                                <header>
                                    <Label text="조직유형"/>
                                </header>
                            </Column>

                            <Column hAlign="Center">
                                <header>
                                    <Label text="조직코드"/>
                                </header>
                            </Column>
                            <Column hAlign="Center">
                                <header>
                                    <Label text="조직명"/>
                                </header>
                            </Column>
                            <Column hAlign="Center" width="auto" minScreenWidth="Desktop" demandPopin="false">
                                <header>
                                    <Label text="구매조직코드"/>
                                </header>
                            </Column>
                            <Column hAlign="Center" width="auto" minScreenWidth="Desktop" demandPopin="false">
                                <header>
                                    <Label text="플랜트코드"/>
                                </header>
                            </Column>
                            <Column hAlign="Center" width="auto" minScreenWidth="Desktop" demandPopin="false">
                                <header>
                                    <Label text="관계사코드"/>
                                </header>
                            </Column>
                            <Column hAlign="Center" width="auto" minScreenWidth="Desktop" demandPopin="false">
                                <header>
                                    <Label text="사업본부코드"/>
                                </header>
                            </Column>
                            <Column hAlign="Center" width="auto" minScreenWidth="Desktop" demandPopin="false">
                                <header>
                                    <Label text="사업부코드"/>
                                </header>
                            </Column>
                            <Column hAlign="Center" width="auto" minScreenWidth="Desktop" demandPopin="false">
                                <header>
                                    <Label text="HQAU코드"/>
                                </header>
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem type="Navigation" id="codeMstColumnListItem" press=".onSelect">
                                <cells>
                                    <Text text="{list>tenant_id}"/>
                                    <Text text="{list>company_code}"/>
                                    <Text text="{list>org_type_code}"/>
                                    <Text text="{list>org_code}"/>
                                    <Text text="{list>org_name}"/>
                                    <Text text="{list>purchase_org_code}"/>
                                    <Text text="{list>plant_code}"/>
                                    <Text text="{list>affiliate_code}"/>
                                    <Text text="{list>bizunit_code}"/>
                                    <Text text="{list>bizdivision_code}"/>
                                    <Text text="{list>hq_au_code}"/>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </f:content>
        </f:DynamicPage>
    </App>
</mvc:View>