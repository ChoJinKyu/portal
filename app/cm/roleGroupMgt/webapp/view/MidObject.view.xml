<mvc:View controllerName="cm.roleGroupMgt.controller.MidObject" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
  xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
	height="100%">
	<uxap:ObjectPageLayout id="page"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="true">
		<uxap:headerTitle>
			<!-- 타이틀 영역 -->
			<uxap:ObjectPageDynamicHeaderTitle>
                <uxap:heading>
                    <HBox alignItems="End">
                        <OverflowToolbarButton type="Transparent" icon="sap-icon://nav-back" press=".onPageNavBackButtonPress"  tooltip="Close column" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                        <Title text="RoleGroup Details" wrapping="true" class="" />
                    </HBox>
                </uxap:heading>
                <uxap:navigationActions>
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<!-- 헤더 영역 -->
			<FlexBox wrap="Wrap" visible="false">
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="tenantID: " />
						<Text text="{master>/tenant_id}"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="Created: "/>
						<Text text="{master>/create_user_id} / {master>/system_create_dtm}"/>
					</layout:HorizontalLayout>
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="Updated: "/>
						<Text text="{master>/update_user_id} / {master>/system_update_dtm}"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>
			</FlexBox>
		</uxap:headerContent> 

		<uxap:sections>
			<!-- Master 에 관한 정보 -->
			<uxap:ObjectPageSection id="pageSectionMain" titleUppercase="false" title="Role Group Info Details">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection1" >
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- 생성 및 수정에 관한 정보 탭 (기 생성 데이타에 대하여 중간에 추가되고 탭 클릭시 이동도 한다.) -->
			<uxap:ObjectPageSection titleUppercase="false" title="Managed Values" visible="{= !${midObjectView>/isAddedMode}}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<form:SimpleForm editable="false">
							<Label text="Created by"/>
							<Text text="{master>/create_user_id}"/>
							<Label text="Created At"/>
							<Text text="{
									path: 'master>/system_create_dtm',
									formatter: '.dateFormatter.toUTCDateTimeString'
								}"/>
							<Label text="Updated by"/>
							<Text text="{master>/update_user_id}"/>
							<Label text="Updated At"/>
							<Text text="{
									path: 'master>/system_update_dtm',
									formatter: '.dateFormatter.toUTCDateTimeString'
								}"/>
						</form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- Detail 에 관한 정보 -->
			<uxap:ObjectPageSection titleUppercase="false" title="역할매핑">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<Table id="midTable" 
								sticky="HeaderToolbar,ColumnHeaders" 
								inset="false" 
								items="{details>/RoleGroupMap}"
								class="sapFDynamicPageAlignContent" 
								updateFinished=".onMidTableUpdateFinished"
								mode="MultiSelect" 
								width="auto">
							<headerToolbar>
								<OverflowToolbar>
									<Title text="역할매핑" level="H2"/>
									<ToolbarSpacer/>
									<Button id="midTableAddButton" text="Add" type="Transparent" press=".onMidTableAddButtonPress" />
									<Button id="midTableDeleteButton" text="Delete" type="Transparent" press=".onMidTableDeleteButtonPress('midTable', 'details', 'RoleGroupMap')" />
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column id="midStateColumn" minScreenWidth="Tablet" hAlign="Center" width="40px" >
									<Text text="S" />
								</Column>
                                <Column>
                                    <Text text="테넌트ID" />
                                </Column>
								<Column id="midRoleGroupCodeColumn" minScreenWidth="Tablet" hAlign="Center">
									<Text text="역할그룹명" />
								</Column>
                                <Column>
                                    <Text text="역할명" />
                                </Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
                                    
                                        <!-- 상태 -->
										<Text text="{details>_row_state_}"/>
                                        <!-- 테넌트ID -->
                                        <Text text="{details>tenant_id}"/>
                                        <!-- 역할그룹코드 -->
                                        <ComboBox
                                            selectedKey="{details>role_group_code}"
                                            width="100%"
                                            items="{
                                                path: '/RoleGroupMgt',
                                                filters: [
                                                ]
                                            }"
                                            change="roleGroupComboChange">
                                            <items>
                                                <core:Item key="{role_group_code}" text="{role_group_code} : {role_group_name}" />
                                            </items>
                                        </ComboBox>
                                        <!-- 역할코드 -->
                                        <ComboBox
                                            selectedKey="{details>role_code}"
                                            width="100%"
                                            items="{
                                                path: 'role>/Role',
                                                filters: [
                                                ]
                                            }">
                                            <items>
                                                <core:Item key="{role>role_code}" text="{role>role_code} : {role>role_name}" />
                                            </items>
                                        </ComboBox>
                                       
                                    </cells>
								</ColumnListItem>
							</items>
						</Table>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
		</uxap:sections>

		<!-- 하단 버튼 처리 툴바 -->
		<uxap:footer>
            <OverflowToolbar>
            <ToolbarSpacer />
                <Button id="pageEditButton" type="Transparent" text="{I18N>/UPDATE}" press=".onPageEditButtonPress"/>
                <Button id="pageCancButton" type="Transparent" text="{I18N>/CANCEL}" press=".onPageCancelEditButtonPress"/>
                <Button id="pageDeleteButton" type="Transparent" text="{I18N>/DELETE}"  press=".onPageDeleteButtonPress"/>
                <Button id="pageSaveButton" type="Emphasized" text="{I18N>/SAVE}"  press=".onPageSaveButtonPress"/>
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>