<mvc:View controllerName="cm.roleGroupMgt.controller.MainList"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns:lib-m="ext.lib.m"
    xmlns:u="sap.ui.unified"
    height="100%">

    <f:DynamicPage id="page"
        headerExpanded="{mainListView>/headerExpanded}" 
        toggleHeaderOnTitleClick="true">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <!-- <Title text="{I18N>/USER_MANAGEMENT}" /> -->
                    <Title text="역할그룹관리" />
                </f:heading>
                <f:snappedContent>
                </f:snappedContent>
                <f:expandedContent>
                </f:expandedContent>
                <f:actions>
                </f:actions>
                <f:navigationActions>
                    <Button icon="sap-icon://unfavorite" type="Transparent" />
                </f:navigationActions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <form:SimpleForm
                    id="pageSearchForm"
                    maxContainerCols="2"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    adjustLabelSpan="false"
                    labelSpanL="4"
                    labelSpanM="4"
                    emptySpanL="0"
                    emptySpanM="0"
                    columnsL="2"
                    columnsM="2">
                    <form:content>
                        <VBox>
                            <!-- 테넌트 -->
                            <Label text="{I18N>/TENANT}:" labelFor="searchTenantCombo" required="true"></Label>
                            <ComboBox
                              id="searchTenantCombo"
                              width="100%"
                              selectedKey="L2100"
                              items="{
                                path: 'org>/Org_Tenant',
                                filters: [
                                ]
                              }"
                              required="true">
                              <items>
                                <core:Item key="{org>tenant_id}" text="{org>tenant_id} : {org>tenant_name}" />
                              </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        
                        <VBox>
                            <!-- 역할그룹코드, 명 -->
                            <Label text="{I18N>/KEYWORD}:" labelFor="searchRoleGroupCode"></Label>
                            <Input id="searchRoleGroupCode" placeholder="Role Group Code or Name"></Input>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        
                        <FlexBox alignItems="End" justifyContent="End">
                            <Button id="pageSearchButton" text="{I18N>/SEARCH}" type="Emphasized" press=".onPageSearchButtonPress" />
                            <layoutData>
                                <layout:GridData span="XL12 L12 M12 S12" />
                            </layoutData>
                        </FlexBox>
                    </form:content>
                </form:SimpleForm>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox>
                <Table id="mainTable" 
                    sticky="HeaderToolbar,ColumnHeaders" 
                    inset="false" 
                    growing="true"
                    growingThreshold="10"
                    class="sapFDynamicPageAlignContent" 
                    updateFinished=".onMainTableUpdateFinished"
                    items="{list>/RoleGroupMgt}"
                    mode="None" 
                    width="auto">
                <headerToolbar>
                    <OverflowToolbar>
                        <!-- <Title text="{I18N>/USER_MANAGEMENT} ({=${list>/roleGroupMgt}.length || 0})" level="H2"/> -->
                        <Title text="역할그룹관리 ({=(${list>/RoleGroupMgt})?${list>/RoleGroupMgt}.length:0})" level="H2"/>
                        <ToolbarSpacer/>
                        <Button id="mainTableAddButton" text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" />
                        <ToolbarSeparator/>
                        <Button icon="sap-icon://action-settings" press=".onMainTablePersoButtonPressed" >
                            <layoutData>
                                <OverflowToolbarLayoutData priority="NeverOverflow" />
                            </layoutData>
                        </Button>
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column id="mainColumnTenantId" minScreenWidth="Tablet" hAlign="Center">
                        <!-- 테넌트id-->
                        <!-- <Text text="{I18N>/USER_ID}" />  -->
                        <Text text="{I18N>/TENANT_ID}" />
                    </Column>
                    <Column id="mainColumnRoleGroupCode" minScreenWidth="Tablet" hAlign="Center" demandPopin="true" importance="High" popinDisplay="WithoutHeader">
                        <!-- 역할그룹코드 -->
                        <Text text="{I18N>/ROLE_GROUP_CODE}" />
                    </Column>
                    <Column id="mainColumnRoleGroupName" minScreenWidth="Tablet" hAlign="Center" demandPopin="true" importance="High" popinDisplay="WithoutHeader">
                        <!-- 역할그룹명 -->
                        <Text text="{I18N>/ROLE_GROUP_NAME}" />
                    </Column>
                    <Column id="mainColumnRoleDesc" minScreenWidth="Tablet" hAlign="Center" importance="High" popinDisplay="WithoutHeader">
                        <!-- 역할설명 -->
                        <Text text="{I18N>/ROLE_DESC}" />
                    </Column>
                    <Column id="mainColumnUpdateDtm" minScreenWidth="Tablet" hAlign="Center" importance="High" popinDisplay="WithoutHeader">
                        <!-- 수정일자 -->
                        <Text text="{I18N>/LOCAL_CHANGE_DTM}" />
                    </Column>
                    <Column id="mainColumnUpdateUserId" minScreenWidth="Tablet" hAlign="Center" importance="High" popinDisplay="WithoutHeader">
                        <!-- 수정자 -->
                        <Text text="{I18N>/UPDATE_USER_ID}" />
                    </Column>
                    
                </columns>
                <items>
                    <ColumnListItem type="Navigation" press=".onMainTableItemPress">
                        <cells>
                            <ObjectIdentifier text="{list>tenant_id}"/>
                            <ObjectIdentifier text="{list>role_group_code}"/>
                            <ObjectIdentifier text="{list>role_group_name}"/>
                            <ObjectIdentifier text="{list>role_desc}"/>
                            <ObjectIdentifier text="{
                                path: 'list>local_update_dtm',
                                formatter: '.dateFormatter.toDateTimeString'
                            }"/>
                            <ObjectIdentifier text="{list>update_user_id}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
            </VBox>
        </f:content>
        <!-- DynamicPage Footer -->
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer />
				<Button text="{I18N>/SAVE}" type="Emphasized" press=".onPageSaveButtonPress" />
				<Button text="{I18N>/CANCEL}" type="Transparent" press=".onPageCancelEditButtonPress"/>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>