<mvc:View 
    controllerName="cm.orgCodeMgt.controller.Detail" 
    displayBlock="true" 
    xmlns="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:tnt="sap.tnt"
    xmlns:co="sap.suite.ui.commons"
    xmlns:u="sap.ui.unified"
    xmlns:m="sap.m">

	<ObjectPageLayout
        id="objectPageLayout"
        showFooter="{contModel>/detail/footer}"
        toggleHeaderOnTitleClick="true"
        showTitleInHeaderContent = "true"
        alwaysShowContentHeader = "true"
        preserveHeaderStateOnScroll="false"
        headerContentPinnable="true"
        isChildPage="true"
        showAnchorBarPopover="false"
        upperCaseAnchorBar="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <heading>
                    <m:Title text="{I18N>/GROUP_CODE_DETAIL}" wrapping="true" class="sapUiSmallMarginEnd"/>
                </heading>

                <navigationActions>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press=".handleClose"  tooltip="Close column" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </navigationActions>

            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

		<sections>
			<ObjectPageSection titleUppercase="false" id="genral_info_section" title="General Information">
				<subSections>
					<ObjectPageSubSection>
						<blocks>
                            <form:SimpleForm
                                maxContainerCols="2"
                                editable="true"
                                layout="ResponsiveGridLayout"
                                adjustLabelSpan="false"
                                labelSpanL="4"
                                labelSpanM="4"
                                emptySpanL="0"
                                emptySpanM="0"
                                columnsL="2"
                                columnsM="2">
                                <form:content>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/GROUP_CODE}: "
                                            design="Bold"
                                            labelFor="group_code"/>
                                        <m:Text
                                            text="{viewModel>/detail/group_code}"
                                            visible="{= !${contModel>/detail/createMode}}">
                                        </m:Text>
                                        <m:Input
                                            id="group_code"
                                            placeholder="{I18N>/MANDATORY}"
                                            required="{contModel>/detail/createMode}"
                                            value="{viewModel>/detail/group_code}"
                                            visible="{contModel>/detail/createMode}"
                                            maxLength="{= parseInt(${/#OrgCodeMasters/group_code/@maxLength})}"
                                            fieldGroupIds="requiredField">
                                        </m:Input>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/GROUP_CODE_NAME}: "
                                            labelFor="group_name"/>
                                        <m:Text
                                            text="{viewModel>/detail/group_name}"
                                            visible="{contModel>/detail/readMode}">
                                        </m:Text>
                                        <m:Input
                                            id="group_name"
                                            value="{viewModel>/detail/group_name}"
                                            maxLength="{= parseInt(${/#OrgCodeMasters/group_name/@maxLength})}"
                                            visible="{contModel>/detail/editMode}">
                                        </m:Input>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/DESCRIPTION}: "
                                            labelFor="group_description"/>
                                        <m:Text
                                            visible="{contModel>/detail/readMode}"
                                            text="{viewModel>/detail/group_description}">
                                        </m:Text>
                                        <m:Input
                                            id="group_description"
                                            visible="{contModel>/detail/editMode}"
                                            value="{viewModel>/detail/group_description}"
                                            maxLength="{= parseInt(${/#OrgCodeMasters/group_description/@maxLength})}"
                                            placeholder="">
                                        </m:Input>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL4 L6 M12 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/TENANT}: "
                                            labelFor="tenant_id"/>
                                        <m:Text
                                            visible="{contModel>/detail/readMode}"
                                            text="{
                                                path:'viewModel>/detail/tenant_id'
                                            }"/>
                                        <m:ComboBox   
                                            id="tenant_id"
                                            showSecondaryValues= "true"
                                            selectedKey="{viewModel>/detail/tenant_id}"
                                            visible="{contModel>/detail/editMode}"
                                            selectionChange=".onTenantChange"
                                            items="{orgMgt>/Org_Tenant}">
                                            <core:ListItem 
                                                key="{orgMgt>tenant_id}" 
                                                text="{orgMgt>tenant_name}"
                                                additionalText="{orgMgt>tenant_id}"/>
                                        </m:ComboBox>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/CHAIN}: "
                                            labelFor="chain_code"/>
                                        <m:Text
                                            text="{
                                                path:'viewModel>/detail/chain_code',
                                                formatter:'.chainFormatter' 
                                            }"
                                            visible="{contModel>/detail/readMode}"/>
                                        <m:ComboBox   
                                            id="chain_code"
                                            visible="{contModel>/detail/editMode}"
                                            selectedKey="{viewModel>/detail/chain_code}"
                                            showSecondaryValues="true"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/ORG_TYPE_NAME}: "
                                            labelFor="code_control_org_type_code"/>
                                        <m:Text
                                            text="{
                                                path:'viewModel>/detail/code_control_org_type_code',
                                                formatter:'.chainFormatter' 
                                            }"
                                            visible="{contModel>/detail/readMode}"/>
                                        <m:ComboBox   
                                            id="code_control_org_type_code"
                                            visible="{contModel>/detail/editMode}"
                                            selectedKey="{viewModel>/detail/code_control_org_type_code}"
                                            showSecondaryValues="true"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>   
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/USE_FLAG}: "/>
                                        <tnt:InfoLabel 
                                            text="True" 
                                            visible="{= (${contModel>/detail/readMode} &amp;&amp; ${viewModel>/detail/use_flag}) ? true : false}"
                                            renderMode="Narrow" 
                                            colorScheme="7" 
                                            displayOnly= "true" />
                                        <tnt:InfoLabel 
                                            text="False" 
                                            visible="{= (${contModel>/detail/readMode} &amp;&amp; !${viewModel>/detail/use_flag}) ? true : false}"
                                            renderMode="Narrow" 
                                            colorScheme="5" 
                                            displayOnly= "true" />
                                        
                                        <!-- <m:Text
                                            visible="{contModel>/detail/readMode}"
                                            text="{= ${viewModel>/detail/use_flag}?'Yes':'No'}">
                                        </m:Text> -->
                                        
                                        <m:Switch 
                                            visible="{contModel>/detail/editMode}"
                                            state="{viewModel>/detail/use_flag}" 
                                            customTextOn="Yes" 
                                            customTextOff="No"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                </form:content>
                            </form:SimpleForm>
						</blocks>
					</ObjectPageSubSection>

				</subSections>
			</ObjectPageSection>

            <ObjectPageSection titleUppercase="false" id="managed_values_section" title="Managed Values">
				<subSections>
					<ObjectPageSubSection>
						<blocks>
                            <form:SimpleForm
                                maxContainerCols="2"
                                editable="true"
                                layout="ResponsiveGridLayout"
                                adjustLabelSpan="false"
                                labelSpanL="4"
                                labelSpanM="4"
                                emptySpanL="0"
                                emptySpanM="0"
                                columnsL="2"
                                columnsM="2">
                                <form:content>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/CREATE_USER_ID}: "/>
                                        <m:Text
                                            text="{viewModel>/detail/create_user_id}"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/LOCAL_CREATE_DTM}: "/>
                                        <m:Text
                                            text="{
                                                    path: 'viewModel>/detail/local_create_dtm',
                                                    type: 'sap.ui.model.type.Date',
                                                    formatOptions: {
                                                    pattern: 'yyyy/MM/dd'
                                                    }
                                                }"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/UPDATE_USER_ID}: "/>
                                        <m:Text
                                            text="{viewModel>/detail/update_user_id}"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="{I18N>/LOCAL_CHANGE_DTM}: "/>
                                        <m:Text
                                            text="{
                                                    path: 'viewModel>/detail/local_update_dtm',
                                                    type: 'sap.ui.model.type.Date',
                                                    formatOptions: {
                                                    pattern: 'yyyy/MM/dd'
                                                    }
                                                }"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                </form:content>
                            </form:SimpleForm>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

			<ObjectPageSection 
                titleUppercase="false" 
                title="Code List ({= (${viewModel>/OrgCodeDetails})?${viewModel>/OrgCodeDetails}.length:0})">
				<subSections>
					<ObjectPageSubSection>
						<blocks>
                            <m:Table id=""
                                    mode="{= ${contModel>/detail/readMode}?'None':'None'}"
                                    sticky="HeaderToolbar,ColumnHeaders"
                                    inset="false"
                                    class="sapFDynamicPageAlignContent"
                                    width="auto"
                                    items="{
                                        path: 'viewModel>/OrgCodeDetails'
                                }">
                                <m:headerToolbar>
                                    <m:Toolbar
                                        visible="{= !${contModel>/detail/createMode}}">
                                        <m:ToolbarSpacer/>
                                        <m:HBox>
                                            <m:Button 
                                                type="Transparent" 
                                                text="Add" 
                                                press=".onAddDetailDetailPress"/>
                                            <!-- <m:Button 
                                                type="Transparent" 
                                                text="Delete"
                                                visible="{contModel>/detail/editMode}"/> -->
                                        </m:HBox>
                                    </m:Toolbar>
                                </m:headerToolbar>
                                <m:columns>
                                    <m:Column>
                                        <m:Text text="{I18N>/CODE}" />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text text="{I18N>/CODE_DESC}" />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text text="{I18N>/SORT_NUMBER}" />
                                    </m:Column>
                                </m:columns>
                                <m:items>
                                    <m:ColumnListItem type="Navigation" press=".onHandleItemPress">
                                        <m:cells>
                                            <m:Text
                                                    text="{viewModel>code}" />
                                            <m:Text
                                                    text="{viewModel>code_description}" />
                                            <m:Text
                                                    text="{viewModel>sort_no}" />
                                        </m:cells>
                                    </m:ColumnListItem>
                                </m:items>
                            </m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

		</sections>
		<footer>
			<m:OverflowToolbar>
				<m:ToolbarSpacer />
                <m:HBox visible="{contModel>/detail/createMode}">
                    <m:Button type="Emphasized" text="{I18N>/SAVE}"  press=".onSavePress"/>
                </m:HBox>
                <m:HBox visible="{contModel>/detail/readMode}">
                    <m:Button type="Transparent" text="{I18N>/UPDATE}" press=".onEditPress"/>
                    <m:Button type="Transparent" text="{I18N>/CANCEL}" press=".onCancelPress" enabled="false"/>
                    <m:Button type="Transparent" text="{I18N>/DELETE}"  press=".onDeletePress"/>
                    <m:Button type="Emphasized" text="{I18N>/SAVE}"  press=".onSavePress" enabled="false"/>
                </m:HBox>
                <m:HBox visible="{= !${contModel>/detail/createMode} &amp;&amp; ${contModel>/detail/editMode}}">
                    <m:Button type="Transparent" text="{I18N>/UPDATE}" press=".onEditPress" enabled="false"/>
                    <m:Button type="Transparent" text="{I18N>/CANCEL}" press=".onCancelPress"/>
                    <m:Button type="Transparent" text="{I18N>/DELETE}"  press=".onDeletePress"/>
                    <m:Button type="Emphasized" text="{I18N>/SAVE}"  press=".onSavePress"/>
                </m:HBox>
			</m:OverflowToolbar>
		</footer>
	</ObjectPageLayout>
</mvc:View>