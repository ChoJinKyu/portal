<mvc:View 
    controllerName="cm.codeManagement.controller.Detail" 
    displayBlock="true" 
    xmlns="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    xmlns:tnt="sap.tnt"
    xmlns:co="sap.suite.ui.commons"
    xmlns:u="sap.ui.unified"
    xmlns:m="sap.m">

	<ObjectPageLayout
        id="objectPageLayout"
        showFooter="{contModel>/detail/footer}"
        toggleHeaderOnTitleClick="true"
        showTitleInHeaderContent = "true"
        alwaysShowContentHeader = "true"
        preserveHeaderStateOnScroll="false"
        headerContentPinnable="true"
        isChildPage="true"
        showAnchorBarPopover="false"
        upperCaseAnchorBar="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <heading>
                    <m:Title text="Code Group Detail" wrapping="true" class="sapUiSmallMarginEnd"/>
                </heading>

                <navigationActions>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press=".handleClose"  tooltip="Close column" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </navigationActions>

            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

		<sections>
			<ObjectPageSection titleUppercase="false" id="genral_info_section" title="General Information">
				<subSections>
					<ObjectPageSubSection>
						<blocks>
                            <form:SimpleForm
                                maxContainerCols="2"
                                editable="true"
                                layout="ResponsiveGridLayout"
                                adjustLabelSpan="false"
                                labelSpanL="4"
                                labelSpanM="4"
                                emptySpanL="0"
                                emptySpanM="0"
                                columnsL="2"
                                columnsM="2">
                                <form:content>
                                    <m:VBox>
                                        <m:Label
                                            text="Code Group: "
                                            design="Bold"
                                            labelFor="group_code"/>
                                        <m:Text
                                            text="{viewModel>/detail/group_code}"
                                            visible="{= !${contModel>/detail/createMode}}">
                                        </m:Text>
                                        <m:Input
                                            id="group_code"
                                            placeholder="필수"
                                            required="{contModel>/detail/createMode}"
                                            value="{viewModel>/detail/group_code}"
                                            visible="{contModel>/detail/createMode}"
                                            fieldGroupIds="requiredField">
                                        </m:Input>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="Code Group Name: "
                                            labelFor="group_name"/>
                                        <m:Text
                                            text="{viewModel>/detail/group_name}"
                                            visible="{contModel>/detail/readMode}">
                                        </m:Text>
                                        <m:Input
                                            id="group_name"
                                            value="{viewModel>/detail/group_name}"
                                            visible="{contModel>/detail/editMode}">
                                        </m:Input>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="Description: "
                                            labelFor="group_description"/>
                                        <m:Text
                                            visible="{contModel>/detail/readMode}"
                                            text="{viewModel>/detail/group_description}">
                                        </m:Text>
                                        <m:Input
                                            id="group_description"
                                            visible="{contModel>/detail/editMode}"
                                            value="{viewModel>/detail/group_description}"
                                            placeholder="">
                                        </m:Input>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL4 L6 M12 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="Tenant: "
                                            labelFor="tenant_id"/>
                                        <m:Text
                                            visible="{contModel>/detail/readMode}"
                                            text="{
                                                path:'viewModel>/detail/tenant_id'
                                            }"/>
                                        <m:ComboBox   
                                            id="tenant_id"
                                            showSecondaryValues= "true"
                                            selectedKey="{viewModel>/detail/tenant_id}"
                                            visible="{contModel>/detail/editMode}"
                                            selectionChange=".onTenantChange"
                                            items="{orgMgr>/Org_Tenant}">
                                            <core:ListItem 
                                                key="{orgMgr>tenant_id}" 
                                                text="{orgMgr>tenant_name}"
                                                additionalText="{orgMgr>tenant_id}"/>
                                        </m:ComboBox>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="Chain : "
                                            labelFor="chain_code"/>
                                        <m:Text
                                            text="{
                                                path:'viewModel>/detail/chain_code',
                                                formatter:'.chainFormatter' 
                                            }"
                                            visible="{contModel>/detail/readMode}"/>
                                        <m:ComboBox   
                                            id="chain_code"
                                            visible="{contModel>/detail/editMode}"
                                            selectedKey="{viewModel>/detail/chain_code}"
                                            showSecondaryValues="true"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>   
                                    </m:VBox>
                                    <m:VBox>
                                        <m:Label
                                            text="Useflag: "/>
                                        <tnt:InfoLabel 
                                            text="True" 
                                            visible="{= (${contModel>/detail/readMode} &amp;&amp; ${viewModel>/detail/use_flag}) ? true : false}"
                                            renderMode="Narrow" 
                                            colorScheme="7" 
                                            displayOnly= "true" />
                                        <tnt:InfoLabel 
                                            text="false" 
                                            visible="{= (${contModel>/detail/readMode} &amp;&amp; !${viewModel>/detail/use_flag}) ? true : false}"
                                            renderMode="Narrow" 
                                            colorScheme="5" 
                                            displayOnly= "true" />
                                        
                                        <!-- <m:Text
                                            visible="{contModel>/detail/readMode}"
                                            text="{= ${viewModel>/detail/use_flag}?'Yes':'No'}">
                                        </m:Text> -->
                                        
                                        <m:Switch 
                                            visible="{contModel>/detail/editMode}"
                                            state="{viewModel>/detail/use_flag}" 
                                            customTextOn="Yes" 
                                            customTextOff="No"/>
                                        <m:layoutData>
                                            <layout:GridData
                                                span="XL2 L3 M6 S12" />
                                        </m:layoutData>
                                    </m:VBox>
                                </form:content>
                            </form:SimpleForm>
						</blocks>
					</ObjectPageSubSection>

				</subSections>
			</ObjectPageSection>

			<ObjectPageSection 
                titleUppercase="false" 
                title="Code List ({= (${viewModel>/CodeDetails})?${viewModel>/CodeDetails}.length:0})">
				<subSections>
					<ObjectPageSubSection>
						<blocks>
                            <m:Table id=""
                                    mode="{= ${contModel>/detail/readMode}?'None':'None'}"
                                    sticky="HeaderToolbar,ColumnHeaders"
                                    inset="false"
                                    class="sapFDynamicPageAlignContent"
                                    width="auto"
                                    items="{
                                        path: 'viewModel>/CodeDetails'
                                }">
                                <m:headerToolbar>
                                    <m:Toolbar
                                        visible="{= !${contModel>/detail/createMode}}">
                                        <m:ToolbarSpacer/>
                                        <m:HBox>
                                            <m:Button 
                                                type="Transparent" 
                                                text="Add" 
                                                press=".onAddDetailDetailPress"/>
                                            <!-- <m:Button 
                                                type="Transparent" 
                                                text="Delete"
                                                visible="{contModel>/detail/editMode}"/> -->
                                        </m:HBox>
                                    </m:Toolbar>
                                </m:headerToolbar>
                                <m:columns>
                                    <m:Column>
                                        <m:Text text="Code" />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text text="Code Description" />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text text="Sort" />
                                    </m:Column>
                                </m:columns>
                                <m:items>
                                    <m:ColumnListItem type="Navigation" press=".onHandleItemPress">
                                        <m:cells>
                                            <m:Text
                                                    text="{viewModel>code}" />
                                            <m:Text
                                                    text="{viewModel>code_description}" />
                                            <m:Text
                                                    text="{viewModel>sort_no}" />
                                        </m:cells>
                                    </m:ColumnListItem>
                                </m:items>
                            </m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>

		</sections>
		<footer>
			<m:OverflowToolbar>
				<m:ToolbarSpacer />
                <m:HBox visible="{contModel>/detail/createMode}">
                    <m:Button type="Emphasized" text="Save"  press=".onSavePress"/>
                </m:HBox>
                <m:HBox visible="{contModel>/detail/readMode}">
                    <m:Button type="Transparent" text="Edit" press=".onEditPress"/>
                    <m:Button type="Transparent" text="Cancel" press=".onCancelPress" enabled="false"/>
                    <m:Button type="Transparent" text="Delete"  press=".onDeletePress"/>
                    <m:Button type="Emphasized" text="Save"  press=".onSavePress" enabled="false"/>
                </m:HBox>
                <m:HBox visible="{= !${contModel>/detail/createMode} &amp;&amp; ${contModel>/detail/editMode}}">
                    <m:Button type="Transparent" text="Edit" press=".onEditPress" enabled="false"/>
                    <m:Button type="Transparent" text="Cancel" press=".onCancelPress"/>
                    <m:Button type="Transparent" text="Delete"  press=".onDeletePress"/>
                    <m:Button type="Emphasized" text="Save"  press=".onSavePress"/>
                </m:HBox>
			</m:OverflowToolbar>
		</footer>
	</ObjectPageLayout>
</mvc:View>