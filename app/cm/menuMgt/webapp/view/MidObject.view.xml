<mvc:View controllerName="cm.menuMgt.controller.MidObject" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
  xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
	height="100%">
	<uxap:ObjectPageLayout id="ObjectPage"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="true">
		<uxap:headerTitle>
			<!-- 타이틀 영역 -->
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
					<Title text="메뉴상세" wrapping="true" />
				</uxap:expandedHeading>
				<uxap:snappedHeading>
					<Title text="메뉴상세" wrapping="true" />
				</uxap:snappedHeading>
				<uxap:expandedContent>
					<Text text="" />
				</uxap:expandedContent>
				<uxap:snappedContent>
					<Text text="" />
				</uxap:snappedContent>
				<uxap:snappedTitleOnMobile>
					<Title text="메뉴상세" />
				</uxap:snappedTitleOnMobile>
				<!-- <uxap:actions>
					<Button id="pageEditButton" text="Edit" type="Emphasized" press=".onPageEdit" enabled="{= ${midObjectView>/mode} === 'R'}"/>
					<Button id="pageDeleteButton" text="Delete" type="Transparent" press=".onPageDelete" enabled="{= ${midObjectView>/mode} !== 'C'}"/>
				</uxap:actions> -->
                <uxap:navigationActions>
					<OverflowToolbarButton id="pageEnterFullScreenButton" type="Transparent" icon="sap-icon://full-screen" press=".onFull" tooltip="Enter Full Screen Mode" visible="{= ${midObjectView>/screen} !== 'Full' }"/>
					<OverflowToolbarButton id="pageExitFullScreenButton" type="Transparent" icon="sap-icon://exit-full-screen" press=".onExit" tooltip="Exit Full Screen Mode" visible="{= ${midObjectView>/screen} === 'Full' }"/>
					<OverflowToolbarButton id="pageNavBackButton" type="Transparent" icon="sap-icon://decline" text="back" tooltip="back to the list" press=".onNavBack" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </uxap:navigationActions>
            </uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<!-- 헤더 영역 : invisible -->
			<FlexBox wrap="Wrap" visible="false">
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/CHAIN}: " />
						<Text text="{master>/chain_code}"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/CREATE_USER_ID}: "/>
						<Text text="{master>/create_user_id} / {master>/system_create_dtm}"/>
					</layout:HorizontalLayout>
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="{I18N>/UPDATE_USER_ID}: "/>
						<Text text="{master>/update_user_id} / {master>/system_update_dtm}"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections>
			<!-- Master 에 관한 정보 -->
			<uxap:ObjectPageSection id="pageSectionMain" titleUppercase="false" title="{I18N>/BASIC_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
              <form:SimpleForm editable="false" id="pageSectionMainForm">
                <VBox>
                  <HBox alignItems="Start" justifyContent="Start" visible="false">
                    <VBox class="sapUiContentPadding">
                      <Label text="{I18N>/MENU_NAME}"/>
                      <Input placeholder="Input Data" editable="false"/>
                    </VBox>
                  </HBox>
                  <HBox alignItems="Start" justifyContent="Start" >
                    <HBox class="sapUiContentPadding" id="pageSectionMainFormHBoxLine1">
                      <VBox>
                        <Label text="{I18N>/CHAIN} / {I18N>/MENU_TYPE}" labelFor="searchChainCombo" required="true"></Label>
                        <HBox>
                          <ComboBox id="searchChainCombo" 
                              editable="{= ${midObjectView>/mode} === 'C'}"
                              width="100%" 
                              selectedKey="{master>/chain_code}"
                              required="true"
                              items="{
                                  path: 'util>/Code',
                                  filters: [
                                      {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                      {path: 'group_code', operator: 'EQ', value1: 'CM_CHAIN_CD'}
                                  ]
                              }">
                              <items>
                                  <core:Item key="{util>code}" text="{util>code}: {util>code_description}" />
                              </items>
                          </ComboBox>

                          <ComboBox width="100%" 
                              selectedKey="{master>/menu_type_code}" 
                              editable="{= ${midObjectView>/mode} === 'C'}"
                              required="true"
                              items="{
                                  path: 'util>/Code',
                                  filters: [
                                      {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                      {path: 'group_code', operator: 'EQ', value1: 'CM_MENU_TYPE_CODE'}
                                  ]
                              }">
                              <items>
                                  <core:Item key="{util>code}" text="{util>code}: {util>code_description}" />
                              </items>
                          </ComboBox>
                        </HBox>
                      </VBox>
                    </HBox>
                    <HBox class="sapUiContentPadding" id="pageSectionMainFormHBoxLine2">
                      <VBox>
                        <Label text="{I18N>/MENU_CODE}" labelFor="menuCodeInput" required="true"/>
                        <Input id="menuCodeInput" placeholder="Input Data" width="100%"
                          value="{master>/menu_code}"
                          required="true"
                          editable="{= ${midObjectView>/mode} === 'C'}"
                        />
                      </VBox>
                    </HBox>
                  </HBox>

                  <HBox alignItems="Start" justifyContent="Start" >
                    <HBox class="sapUiContentPadding" id="pageSectionMainFormHBoxLine3">
                      <VBox>
                        <Label text="{I18N>/MENU_LEVEL} / {I18N>/SORT_NUMBER}" labelFor="menuLevelCombo" required="true"></Label>
                        <HBox>
                          <ComboBox id="menuLevelCombo" width="100%" 
                            editable="{= ${midObjectView>/mode} !== 'R'}"
                            required="true"
                            selectedKey="{path: 'master>/menu_level_number', type: 'sap.ui.model.type.Decimal'}"
                            items="{
                                path: 'menu_level>/items',
                                filters: [
                                ]
                            }">
                            <items>
                                <core:Item key="{menu_level>level}" text="{menu_level>level}" />
                            </items>
                          </ComboBox>
                          <Input id="sortNumberInput" width="100%" required="true"
                            value="{path: 'master>/sort_number', type: 'sap.ui.model.type.Decimal'}"
                            editable="{= ${midObjectView>/mode} !== 'R'}"
                          />
                        </HBox>
                      </VBox>
                    </HBox>
                    <HBox>
                      <VBox class="sapUiContentPadding">
                        <Label text="{I18N>/SCREEN_MARK_FLAG}" labelFor="menuDisplayFlagButton" />
                        <SegmentedButton id="menuDisplayFlagButton" class="sapUiSmallMarginBottom" width="100%"
                          enabled="{= ${midObjectView>/mode} !== 'R'}"
                          selectedKey="{path: 'master>/menu_display_flag', type: 'sap.ui.model.type.Boolean'}"
                        >
                            <items>
                                <SegmentedButtonItem text="Yes" key="true" width="4.1rem" />
                                <SegmentedButtonItem text="No" key="false" width="4.1rem" />
                            </items>
                        </SegmentedButton>
                        <layoutData>
                            <layout:GridData span="XL6 L6 M12 S12" />
                        </layoutData>
                      </VBox>
                      <VBox class="sapUiContentPadding">
                        <Label text="{I18N>/USE_FLAG}" labelFor="useFlagButton"/>
                        <SegmentedButton id="useFlagButton" class="sapUiSmallMarginBottom" width="100%"
                          enabled="{= ${midObjectView>/mode} !== 'R'}"
                          selectedKey="{path: 'master>/use_flag', type: 'sap.ui.model.type.Boolean'}"
                        >
                            <items>
                                <SegmentedButtonItem text="Yes" key="true" width="4.1rem" />
                                <SegmentedButtonItem text="No" key="false" width="4.1rem" />
                            </items>
                        </SegmentedButton>
                        <layoutData>
                            <layout:GridData span="XL6 L6 M12 S12" />
                        </layoutData>
                      </VBox>
                    </HBox>
                  </HBox>

                  <HBox class="sapUiContentPadding" id="pageSectionMainFormHBoxLine4">
                    <VBox width="100%">
                      <Label text="{I18N>/MENU_DESC}" labelFor="" required="true"/>
                      <Input placeholder="Input Data" width="100%"
                        editable="{= ${midObjectView>/mode} !== 'R'}"
                        required="true"
                        value="{master>/menu_desc}"
                      />
                    </VBox>
                  </HBox>

                  <HBox class="sapUiContentPadding" id="pageSectionMainFormHBoxLine5">
                    <VBox width="100%">
                      <Label text="{I18N>/MENU_PATH}" labelFor="" required="true"/>
                      <Input placeholder="Input Data" width="100%"
                        required="true"
                        editable="{= ${midObjectView>/mode} !== 'R'}"
                        value="{master>/menu_path_info}"
                      />
                    </VBox>
                  </HBox>

                </VBox>
              </form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- 생성 및 수정에 관한 정보 탭 (기 생성 데이타에 대하여 중간에 추가되고 탭 클릭시 이동도 한다.) -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MANAGEMENT_INFO}" visible="{= ${midObjectView>/mode} !== 'C'}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<form:SimpleForm editable="false">
							<Label text="{I18N>/CREATE_USER_ID}"/>
							<Text text="{master>/create_user_id}"/>
							<Label text="{I18N>/SYSTEM_CREATE_DATE_TIME}"/>
							<Text text="{
                                path: 'master>/system_create_dtm',
                                formatter: '.dateFormatter.toUTCDateTimeString'
                            }"/>
							<Label text="{I18N>/UPDATE_USER_ID}"/>
							<Text text="{master>/update_user_id}"/>
                            <Label text="{I18N>/SYSTEM_CHANGE_DATE_TIME}"/>
							<Text text="{
                                path: 'master>/system_update_dtm',
                                formatter: '.dateFormatter.toUTCDateTimeString'
                            }"/>
						</form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- Detail 에 관한 정보 -->
			<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MULTILINGUAL}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<Table id="midTable" 
                            sticky="HeaderToolbar,ColumnHeaders" 
                            inset="false" 
                            items="{details>/MenuLng}"
                            class="sapFDynamicPageAlignContent" 
                            updateFinished=".onMidTableUpdateFinished"
                            mode="MultiSelect" 
                            width="auto">
							<headerToolbar>
								<OverflowToolbar>
                                    <Title text="{I18N>/LIST} ({= ${details>/MenuLng}.length || 0})" level="H2"/>
									<ToolbarSpacer/>
									<!-- Add the Personalization button -->
                                    <Button id="midTableAddButton" text="{I18N>/ROW_ADD}" type="Emphasized" press=".onAdd" 
                                        enabled="{= ${midObjectView>/mode} !== 'R'}"/>
									<Button id="midTableDeleteButton" text="{I18N>/ROW_DELETE}" type="Transparent" press=".onDelete('midTable', 'details', 'MenuLng')"
                                        enabled="{= ${midObjectView>/mode} !== 'R'}"/>
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column id="midStateColumn" minScreenWidth="Small" hAlign="Center" width="40px" >
									<Text text="S" />
								</Column>
								<Column id="midLanguageCodeColumn" minScreenWidth="Small" hAlign="Center">
									<Text text="{I18N>/LANGUAGE}" />
								</Column>
                                <Column id="midMenuNameColumn" minScreenWidth="Small" hAlign="Center">
									<Text text="{I18N>/MANAGEMENT_NAME}" />
								</Column>
							</columns>
							<items>
								<ColumnListItem press=".onMidTableItemPress">
									<cells>
                                        <!-- 상태 -->
										<Text text="{details>_row_state_}"/>
                                        <!-- 언어코드 -->
                                        <ComboBox
                                        id="midLevelCombo"
                                        enabled="{=${midObjectView>/mode} !== 'R'}"
                                        selectedKey="{details>language_code}"
                                        width="100%"
                                        items="{
                                            path: 'util>/Code',
                                            filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                            {path: 'group_code', operator: 'EQ', value1: 'CM_LANG_CODE'}
                                            ]
                                        }">
                                        <items>
                                            <core:Item key="{util>code}" text="{util>code} : {util>code_description}"/>
                                        </items>
                                        </ComboBox>
                                        <!-- 메뉴명 -->
										<Input value="{details>menu_name}"
                                            required="true"
                                            enabled="{=${midObjectView>/mode} !== 'R'}"
                                        />
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
		</uxap:sections>

		<!-- 하단 버튼 처리 툴바 -->
		<uxap:footer>
			<OverflowToolbar>
                <Button
                    icon="sap-icon://alert"
                    type="Emphasized"
                    text="{= ${message>/}.length }"
                    visible="{= ${message>/}.length > 0 }"
                    ariaHasPopup="Dialog"
                    press=".onMessagePopoverPress"
                />
				<ToolbarSpacer />
                <Button id="pageEditButton" text="{I18N>/UPDATE}" type="Transparent" press=".onPageEdit" enabled="{= ${midObjectView>/mode} === 'R'}"/>
                <Button type="Transparent" text="{I18N>/CANCEL}" press=".onCancel"/>
				<Button id="pageDeleteButton" text="{I18N>/DELETE}" type="Transparent" press=".onPageDelete" enabled="{= ${midObjectView>/mode} !== 'C'}"/>
				<Button type="Emphasized" text="{I18N>/SAVE}" press=".onSave" enabled="{= ${midObjectView>/mode} !== 'R'}"/>
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>