<mvc:View controllerName="cm.organizationMgr.controller.MainList" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:lib-m="ext.lib.m"
    height="100%">

    <f:DynamicPage id="page" toggleHeaderOnTitleClick="true" headerExpanded="true" showFooter="{= ${message>/}.length > 0 }">
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>
                        <Title text="조직관리"/>
                    </f:heading>
                    <f:snappedContent>
                    <form:SimpleForm id="pageSearchFormS" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox visible="{path: 'view>/selectedTabKey',formatter: '.formatterVbox.visibleTenant'}">
                                <Label required="true" text="{I18N>/TENANT}: " labelFor="searchChainS" ></Label>
                                <ComboBox   
                                    selectionChange=".onTenantChange"
                                    required="true"
                                    id="search_tenantS"
                                    showSecondaryValues= "true"
                                    selectedKey="{view>/tenant_id}"
                                    width="100%"
                                    items="{path : '/Org_Tenant'}"
                                    >
                                    <core:ListItem 
                                        key="{tenant_id}" 
                                        text="{tenant_name}"
                                        additionalText="{tenant_id}"/>
                                </ComboBox>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox visible="{path: 'view>/selectedTabKey',formatter: '.formatterVbox.visibleCompany'}">
                                <Label required="true" text="{I18N>/COMPANY}: "/>
                                <ComboBox   
                                    id="search_companyS"
                                    required="true"
                                    width="100%"
                                    showSecondaryValues= "true"
                                />
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:snappedContent>
                <f:expandedContent>
                    <form:SimpleForm id="pageSearchFormE" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox visible="{path: 'view>/selectedTabKey',formatter: '.formatterVbox.visibleTenant'}">
                                <Label required="true" text="{I18N>/TENANT}: " ></Label>
                                <ComboBox   
                                    selectionChange=".onTenantChange"
                                    required="true"
                                    id="search_tenantE"
                                    showSecondaryValues= "true"
                                    selectedKey="{view>/tenant_id}"
                                    width="100%"
                                    items="{
                                        path : '/Org_Tenant'
                                    }"
                                    >
                                    <core:ListItem 
                                        key="{tenant_id}" 
                                        text="{tenant_name}"
                                        additionalText="{tenant_id}"/>
                                </ComboBox>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox visible="{path: 'view>/selectedTabKey',formatter: '.formatterVbox.visibleCompany'}">
                                <Label required="true" text="{I18N>/COMPANY}: "/>
                                <ComboBox   
                                    id="search_companyE"
                                    required="true"
                                    width="100%"
                                    showSecondaryValues= "true"
                                />
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:expandedContent>
                <f:actions>
                    <Button id="pageSearchButton" text="{I18N>/SEARCH}" type="Emphasized" press=".onPageSearchButtonPress" />
                </f:actions>
                <f:navigationActions>
                    <Button icon="sap-icon://unfavorite" type="Transparent" />
                </f:navigationActions>
            
                </f:DynamicPageTitle>
            </f:title>
            <f:header>
            </f:header>
            <f:content>
                <IconTabBar
                    
                    id="iconTabBar"
                    headerBackgroundDesign="Transparent"
                    expandable="false"
                    select=".onSelectedKey"
                    upperCase="true"
                    selectedKey="{view>/selectedTabKey}"
                    >
                    <items>
                        <IconTabFilter id="tenant" text="{I18N>/TENANT}" key="Tenant" > 
                            	<Table
                                id="TenantTable"
                                growing="true"
                                growingThreshold="30"
                                items="{list>/Org_Tenant}" 
                                mode="MultiSelect"
                                width="auto"
                                >
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer/>
                                            <Button text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" />
                                            <Button text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" />
                                            <Button text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" />
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column id="tenantTableMainColumnState" minScreenWidth="Tablet" hAlign="Center" width="40px" >
                                        <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                    </Column>
                                    <Column id="tenantTableTenant_id" width="10%" hAlign="Center" >
                                        <Text text="tenant_id"/>
                                    </Column>
                                    <Column id="tenantTableTenant_name" width="80%" hAlign="Center" >
                                        <Text text="tenant_name"/>
                                    </Column>
                                    <Column id="tenantTableUse_flag" width="10%" hAlign="Center" >
                                        <Text text="use_flag"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus icon="{
                                                            path: 'list>_row_state_',
                                                            formatter: '.formatter.toModelStateColumnIcon'
                                                        }" />
                                        </cells>
                                        <cells>
                                            <Input value="{list>tenant_id}" editable="{= ${list>_row_state_} === 'C' }" required="true"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>tenant_name}" required="true"/>
                                        </cells>
                                        <cells>
                                            <Switch state="{list>use_flag}" customTextOn="Yes" customTextOff="No">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </Switch>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="company" text="{I18N>/COMPANY}" key="Company" count="{/Org_Company/$count}"> 
                            <Table
                                id="CompanyTable"
                                growing="true"
                                growingThreshold="30"
                                items="{list>/Org_Company}"
                                mode="MultiSelect"
                                width="auto"
                                >
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer/>
                                            <Button text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" enabled="{= ${view>/add} === 'Company' }"/>
                                            <Button text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" />
                                            <Button text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" />
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column id="companyTableMainColumnState" minScreenWidth="Tablet" hAlign="Center" width="40px" >
                                        <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                    </Column>
                                    <Column id="companyTableTenant_id">
                                        <Text text="tenant_id"/>
                                    </Column>
                                    <Column id="companyTableCompany_code">
                                        <Text text="company_code"/>
                                    </Column>
                                    <Column id="companyTableCompany_name">
                                        <Text text="company_name"/>
                                    </Column>
                                    <Column id="companyTableUse_flag" hAlign="Center" >
                                        <Text text="use_flag"/>
                                    </Column>
                                    <Column id="companyTableErp_type_code">
                                        <Text text="erp_type_code"/>
                                    </Column>
                                    <Column id="companyTableCurrency_code">
                                        <Text text="currency_code"/>
                                    </Column>
                                    <Column id="companyTableCountry_code">
                                        <Text text="country_code"/>
                                    </Column>
                                    <Column id="companyTableLanguage_code">
                                        <Text text="language_code"/>
                                    </Column>
                                    <Column id="companyTableAffiliate_code">
                                        <Text text="affiliate_code"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus icon="{
                                                            path: 'list>_row_state_',
                                                            formatter: '.formatter.toModelStateColumnIcon'
                                                        }" />
                                        </cells>
                                        <cells>
                                            <Text text="{list>tenant_id}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>company_code}" editable="{= ${list>_row_state_} === 'C' }" required="true"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>company_name}" required="true"/>
                                        </cells>
                                        <cells>
                                            <Switch state="{list>use_flag}" customTextOn="Yes" customTextOff="No">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </Switch>
                                        </cells>
                                        <cells>
                                            <Input value="{list>erp_type_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>currency_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>country_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>language_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>affiliate_code}"/>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="plant" text="{I18N>/PLANT}" key="Plant" count="{/Org_Plant/$count}">
                            <Table
                                id="PlantTable"
                                growing="true"
                                growingThreshold="30"
                                items="{list>/Org_Plant}" 
                                mode="MultiSelect"
                                width="auto"
                                >
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer/>
                                            <Button text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" enabled="{= ${view>/add} === 'Plant' }"/>
                                            <Button text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" />
                                            <Button text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" />
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column id="plantTableMainColumnState" minScreenWidth="Tablet" hAlign="Center" width="40px" >
                                        <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                    </Column>
                                    <Column id="plantTableTenant_id">
                                        <Text text="tenant_id"/>
                                    </Column>
                                    <Column id="plantTableCompany_code">
                                        <Text text="company_code"/>
                                    </Column>
                                    <Column id="plantTablePlant_code">
                                        <Text text="plant_code"/>
                                    </Column>
                                    <Column id="plantTablePlant_name">
                                        <Text text="plant_name"/>
                                    </Column>
                                    <Column id="plantTableUse_flag" hAlign="Center" width="10%">
                                        <Text text="use_flag"/>
                                    </Column>
                                    <Column id="plantTablePurchase_org_code">
                                        <Text text="purchase_org_code"/>
                                    </Column>
                                    <Column id="plantTableBizdivision_code">
                                        <Text text="bizdivision_code"/>
                                    </Column>
                                    <Column id="plantTableAu_code">
                                        <Text text="au_code"/>
                                    </Column>
                                    <Column id="plantTableHq_au_code">
                                        <Text text="hq_au_code"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus icon="{
                                                            path: 'list>_row_state_',
                                                            formatter: '.formatter.toModelStateColumnIcon'
                                                        }" />
                                        </cells>
                                        <cells>
                                            <Text text="{list>tenant_id}"/>
                                        </cells>
                                        <cells>
                                            <Text text="{list>company_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>plant_code}" editable="{= ${list>_row_state_} === 'C' }" required="true"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>plant_name}" required="true"/>
                                        </cells>
                                        <cells>
                                            <Switch state="{list>use_flag}" customTextOn="Yes" customTextOff="No">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </Switch>
                                        </cells>
                                        <cells>
                                            <Input value="{list>purchase_org_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>bizdivision_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>au_code}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>hq_au_code}"/>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="purchasing_org" text="{I18N>/PURCHASING}" key="Purchasing" count="{/Org_Purchasing/$count}">
                        <Table
                                id="PurchasingTable"
                                growing="true"
                                growingThreshold="30"
                                items="{list>/Org_Purchasing}" 
                                mode="MultiSelect"
                                width="auto"
                                >
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer/>
                                            <Button text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" enabled="{= ${view>/add} === 'Purchasing' }"/>
                                            <Button text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" />
                                            <Button text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" />
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column id="purchasingTableMainColumnState" minScreenWidth="Tablet" hAlign="Center" width="40px" >
                                        <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                    </Column>
                                    <Column id="purchasingTableTenant_id">
                                        <Text text="tenant_id"/>
                                    </Column>
                                    <Column id="purchasingTablePurchase_org_code">
                                        <Text text="purchase_org_code"/>
                                    </Column>
                                    <Column id="purchasingTablePurchase_org_name">
                                        <Text text="purchase_org_name"/>
                                    </Column>
                                    <Column id="purchasingTableUse_flag" hAlign="Center" width="10%">
                                        <Text text="use_flag"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus icon="{
                                                            path: 'list>_row_state_',
                                                            formatter: '.formatter.toModelStateColumnIcon'
                                                        }" />
                                        </cells>
                                        <cells>
                                            <Text text="{list>tenant_id}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>purchase_org_code}" editable="{= ${list>_row_state_} === 'C' }" required="true"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>purchase_org_name}" required="true"/>
                                        </cells>
                                        <cells>
                                            <Switch state="{list>use_flag}" customTextOn="Yes" customTextOff="No">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </Switch>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>                       
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="bizunit" text="{I18N>/ORG_BIZUNIT}" key="Unit" count="{/Org_Unit/$count}">
                            <Table
                                id="UnitTable"
                                growing="true"
                                growingThreshold="30"
                                items="{list>/Org_Unit}" 
                                mode="MultiSelect"
                                width="auto"
                                >
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer/>
                                            <Button text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" enabled="{= ${view>/add} === 'Unit' }"/>
                                            <Button text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" />
                                            <Button text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" />
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column id="unitTableMainColumnState" minScreenWidth="Tablet" hAlign="Center" width="40px" >
                                        <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                    </Column>
                                    <Column id="unitTableTenant_id">
                                        <Text text="tenant_id"/>
                                    </Column>
                                    <Column id="unitTableBizunit_code">
                                        <Text text="bizunit_code"/>
                                    </Column>
                                    <Column id="unitTableBizunit_name">
                                        <Text text="bizunit_name"/>
                                    </Column>
                                    <Column id="unitTableUse_flag" hAlign="Center" width="10%">
                                        <Text text="use_flag"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus icon="{
                                                            path: 'list>_row_state_',
                                                            formatter: '.formatter.toModelStateColumnIcon'
                                                        }" />
                                        </cells>
                                        <cells>
                                            <Text text="{list>tenant_id}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>bizunit_code}" editable="{= ${list>_row_state_} === 'C' }"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>bizunit_name}"/>
                                        </cells>
                                        <cells>
                                            <Switch state="{list>use_flag}" customTextOn="Yes" customTextOff="No">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </Switch>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="bizdivision" text="{I18N>/BUSINESS_DIVISION}" key="Division" count="{/Org_Division/$count}">
                            <Table
                                id="DivisionTable"
                                growing="true"
                                growingThreshold="30"
                                items="{list>/Org_Division}" 
                                mode="MultiSelect"
                                width="auto"
                                >
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer/>
                                            <Button text="{I18N>/ROW_ADD}" type="Transparent" press=".onMainTableAddButtonPress" enabled="{= ${view>/add} === 'Division' }" />
                                            <Button text="{I18N>/ROW_DELETE}" type="Transparent" press=".onMainTableDeleteButtonPress" />
                                            <Button text="{I18N>/SAVE}" type="Emphasized" press=".onMainTableSaveButtonPress" />
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column id="divisionTableMainColumnState" minScreenWidth="Tablet" hAlign="Center" width="40px" >
                                        <ObjectStatus icon="sap-icon://document" text="State" visible="false" />
                                    </Column>
                                    <Column id="divisionTableTenant_id">
                                        <Text text="tenant_id"/>
                                    </Column>
                                    <Column id="divisionTableBizdivision_code">
                                        <Text text="bizdivision_code"/>
                                    </Column>
                                    <Column id="divisionTableBizdivision_name">
                                        <Text text="bizdivision_name"/>
                                    </Column>
                                    <Column id="divisionTablBizunit_code">
                                        <Text text="bizunit_code"/>
                                    </Column>
                                    <Column id="divisionTableUse_flag" hAlign="Center" width="10%">
                                        <Text text="use_flag"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectStatus icon="{
                                                            path: 'list>_row_state_',
                                                            formatter: '.formatter.toModelStateColumnIcon'
                                                        }" />
                                        </cells>
                                        <cells>
                                            <Text text="{list>tenant_id}"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>bizdivision_code}" editable="{= ${list>_row_state_} === 'C' }" required="true"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>bizdivision_name}" required="true"/>
                                        </cells>
                                        <cells>
                                            <Input value="{list>bizunit_code}"/>
                                        </cells>
                                        <cells>
                                            <Switch state="{list>use_flag}" customTextOn="Yes" customTextOff="No">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </Switch>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </f:content>
            <f:footer>
			<OverflowToolbar>
                <Button
                    icon="sap-icon://alert"
                    type="Reject"
                    text="{= ${message>/}.length }"
                    visible="{= ${message>/}.length > 0 }"
                    ariaHasPopup="Dialog"
                    press=".onMessagePopoverPress" />
				<ToolbarSpacer />
			</OverflowToolbar>
		</f:footer>
        </f:DynamicPage>
</mvc:View>