<mvc:View controllerName="cm.organizationMgr.controller.MainList" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:lib-m="ext.lib.m"
    height="100%">

    <f:DynamicPage id="page" toggleHeaderOnTitleClick="true" headerExpanded="true" showFooter="{= ${message>/}.length > 0 }">
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>
                        <Title text="조직관리"/>
                    </f:heading>
                    <f:snappedContent>
                    <form:SimpleForm id="pageSearchFormS" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox visible="{= ${view>/selectedTabKey} !== 'Tenant' }">
                                <Label text="{I18N>/TENANT}: " labelFor="searchChainS" ></Label>
                                <ComboBox   
                                    selectionChange=".onTenantChange"
                                    required="true"
                                    id="search_tenantS"
                                    showSecondaryValues= "true"
                                    selectedKey="{view>/tenant_id}"
                                    width="100%"
                                    items="{path : '/Org_Tenant'}"
                                    >
                                    <core:ListItem 
                                        key="{tenant_id}" 
                                        text="{tenant_name}"
                                        additionalText="{tenant_id}"/>
                                </ComboBox>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox visible="{= ${view>/selectedTabKey} !== 'Tenant' }">
                                <Label text="{I18N>/COMPANY}: "/>
                                <ComboBox   
                                    id="search_companyS"
                                    required="true"
                                    width="100%"
                                    showSecondaryValues= "true"
                                />
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox>
                                <Label text="{I18N>/KEYWORD}: " labelFor="searchKeywordS"></Label>
                                <Input id="searchKeywordS" placeholder="{I18N>/NCM6001}" change=".onPageSearchButtonPress"></Input>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:snappedContent>
                <f:expandedContent>
                    <form:SimpleForm id="pageSearchFormE" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox visible="{= ${view>/selectedTabKey} !== 'Tenant' }">
                                <Label text="{I18N>/TENANT}: " ></Label>
                                <ComboBox   
                                    selectionChange=".onTenantChange"
                                    required="true"
                                    id="search_tenantE"
                                    showSecondaryValues= "true"
                                    selectedKey="{view>/tenant_id}"
                                    width="100%"
                                    items="{
                                        path : '/Org_Tenant'
                                    }"
                                    >
                                    <core:ListItem 
                                        key="{tenant_id}" 
                                        text="{tenant_name}"
                                        additionalText="{tenant_id}"/>
                                </ComboBox>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox visible="{= ${view>/selectedTabKey} !== 'Tenant' }">
                                <Label text="{I18N>/COMPANY}: "/>
                                <ComboBox   
                                    id="search_companyE"
                                    required="true"
                                    width="100%"
                                    showSecondaryValues= "true"
                                />
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox>
                                <Label text="{I18N>/KEYWORD}: " labelFor="searchKeywordE"></Label>
                                <Input id="searchKeywordE" placeholder="{I18N>/NCM6001}"></Input>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:expandedContent>
                <f:actions>
                    <Button id="pageSearchButton" text="{I18N>/SEARCH}" type="Emphasized" press=".onPageSearchButtonPress" />
                </f:actions>
                <f:navigationActions>
                    <Button icon="sap-icon://unfavorite" type="Transparent" />
                </f:navigationActions>
            
                </f:DynamicPageTitle>
            </f:title>
            <f:header>
            </f:header>
            <f:content>
                <IconTabBar
                    
                    id="iconTabBar"
                    headerBackgroundDesign="Transparent"
                    expandable="false"
                    select=".onSelectedKey"
                    upperCase="true"
                    selectedKey="{view>/selectedTabKey}"
                    >
                    <items>
                    <!-- count="{path:'/Org_Tenant/$count',formatter: '.formatter.setCount'}" -->
                        <IconTabFilter id="tenant" text="{I18N>/TENANT}" key="Tenant" > 
                            <mvc:XMLView viewName="cm.organizationMgr.view.orgMgrTenantView"></mvc:XMLView>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="company" text="{I18N>/COMPANY}" key="Company" count="{/Org_Company/$count}"> 
                            <mvc:XMLView viewName="cm.organizationMgr.view.orgMgrCompanyView"></mvc:XMLView>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="plant" text="{I18N>/PLANT}" key="Plant" count="{/Org_Plant/$count}">
                            <mvc:XMLView viewName="cm.organizationMgr.view.orgMgrPlantView"></mvc:XMLView>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="purchasing_org" text="{I18N>/PURCHASING}" key="Purchasing" count="{/Org_Purchasing/$count}">
                            <mvc:XMLView viewName="cm.organizationMgr.view.orgMgrPurchasingView"></mvc:XMLView>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="bizunit" text="{I18N>/ORG_BIZUNIT}" key="Unit" count="{/Org_Unit/$count}">
                            <mvc:XMLView viewName="cm.organizationMgr.view.orgMgrUnitView"></mvc:XMLView>
                        </IconTabFilter>
                        <IconTabSeparator />
                        <IconTabFilter id="bizdivision" text="{I18N>/BUSINESS_DIVISION}" key="Division" count="{/Org_Division/$count}">
                            <mvc:XMLView viewName="cm.organizationMgr.view.orgMgrDivisionView"></mvc:XMLView>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </f:content>
            <f:footer>
			<OverflowToolbar>
                <Button
                    icon="sap-icon://alert"
                    type="Reject"
                    text="{= ${message>/}.length }"
                    visible="{= ${message>/}.length > 0 }"
                    ariaHasPopup="Dialog"
                    press=".onMessagePopoverPress" />
				<ToolbarSpacer />
			</OverflowToolbar>
		</f:footer>
        </f:DynamicPage>
</mvc:View>