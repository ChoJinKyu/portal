<mvc:View controllerName="cm.roleMgr.controller.MidObject" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:uxap="sap.uxap" 
	xmlns:layout="sap.ui.layout" 
    xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
	height="100%">
	<uxap:ObjectPageLayout id="page"
		toggleHeaderOnTitleClick="true"
		alwaysShowContentHeader = "true"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
		showFooter="false">
		<uxap:headerTitle>
			<!-- 타이틀 영역 -->
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
					<Title text="Role Details" wrapping="true" />
				</uxap:expandedHeading>
				<uxap:snappedHeading>
					<Title text="Role Details" wrapping="true" />
				</uxap:snappedHeading>
				<uxap:expandedContent>
					<Text text="Details for Role Info {Role_code}" />
				</uxap:expandedContent>
				<uxap:snappedContent>
					<Text text="Details for Role Info {Role_code}" />
				</uxap:snappedContent>
				<uxap:snappedTitleOnMobile>
					<Title text="Role Details" />
				</uxap:snappedTitleOnMobile>
				<uxap:actions>
					<Button id="pageEditButton" text="Edit" type="Emphasized" press=".onPageEditButtonPress" />
					<Button id="pageDeleteButton" text="Delete" type="Transparent" press=".onPageDeleteButtonPress" />
                    <Button id="pageSaveButton" text="Save" type="Emphasized" press=".onPageSaveButtonPress" />
				    <Button id="pageCancelEditButton" text="Cancel" type="Transparent" press=".onPageCancelEditButtonPress"/>
				</uxap:actions>
                <uxap:navigationActions>
					<OverflowToolbarButton id="pageEnterFullScreenButton" type="Transparent" icon="sap-icon://full-screen" press="onPageEnterFullScreenButtonPress" tooltip="Enter Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
					<OverflowToolbarButton id="pageExitFullScreenButton" type="Transparent" icon="sap-icon://exit-full-screen" press="onPageExitFullScreenButtonPress" tooltip="Exit Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/>
					<OverflowToolbarButton id="pageNavBackButton" type="Transparent" icon="sap-icon://decline" text="back" tooltip="back to the list" press=".onPageNavBackButtonPress" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<!-- 헤더 영역 -->
			<FlexBox wrap="Wrap" visible="false">
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="userID: " />
						<Text text="{master>/user_id}"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="Created: "/>
						<Text text="{master>/create_user_id} / {master>/system_create_dtm}"/>
					</layout:HorizontalLayout>
					<layout:HorizontalLayout class="sapUiSmallMarginBeginEnd">
						<Label text="Updated: "/>
						<Text text="{master>/update_user_id} / {master>/system_update_dtm}"/>
					</layout:HorizontalLayout>
				</layout:VerticalLayout>
			</FlexBox>
		</uxap:headerContent> 

		<uxap:sections>
			<!-- Master 에 관한 정보 -->
			<uxap:ObjectPageSection id="pageSectionMain" titleUppercase="false" title="Role Info Details">
				<uxap:subSections>
					<uxap:ObjectPageSubSection id="pageSubSection1" >
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- 생성 및 수정에 관한 정보 탭 (기 생성 데이타에 대하여 중간에 추가되고 탭 클릭시 이동도 한다.) -->
			<uxap:ObjectPageSection titleUppercase="false" title="Managed Values" visible="{= !${midObjectView>/isAddedMode}}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<form:SimpleForm editable="false">
							<Label text="Created by"/>
							<Text text="{master>/create_user_id}"/>
							<Label text="Created At"/>
							<Text text="{
									path: 'master>/system_create_dtm',
									formatter: '.dateFormatter.toUTCDateTimeString'
								}"/>
							<Label text="Updated by"/>
							<Text text="{master>/update_user_id}"/>
							<Label text="Updated At"/>
							<Text text="{
									path: 'master>/system_update_dtm',
									formatter: '.dateFormatter.toUTCDateTimeString'
								}"/>
						</form:SimpleForm>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

			<!-- Detail 에 관한 정보 -->
			<uxap:ObjectPageSection titleUppercase="false" title="역할별 메뉴관리">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
                        <table:TreeTable
                            id="midTable"
                            rowSelectionChange=".onRowSelectionChange"
                            selectionMode="MultiToggle"
                            selectionBehavior="Row"
                            enableColumnReordering="false"
                            expandFirstLevel="true"
                            rows="{
                                path : 'menu>/Menu_haa',
                                filters: [
                                ],
                                parameters : {
                                    countMode: 'Inline',
                                    treeAnnotationProperties : {
                                        hierarchyLevelFor : 'hierarchy_level',
                                        hierarchyNodeFor : 'node_id',
                                        hierarchyParentNodeFor : 'parent_id',
                                        hierarchyDrillStateFor : 'drill_state'
                                    },
                                    numberOfExpandedLevels: 2
                                }
                            }"
                            >
                            <table:extension>
                                <OverflowToolbar>
                                    <Title text="역할별 메뉴관리" level="H2"/>
                                <ToolbarSpacer/>
                                    <HBox>
                                        <ComboBox
                                            id="searchChain"
                                            change="chainComboChange"
                                            selectedKey="CM"
                                            width="100%"
                                            items="{
                                                path: 'util>/CodeDetails',
                                                filters: [
                                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                                    {path: 'group_code', operator: 'EQ', value1: 'CM_CHAIN_CD'}
                                                ]
                                            }">
                                            <items>
                                                <core:Item key="{util>code}" text="{util>code}: {util>code_description}" />
                                            </items>
                                        </ComboBox>
                                    </HBox>
                                <ToolbarSeparator/>
                                    <Button id="pageSaveButton2" text="Save" type="Emphasized" press=".onPageSaveButtonPress2" />
                                </OverflowToolbar>
                            </table:extension>
                            <table:columns>
                                <table:Column label="메뉴명" >
                                    <table:template>
                                        <Text text="{menu>menu_name}" wrapping="false" />
                                    </table:template>
                                </table:Column>
                                <table:Column label="메뉴코드" >
                                    <table:template>
                                        <Text text="{menu>menu_code}" wrapping="false" />
                                    </table:template>
                                </table:Column>
                            </table:columns>
                        </table:TreeTable>

					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

            
            <uxap:ObjectPageSection titleUppercase="false" title="역할별 메뉴관리">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
                        <FlexBox wrap="Wrap" visible="false">
                            <form:SimpleForm editable="false">
                                <Text text="{details>/tenant_id}"/>
                                <Text text="{details>/role_code'}"/>
                                <Text text="{details>/menu_code}"/>
                            </form:SimpleForm>
                        </FlexBox>
                    </uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
            
            
		</uxap:sections>        
	</uxap:ObjectPageLayout>
</mvc:View>