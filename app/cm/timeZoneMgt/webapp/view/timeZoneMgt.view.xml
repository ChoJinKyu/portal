<mvc:View controllerName="cm.timeZoneMgt.controller.timeZoneMgt"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:f="sap.f"
  xmlns:core="sap.ui.core"
  xmlns:form="sap.ui.layout.form"
  xmlns:t="sap.ui.table"
  xmlns:layout="sap.ui.layout"
  class="sapUiSizeCompact"
  displayBlock="true"
  height="100%">
  <App id="app">
    <f:DynamicPage id="page" toggleHeaderOnTitleClick="false" headerExpanded="true" fitContent="true">
      <!--DynamicPage Title -->
      <f:title>
        <f:DynamicPageTitle>
          <f:heading>
            <Title text="{I18N>/TIMEZONE}{I18N>/MANAGEMENT}" />
          </f:heading>
          <!-- 조회 -->
          <f:actions>
            <Button id="pageSearchButton" text="{I18N>/SEARCH}" type="Emphasized" press=".onSearch"/>
          </f:actions>
          <!-- 즐겨찾기 -->
          <f:navigationActions>
            <Button icon="sap-icon://unfavorite" type="Transparent" />
          </f:navigationActions>
        </f:DynamicPageTitle>
      </f:title>
      <!--DynamicPage Header -->
      <f:header>
        <f:DynamicPageHeader pinnable="false">
          <layout:HorizontalLayout>
            <form:Form id="searchForm" editable="true" width="auto">
              <form:formContainers>
                <form:FormContainer>
                  <form:formElements>
                    <form:FormElement>
                        <!-- 테넌트 -->
                        <form:fields>
                          <VBox>
                            <Label text="{I18N>/TENANT}" labelFor="searchTenantCombo" required="true"></Label>
                            <ComboBox
                              id="searchTenantCombo"
                              width="100%"
                              selectedKey="L2100"
                              items="{
                                path: 'org>/Org_Tenant',
                                filters: [
                                  {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                ]
                              }">
                              <items>
                                <core:Item key="{org>tenant_id}" text="{org>tenant_id} : {org>tenant_name}" />
                              </items>
                            </ComboBox>
                          </VBox>
                          <VBox>
                            <Label text="{I18N>/TIMEZONE}" labelFor="searchTimeZoneInput"></Label>
                            <Input id="searchTimeZoneInput"/>
                            <!-- <Label text="타임존" labelFor="searchTimeZoneCombo"></Label> -->
                            <!-- <ComboBox
                              id="searchTimeZoneCombo"
                              width="100%"
                              items="{
                                path: '/TimeZone',
                                filters: [
                                  {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                ]
                              }">
                              <items>
                                <core:Item key="{timezone_code}" text="{timezone_code} : {timezone_name}" />
                              </items>
                            </ComboBox> -->
                          </VBox>
                          <VBox>
                            <Label text="{I18N>/COUNTRY}" labelFor="searchCountryCombo"></Label>
                            <ComboBox
                              id="searchCountryCombo"
                              width="100%"
                              items="{
                                path: 'country>/Country',
                                filters: [
                                ]
                              }">
                              <items>
                                <core:Item key="{country>country_code}" text="{country>country_code} : {country>iso_code}" value="{country>country_code}"/>
                              </items>
                            </ComboBox>
                            <!-- <Input
                              id="searchCountryInput"
                              type="Text"
                              value=""
                              placeholder=""
                              showValueHelp="true"
                              valueHelpOnly="false"
                              valueHelpRequest="handleValueHelp"
                              width=""
                              class="sapUiSmallMarginBottom"/> -->
                          </VBox>
                        </form:fields>
                    </form:FormElement>
                  </form:formElements>
                </form:FormContainer>
              </form:formContainers>
              <form:layout>
                <!-- <form:ResponsiveGridLayout columnsM="3" columnsL="3" columnsXL="3"/> -->
                <form:ResponsiveGridLayout columnsS="12" columnsM="6" columnsL="3" columnsXL="2"/>
              </form:layout>
            </form:Form>
          </layout:HorizontalLayout>
        </f:DynamicPageHeader>
      </f:header>
      <f:content>
        <t:Table id="mainTable"
          selectionMode="MultiToggle"
          rows="{
            path: 'list>/TimeZone',
            filters: [
              {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
            ]
          }"
          cellClick=".onCellClick"
          rowSelectionChange=".onCheck"
          visibleRowCountMode="Auto"
          columnResize="onColumnResize">
          <t:extension>
            <OverflowToolbar class="sapFDynamicPageAlignContent">
              <Title text="{I18N>/TIMEZONE}" level="H2"/>
              <ToolbarSpacer/>
              <Button text="{I18N>/ROW_ADD}" id="buttonMainCreateRow" press=".onAdd('mainTable', 'list', 'TimeZone', ['tenant_id', 'timezone_code', 'timezone_name'])"  type="Transparent"/>
              <Button text="{I18N>/DELETE}" id="buttonMainDeleteRow" press=".onDelete('mainTable', 'list')"   type="Transparent"/>
              <Button text="{I18N>/SAVE}" id="buttonMainSaveRow" press=".onSave('mainTable', 'list')"   type="Emphasized"/>
              <ToolbarSeparator/>
              <Button icon="sap-icon://action-settings" press=".onMainTablePersoButtonPressed" >
                <layoutData>
                  <OverflowToolbarLayoutData priority="NeverOverflow"/>
                </layoutData>
              </Button>
            </OverflowToolbar>
          </t:extension>
          <t:rowSettingsTemplate>
            <!-- <t:RowSettings highlight="Success"/> -->
            <!-- <t:RowSettings highlight="Success"/> -->
          </t:rowSettingsTemplate>
          <t:columns>
            <t:Column id="mainStateColumn" minScreenWidth="Tablet" hAlign="Center" width="40px">
              <Label text="" textAlign="Center" width="100%"/>
              <t:template>
                <Text text="{list>_row_state_}"></Text>
              </t:template>
            </t:Column>
            <t:Column width="0rem" hAlign="Center" visible="false">
              <Label text="tenant_id"/>
              <t:template>
                <Text text="{list>tenant_id}"/>
              </t:template>
            </t:Column>
            <t:Column id="mainTimezoneCodeColumn">
              <Label text="{I18N>/CODE}" textAlign="Center" width="100%"/>
              <t:template>
                <Input value="{list>timezone_code}" valueLiveUpdate="true"/>
              </t:template>
            </t:Column>
            <t:Column id="mainTimezoneNameColumn">
              <Label text="{I18N>/TIMEZONE}" textAlign="Center" width="100%"/>
              <t:template>
                <Input value="{list>timezone_name}" valueLiveUpdate="true"/>
              </t:template>
            </t:Column>
            <t:Column id="mainCountryCodeColumn">
              <Label text="{I18N>/COUNTRY}" textAlign="Center" width="100%"/>
              <t:template>
                <ComboBox
                  width="100%"
                  items="{
                    path: 'country>/Country',
                    filters: [
                    ]
                  }"
                  selectedKey="{list>country_code}">
                  <items>
                    <core:Item key="{country>country_code}" text="{country>country_code} : {country>iso_code}" value="{country>country_code}" valueLiveUpdate="true" />
                  </items>
                </ComboBox>
              </t:template>
            </t:Column>
            <t:Column id="mainGmtOffsetColumn">
              <Label text="{I18N>/GMT}" textAlign="Center" width="100%"/>
              <t:template>
                <Input value="{list>gmt_offset}" valueLiveUpdate="true"/>
              </t:template>
            </t:Column>
            <t:Column headerSpan="1" hAlign="Center">
              <t:multiLabels>
                <Label text="서머타임" textAlign="Center" width="100%"/>
                <Label text="적용여부" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <CheckBox selected="{list>dst_flag}" textAlign="Center"/>
                <!-- <Select width="100%">
                    <core:Item key="{!dst_flag}" text="{dst_flag}" />
                    <core:Item key="{dst_flag}" text="{dst_flag}" />
                </Select> -->
              </t:template>
            </t:Column>
            <t:Column headerSpan="5">
              <t:multiLabels>
                <Label text="서머타임시작" textAlign="Center" width="100%"/>
                <Label text="월" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_start_month}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임시작"/>
                <Label text="일" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_start_day}" valueLiveUpdate="true" type="Number" />
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임시작"/>
                <Label text="주" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_start_week}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임시작"/>
                <Label text="요일" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_start_day_of_week}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임시작"/>
                <Label text="시간" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <!-- <Input value="{list>dst_start_time_rate}"  valueLiveUpdate="true" type="Number"/> -->
                <Input value="{path: 'list>dst_start_time_rate', type: 'sap.ui.model.type.Float' }"  />
              </t:template>
            </t:Column>
            <t:Column headerSpan="5">
              <t:multiLabels>
                <Label text="서머타임종료" textAlign="Center" width="100%"/>
                <Label text="월" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_end_month}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임종료"/>
                <Label text="일" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_end_day}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임종료"/>
                <Label text="주" textAlign="Center" width="100%" />
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_end_week}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임종료"/>
                <Label text="요일" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_end_day_of_week}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
            <t:Column>
              <t:multiLabels>
                <Label text="서머타임종료"/>
                <Label text="시간" textAlign="Center" width="100%"/>
              </t:multiLabels>
              <t:template>
                <Input value="{list>dst_end_time_rate}" valueLiveUpdate="true" type="Number"/>
              </t:template>
            </t:Column>
          </t:columns>
        </t:Table>
      </f:content>
    </f:DynamicPage>
  </App>
</mvc:View>