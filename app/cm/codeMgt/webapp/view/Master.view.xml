<mvc:View
    controllerName="cm.codeMgt.controller.Master"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:tnt="sap.tnt"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout"
    height="100%">
    <f:DynamicPage id="dynamicPageId1" headerExpanded="true" toggleHeaderOnTitleClick="{/titleClickable}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{I18N>/CODE_MANAGEMENT}"/>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <form:SimpleForm
                    maxContainerCols="2"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    adjustLabelSpan="false"
                    labelSpanL="4"
                    labelSpanM="4"
                    emptySpanL="0"
                    emptySpanM="0"
                    columnsL="2"
                    columnsM="2">
                    <form:content>
                        <VBox>
                            <Label
                                text="{I18N>/TENANT}: "
                                labelFor="search_tenant">
                            </Label>
                            <ComboBox   
                                id="search_tenant"
                                placeholder="All"
                                showSecondaryValues= "true"
                                selectionChange=".onTenantChange"
                                selectedKey="{contModel>/tenant_id}"
                                items="{
                                    path : 'orgMgt>/Org_Tenant'
                                }"
                            >
                               <core:ListItem 
                                    key="{orgMgt>tenant_id}" 
                                    text="{orgMgt>tenant_name}"
                                    additionalText="{orgMgt>tenant_id}"/>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData
                                    span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label
                                text="{I18N>/CHAIN}: "
                                labelFor="search_chain">
                            </Label>
                            <!-- <ComboBox   
                                id="search_chain"
                                showSecondaryValues= "true"
                                items="{
                                    path : 'util>/CodeDetails',
                                    filters : [
                                        {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                        {path : 'group_code', operator : 'EQ', value1 : 'CM_CHAIN_CD'}                                                               
                                    ]
                                }"
                            >
                                <core:Item 
                                    key="{util>code}" 
                                    text="{util>code_description}"
                                    additionalText = "{util>code}" />
                            </ComboBox> -->
                            <ComboBox   
                                id="search_chain"
                                placeholder="All"
                                showSecondaryValues= "true"/>
                            <layoutData>
                                <layout:GridData
                                    span="XL2 L3 M6 S12" />
                            </layoutData>   
                        </VBox>
                        <VBox>
                            <Label
                                text="Code Group Useflag: "
                                labelFor="search_codeGroupUseflag">
                            </Label>
                            <SegmentedButton 
                                id="search_useflag"
                                selectedKey="" 
                                width="100%">
                                <items>
                                    <SegmentedButtonItem text="All" width="3em"/>
                                    <SegmentedButtonItem text="Yes" width="3em" key="true"/>
                                    <SegmentedButtonItem text="No" width="3em" key="false"/>
                                </items>
                            </SegmentedButton>
                            <layoutData>
                                <layout:GridData
                                    span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        <VBox>
                            <Label
                                text="{I18N>/KEYWORD}: "
                                labelFor="search_Keyword">
                            </Label>
                            <Input id="search_keyword" 
                                placeholder="Code Group or Code Group Name"/>
                            <layoutData>
                                <layout:GridData
                                    span="XL2 L3 M6 S12" />
                            </layoutData>
                        </VBox>
                        <FlexBox
                            alignItems="Start"
                            justifyContent="End">
                            <Button 
                                id="btn_search"
                                text="{I18N>/SEARCH}"
                                type="Emphasized"
                                press=".onSearch"/>
                            <layoutData>
                                <layout:GridData
                                    span="XL4 L12 M12 S12" />
                            </layoutData>
                        </FlexBox>
                    </form:content>
                </form:SimpleForm>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <Table id="codeMasterTable"
                items="{path: 'viewModel>/CodeMasters'}"
                    sticky="HeaderToolbar,ColumnHeaders"
                    inset="false"
                    class="sapFDynamicPageAlignContent"
                    width="auto">
                <headerToolbar>
                    <Toolbar>
                        <Title text="{I18N>/GROUP_CODE} ({= (${viewModel>/CodeMasters})?${viewModel>/CodeMasters}.length:0})" level="H2"/>
                        <ToolbarSpacer/>
                        <Button 
                            text="{I18N>/ROW_ADD}"
                            type="Transparent" 
                            press=".onCreatePress"/>
                    </Toolbar>
                </headerToolbar>
                <columns>
                    <Column
                        width="8em"
                        hAlign="Center"
                        minScreenWidth="Tablet"
                        demandPopin="true">
                        <Label text="{I18N>/TENANT_ID}"  />
                    </Column>
                    <Column
                        width="6em"
                        hAlign="Center"
                        minScreenWidth="Tablet"
                        demandPopin="true">
                        <Label text="{I18N>/CHAIN_CODE}" />
                    </Column>
                    <Column
                        width="10em"
                        minScreenWidth="Tablet"
                        demandPopin="true">
                        <Label text="{I18N>/CHAIN}" />
                    </Column>
                    <Column
                        width="18em">
                        <Label text="{I18N>/GROUP_CODE}" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true">
                        <Label text="{I18N>/GROUP_CODE_NAME}" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true">
                        <Label text="{I18N>/GROUP_DESC}" />
                    </Column>
                    <Column
                        width="6em"
                        minScreenWidth="Tablet"
                        demandPopin="true">
                        <Label text="{I18N>/USE_FLAG}" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem type="Navigation" press="onListItemPress">
                        <cells>
                            <Text text="{viewModel>tenant_id}" />
                            <Text text="{viewModel>chain_code}" />
                            <Text text="{viewModel>chain_name}" />
                            <Text text="{viewModel>group_code}" />
                            <Text text="{viewModel>group_name}" />
                            <Text text="{viewModel>group_description}" />
                            <Text text="{= ${viewModel>use_flag}?'Yes':'No'}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </f:content>
        <!-- DynamicPage Footer -->
        <f:footer>
        </f:footer>
    </f:DynamicPage>
</mvc:View>