<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core" 
>
    <Dialog id="history" 
        class="sapUiSmallMargin" 
        title="{history>/title}"  
        afterOpen=".onAfterOpen($event, 'undefined', {})"
        contentWidth="50%"
    >
        <VBox>
            <Table
                id="historyTable"
                sticky="HeaderToolbar,ColumnHeaders" 
                inset="false" 
                growing="true"
                growingThreshold="10"
                class="sapFDynamicPageAlignContent" 
                items="{
                    path : 'history>/Pr_ReviewDtlHistView',
                    sorter: {
                        path: 'sequence',
                        descending: true
                    }
                }"
                width="auto"
            >
                <headerToolbar>
                    <OverflowToolbar>
                        <!-- <Title text="{i18n>appTitle} ({= ${history>/Pr_ReviewDtlHistView}.length || 0})" level="H2"/> -->
                        <ToolbarSpacer/>
                        <ToolbarSeparator/>
                        <Button 
                            icon="sap-icon://excel-attachment" 
                            press="onExcel($event, 'Download', ${history>/Pr_ReviewDtlHistView}, {
                                tId: 'historyTable', 
                                fileName: 'History'
                            })"
                        >
                            <layoutData>
                                <OverflowToolbarLayoutData priority="NeverOverflow" />
                            </layoutData>
                        </Button>
                        <Button icon="sap-icon://action-settings" press=".onButtonPress($event, 'personalize', {})">
                            <layoutData>
                                <OverflowToolbarLayoutData priority="NeverOverflow" />
                            </layoutData>
                        </Button> 
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <!-- 순번 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)순번" />
                    </Column>
                    <!-- 작업일 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)작업일" />
                    </Column>
                    <!-- 작업유형 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)작업유형" />
                    </Column>
                    <!-- 변경전 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)변경전" />
                    </Column>
                    <!-- 변경후 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)변경후" />
                    </Column>
                    <!-- 비고 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)비고" />
                    </Column>
                    <!-- 처리자 -->
                    <Column hAlign="Center" width="auto">
                        <Text text="(미정)처리자" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem type="Navigation">
                        <cells>
                            <!-- 순번 -->
                            <Text text="{history>sequence}"/>
                            <!-- 작업일 -->
                            <Text 
                                text="{
                                    path: 'history>local_update_dtm',
                                    formatter: '.dateFormatter.toUTCDateString'
                                }"
                            />
                            <!-- 작업유형 -->
                            <Text text="{history>job_type_name}"/>
                            <!-- 변경전 -->
                            <Text text="{history>before_desc}"/>
                            <!-- 변경후 -->
                            <Text text="{history>after_desc}"/>
                            <!-- 비고 -->
                            <Text text="{history>processed_reason}"/>
                            <!-- 처리자 -->
                            <Text text="{history>worker_name}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </VBox>
        <ToolbarSpacer/>
        <VBox>
            <HBox alignItems="End" justifyContent="End" >
                <Button text="{I18N>/CLOSE}" class="sapUiSmallMarginEnd" 
                    press="onClose($event, 'default', {
                        settled: 'reject'
                    })"
                />
            </HBox>
        </VBox>
    </Dialog>
</core:FragmentDefinition>