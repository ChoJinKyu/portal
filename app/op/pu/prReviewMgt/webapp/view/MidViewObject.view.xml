<mvc:View controllerName="op.pu.prReviewMgt.controller.MidViewObject" 
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns:form="sap.ui.layout.form" 
    xmlns:f="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" 
    xmlns:layout="sap.ui.layout"
    xmlns:tnt="sap.tnt"
    xmlns:co="sap.suite.ui.commons"
    xmlns:si="sap.suite.ui.commons.statusindicator"
    xmlns:u="sap.ui.unified" 
    xmlns:table="sap.ui.table" 
    xmlns="sap.m"
    height="100%"
>
	<uxap:ObjectPageLayout 
        id="page"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
        upperCaseAnchorBar="false"
		showFooter="true"
		editHeaderButtonPress="handleEditBtnPress" >

		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
					<Title text="(미정)구매요청 검토" wrapping="true" />
				</uxap:expandedHeading>

                <uxap:navigationActions>
                    <!-- 전체화면 -->
                    <!-- visible="{= ${midObjectView>/screen} !== 'Full' }"
                    <OverflowToolbarButton 
                        icon="sap-icon://full-screen" 
                        type="Transparent"
                        tooltip="Enter Full Screen Mode" 
                        press=".onNavigationActions.call(this, $event, 'default', { action: 'Full' })"
                    />  -->
                    <!-- 전체화면해제 -->
                    <!-- visible="{= ${midObjectView>/screen} === 'Full' }"
                    <OverflowToolbarButton 
                        icon="sap-icon://exit-full-screen" 
                        type="Transparent"
                        tooltip="Exit Full Screen Mode" 
                        press=".onNavigationActions.call(this, $event, 'default', { action: 'Exit' })"
                    />  -->
                    <!-- 뒤로가기 -->
                    <!-- visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }" -->
                    <OverflowToolbarButton 
                        icon="sap-icon://decline" 
                        type="Transparent"
                        text="back" 
                        tooltip="Back to the list" 
                        press=".onNavigationActions.call(this, $event, 'default', { action: 'NavBack' })"
                    />
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap" >
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <Label text="{I18N>/PR_NUMBER} :"/>
                    <ObjectStatus
                        text="{detail>/Pr_ReviewDtlView/pr_number}"
                    />
                    <Label text="{I18N>/PR_REQUEST_DATE} :"/>
                    <ObjectStatus
                        text="{ 
                            path: 'detail>/Pr_ReviewDtlView/request_date',
                            type: 'sap.ui.model.type.Date',
                            formatOptions: {
                                pattern: 'yyyy-MM-dd'
                            }
                        }"
                    />
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <!-- <Label text="{I18N>/PR_TEMPLATE_NUMBER} :"/>
                    <ObjectStatus
                        text="{detail>/Pr_ReviewDtlView/pr_number}"/> -->
                    <Label text="{I18N>/REQUESTOR_NAME} :"/>
                    <ObjectStatus
                        text="{detail>/Pr_ReviewDtlView/requestor_name}"/>
				</layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<Label text="{I18N>/PR_CREATE_STATUS_CODE} :"/>
                    <ObjectStatus
                        class="sapMObjectStatusLarge"
                        text="{detail>/Pr_ReviewDtlView/pr_create_status_name}"
                        state="Error" />
				</layout:VerticalLayout>
                
                <!-- Process 시작 -->
                <!-- <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                      <HBox>
                        <Title text="Process"/>
                    </HBox>
                    <HBox>
                        <co:MicroProcessFlow>
                            <co:content>
                                <co:MicroProcessFlowItem state="Error" width="2em" stepWidth="5em" icon="sap-icon://circle-task" />
                                <co:MicroProcessFlowItem state="None" width="2em" stepWidth="5em" />
                                <co:MicroProcessFlowItem state="None" width="2em" stepWidth="5em" />
                                <co:MicroProcessFlowItem state="None" width="2em" stepWidth="5em" />
                            </co:content>
                        </co:MicroProcessFlow>
                    </HBox>
                    <HBox>
                        <Text text="{I18N>/PURCHASE_REQUISITION}" width="5em" textAlign="Left" renderWhitespace="true" />
                        <Text text="{I18N>/QUOTATION}" width="7em" textAlign="Center" />
                        <Text text="{I18N>/BIDDING}" width="7em" textAlign="Center" />
                        <Text text="{I18N>/PURCHASE_ORDER}" width="5em" textAlign="Center" />
                    </HBox>
                </layout:VerticalLayout> -->
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections id="pss">
            <!-- 기본정보 -->
			<uxap:ObjectPageSection titleUppercase="true" title="{I18N>/BASIC_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <form:SimpleForm editable="false">
                                    <core:Title text="{I18N>/BASIC_INFO}" />
                                    <Label text="(미정)구매요청번호"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/pr_number}" width="10em" textAlign="Left" />
                                    <Label text="(미정)품목번호"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/pr_item_number}" width="10em" textAlign="Left" />
                                    <Label text="(미정)ERP구매요청번호"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/erp_pr_number}" width="10em" textAlign="Left" />
                                    <Label text="(미정)진행상태"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/pr_progress_status_name}" width="10em" textAlign="Left" />

                                    <core:Title text="" />
                                    <Label text="(미정)구매요청유형"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/pr_type_name}" width="10em" textAlign="Left" />
                                    <Label text="(미정)품목그룹"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/pr_type_name_2}" width="10em" textAlign="Left" />
                                    <Label text="(미정)품목"/>
                                    <Text text="{detail>/Pr_ReviewDtlViewpr_type_name_3}" width="10em" textAlign="Left" />
                                    <Label text="(미정)구매요청템플릿"/>
                                    <Text text="{detail>/Pr_ReviewDtlView/pr_tempalte_number}" width="10em" textAlign="Left" />
                            </form:SimpleForm>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
            </uxap:ObjectPageSection>
            
            <!-- 품목/담당자 정보 -->
			<uxap:ObjectPageSection titleUppercase="true" title="(미정)품목/담당자정보">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <form:SimpleForm editable="false">
                                <core:Title text="(미정)품목정보" />
                                <Label text="(미정)조직코드"/>
                                <Text text="{detail>/Pr_ReviewDtlView/org_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)자재코드"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/material_code}] {detail>/Pr_ReviewDtlView/material_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)품명"/>
                                <Text text="{detail>/Pr_ReviewDtlView/pr_desc}" width="10em" textAlign="Left" />
                                <Label text="(미정)비고"/>
                                <Text text="{detail>/Pr_ReviewDtlView/remark}" width="10em" textAlign="Left" />

                                <Label text="(미정)자재그룹"/>
                                <Text text="{detail>/Pr_ReviewDtlView/material_group_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)품목범주"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/item_category_code}] {detail>/Pr_ReviewDtlView/item_category_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)저장위치"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/slot_code}] {detail>/Pr_ReviewDtlView/slot_name}" width="10em" textAlign="Left" />
                            
                                <core:Title text="(미정)담당자정보"/>
                                <Label text="(미정)구매요청자"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/requestor_department_name}] {detail>/Pr_ReviewDtlView/requestor_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)구매담당자"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/buyer_department_name}] {detail>/Pr_ReviewDtlView/buyer_name}" width="10em" textAlign="Left" />

                                <Label text="(미정)요청자명"/>
                                <Text text="{detail>/Pr_ReviewDtlView/requestor_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)구매그룹"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/purchasing_group_code}] {detail>/Pr_ReviewDtlView/purchasing_group_name}" width="10em" textAlign="Left" />
                                <Label text="(미정)자재구매그룹"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/material_purchasing_group_code}] {detail>/Pr_ReviewDtlView/material_purchasing_group_name}" width="10em" textAlign="Left" />
                            </form:SimpleForm>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
            </uxap:ObjectPageSection>
            
            <!-- 수량/금액/일자/공급업체 정보 -->
			<uxap:ObjectPageSection titleUppercase="true" title="(미정)수량/금액/일자정보">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <form:SimpleForm editable="false">
                                <core:Title text="(미정)수량/금액정보"/>
                                <Label text="(미정)요청수량"/>
                                <Text 
                                    text="{
                                        path: 'detail>/Pr_ReviewDtlView/pr_quantity', 
                                        formatter: '.numberFormatter.toNumberString'
                                    }" 
                                    width="10em" 
                                    textAlign="Left" 
                                />
                                <Label text="(미정)잔여수량"/>
                                <Text 
                                    text="{
                                        path: 'detail>/Pr_ReviewDtlView/remain_quantity', 
                                        formatter: '.numberFormatter.toNumberString'
                                    }" 
                                    width="10em" 
                                    textAlign="Left" 
                                />
                                <Label text="(미정)단가예산"/>
                                <Text 
                                    text="{
                                        parts: [
                                            { path: 'detail>/Pr_ReviewDtlView/estimated_price', formatter: '.numberFormatter.toNumberString' },
                                            { path: 'detail>/Pr_ReviewDtlView/currency_code' }
                                        ]
                                    }"
                                    width="10em" 
                                    textAlign="Left" 
                                />

                                <Label text="(미정)Per"/>
                                <Text text="{detail>/Pr_ReviewDtlView/price_unit}" width="10em" textAlign="Left" />
                                <Label text="(미정)금액"/>
                                <Text 
                                    text="{
                                        parts: [
                                            { path: 'detail>/Pr_ReviewDtlView/pr_amount', formatter: '.numberFormatter.toNumberString' },
                                            { path: 'detail>/Pr_ReviewDtlView/currency_code' }
                                        ]
                                    }"
                                    width="10em" 
                                    textAlign="Left" 
                                />

                                <core:Title text="(미정)일자정보" />
                                <Label text="(미정)생성일자"/>
                                <Text 
                                    text="{
                                        path: 'detail>/Pr_ReviewDtlView/request_date',
                                        formatter: '.dateFormatter.toUTCDateString'
                                    }"
                                    width="10em" 
                                    textAlign="Left"
                                />
                                <Label text="(미정)납품요청일자"/>
                                <Text 
                                    text="{
                                        path: 'detail>/Pr_ReviewDtlView/delivery_request_date',
                                        formatter: '.dateFormatter.toUTCDateString'
                                    }"
                                    width="10em" 
                                    textAlign="Left"
                                />
                                <Label text="(미정)결재일자"/>
                                <Text 
                                    text="{
                                        path: 'detail>/Pr_ReviewDtlView/approval_date',
                                        formatter: '.dateFormatter.toUTCDateString'
                                    }"
                                    width="10em" 
                                    textAlign="Left"
                                />
                                <Label text="(미정)변경일자"/>
                                <Text 
                                    text="{
                                        path: 'detail>/Pr_ReviewDtlView/locale_update_dtm',
                                        formatter: '.dateFormatter.toUTCDateString'
                                    }"
                                    width="10em" 
                                    textAlign="Left"
                                />
                            </form:SimpleForm>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
            </uxap:ObjectPageSection>
            
            <!-- 계정지정 정보 -->
			<uxap:ObjectPageSection titleUppercase="true" title="(미정)공급업체정보" visible="{= !!${detail>/Pr_ReviewDtlView/supplier_code}}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <form:SimpleForm>
                                <core:Title text="(미정)공급업체정보" />
                                <Label text="(미정)공급업체"/>
                                <Text text="[{detail>/Pr_ReviewDtlView/supplier_code}] {detail>/Pr_ReviewDtlView/supplier_name}" width="10em" textAlign="Left" />
                                
                                <core:Title text="" />
                            </form:SimpleForm>
                        </uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
            </uxap:ObjectPageSection>

            <!-- 계정지정 정보 -->
			<uxap:ObjectPageSection titleUppercase="true" title="(미정)계정지정정보" visible="{= ${accounts>/Pr_ReviewDtlAcctView}.length} > 0}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                            <VBox class="sapUiSmallMargin">
                                <Table 
                                    id="accountsTable" 
                                    visible="true"
                                    sticky="HeaderToolbar,ColumnHeaders" 
                                    inset="false" 
                                    growing="true"
                                    mode="None"
                                    growingThreshold="10"
                                    class="sapFDynamicPageAlignContent" 
                                    items="{
                                        path : 'accounts>/Pr_ReviewDtlAcctView',
                                        sorter: {
                                            path: 'pr_number',
                                            descending: true
                                        }
                                    }"                        
                                    width="auto"
                                >
                                    <headerToolbar>
                                        <OverflowToolbar>
                                            <!-- <Title text="(미정)계정지정정보 ({= ${accounts>/Pr_ReviewDtlAcctView}.length || 0})" level="H2"/> -->
                                            <!-- <Title text="(미정)계정지정정보" level="H2"/> -->
                                            <ToolbarSpacer/>
                                            <Button icon="sap-icon://excel-attachment" press="onExcelDownload($event, 'Download', ${list>/Pr_ReviewDtlAcctView}, {fileName: 'Account List', tId: 'accountsTable' })">
                                                <layoutData>
                                                    <OverflowToolbarLayoutData priority="NeverOverflow" />
                                                </layoutData>
                                            </Button>
                                            <Button icon="sap-icon://action-settings" press=".onPersonalize($event)" >
                                                <layoutData>
                                                    <OverflowToolbarLayoutData priority="NeverOverflow" />
                                                </layoutData>
                                            </Button> 
                                        </OverflowToolbar>
                                    </headerToolbar>
                                    <columns>
                                        <!-- 구매요청 번호 -->
                                        <Column hAlign="Center" width="auto">
                                            <Text text="(미정)코스트센터" />
                                        </Column>
                                        <!-- 구매요청 유형 -->
                                        <Column hAlign="Center" width="auto">
                                            <Text text="(미정)계정코드" />
                                        </Column>
                                        <!-- 품목 번호 -->
                                        <Column hAlign="Center" width="auto">
                                            <Text text="(미정)WBS코드" />
                                        </Column>
                                        <!-- 조직코드 -->
                                        <Column hAlign="Center" width="auto">
                                            <Text text="(미정)자산번호" />
                                        </Column>
                                        <!-- 자재코드 -->
                                        <Column demandPopin="true" minScreenWidth="Desktop" popinDisplay="Inline" hAlign="Center" width="auto">
                                            <Text text="(미정)계정지정범주" />
                                        </Column>
                                    </columns>
                                    <items>
                                        <ColumnListItem type="Navigation" press=".onColumnListItemPress.call(this, $event, '${list>/this}')">
                                            <cells>
                                                <!-- 코스트센터 -->
                                                <Text text="[{accounts>cctr_code}] {accounts>cctr_name}" width="10em" textAlign="Left" />
                                                <!-- 계정코드 -->
                                                <Text text="[{accounts>account_code}] {accounts>account_name}" width="10em" textAlign="Left" />
                                                <!-- WBS코드 -->
                                                <Text text="[{accounts>wbs_code}] {accounts>wbs_name}" width="10em" textAlign="Left" />
                                                <!-- 오더번호 -->
                                                <Text text="[{accounts>order_number}] {accounts>order_name}" width="10em" textAlign="Left" />
                                                <!-- 자산번호 -->
                                                <Text text="[{accounts>asset_number}] {accounts>asset_name}" width="10em" textAlign="Left" />
                                                <!-- 계정지정범주 -->
                                                <Text text="[{accounts>account_assignment_category_code}] {accounts>account_assignment_category_name}" width="10em" textAlign="Left" />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </VBox>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
        </uxap:sections>
        
		<uxap:footer>
			<OverflowToolbar>
                <ToolbarSpacer />
                <Button text="(미정)변경이력" type="Transparent" press=".onButtonPress($event, 'changed')" />
                <Button text="(미정)발주이력" type="Transparent" press=".onButtonPress($event, 'ordered')" />
                <Button text="(미정)사용실적" type="Transparent" press=".onButtonPress($event, 'results')" />
			    <Button text="{I18N>/CLOSE}" type="Emphasized"  press=".onButtonPress.call(this, $event, 'default', { action: 'NavBack' })" />
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>