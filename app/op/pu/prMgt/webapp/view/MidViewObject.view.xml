<mvc:View controllerName="op.pu.prMgt.controller.MidViewObject" 
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns:form="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" 
    xmlns:layout="sap.ui.layout"
    xmlns:tnt="sap.tnt"
    xmlns:co="sap.suite.ui.commons"
    xmlns:si="sap.suite.ui.commons.statusindicator"
    xmlns:u="sap.ui.unified" 
    xmlns:table="sap.ui.table" 
    xmlns="sap.m"
	height="100%">

	<uxap:ObjectPageLayout 
        id="page"
		showTitleInHeaderContent="true"
		showEditHeaderButton="true" 
        upperCaseAnchorBar="false"
		showFooter="true"
		editHeaderButtonPress="handleEditBtnPress" >

		<uxap:headerTitle>
			<uxap:ObjectPageDynamicHeaderTitle>
				<uxap:expandedHeading>
					<Title text="{I18N>/PURCHASE_REQUISITION} {I18N>/'DISPLAY'}" wrapping="true" />
				</uxap:expandedHeading>

                <uxap:navigationActions>
					<OverflowToolbarButton id="pageNavigationBackButton" icon="sap-icon://decline" text="back" tooltip="back to the list" press=".onNavigationBackPress" />
                </uxap:navigationActions>
			</uxap:ObjectPageDynamicHeaderTitle>
		</uxap:headerTitle>

		<uxap:headerContent>
			<FlexBox wrap="Wrap" >
				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <Label text="{I18N>/PR_NUMBER} :"/>
                    <ObjectStatus
                        text="{detailModel>/mst/pr_number}"/>
                    <Label text="{I18N>/PR_REQUEST_DATE} :"/>
                    <ObjectStatus
                        text="{ path: 'detailModel>/mst/request_date',
                                type: 'sap.ui.model.type.Date',
                                formatOptions: {
                                pattern: 'yyyy-MM-dd'
                                }
                            }"/>
				</layout:VerticalLayout>

				<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <Label text="{I18N>/PR_TEMPLATE_NUMBER} :"/>
                    <ObjectStatus
                        text="{detailModel>/mst/pr_template_number}"/>
                    <Label text="{I18N>/REQUESTOR_NAME} :"/>
                    <ObjectStatus
                        text="{detailModel>/mst/requestor_name}"/>
				</layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<Label text="{I18N>/PR_CREATE_STATUS_CODE} :"/>
                    <ObjectStatus
                        class="sapMObjectStatusLarge"
                        text="{detailModel>/mst/pr_create_status_name}"
                        state="Error" />
				</layout:VerticalLayout>
                
                <!-- Process 시작 -->
                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                      <HBox>
                        <Title text="Process"/>
                    </HBox>
                    <HBox>
                        <co:MicroProcessFlow>
                            <co:content>
                                <co:MicroProcessFlowItem state="Error" width="2em" stepWidth="5em" icon="sap-icon://circle-task" />
                                <co:MicroProcessFlowItem state="None" width="2em" stepWidth="5em" />
                                <co:MicroProcessFlowItem state="None" width="2em" stepWidth="5em" />
                                <co:MicroProcessFlowItem state="None" width="2em" stepWidth="5em" />
                            </co:content>
                        </co:MicroProcessFlow>
                    </HBox>
                    <HBox>
                        <Text text="{I18N>/PURCHASE_REQUISITION}" width="5em" textAlign="Left" renderWhitespace="true" />
                        <Text text="{I18N>/QUOTATION}" width="7em" textAlign="Center" />
                        <Text text="{I18N>/BIDDING}" width="7em" textAlign="Center" />
                        <Text text="{I18N>/PURCHASE_ORDER}" width="5em" textAlign="Center" />
                    </HBox>
                </layout:VerticalLayout>
			</FlexBox>
		</uxap:headerContent>

		<uxap:sections id="pss">

			<uxap:ObjectPageSection  id="pageSectionMain" titleUppercase="true" title="{I18N>/BASIC_INFO}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd"> 
                           <HBox alignItems="Center">
                            <VBox>
                                <Label
                                    text="{I18N>/APPROVAL_TITLE}"                                      
                                    class="sapUiTinyMarginEnd"
                                    textAlign="Left"
                                    labelFor="input"/>
                            </VBox> 
                             <VBox alignItems="Center">
                                <Label
                                    text="{detailModel>/mst/pr_header_text}"
                                    visible="true"
                                    width="40em"  >
                                </Label>
                            </VBox>
                           </HBox>                           
                            <HBox alignItems="Center">
                                <VBox>
                                <Label
                                    text="{I18N>/APPROVAL_CONTENTS}"                           
                                    class="sapUiTinyMarginEnd"
                                    textAlign="Left"
                                    labelFor="input"/>
                                </VBox> 
                                <VBox alignItems="Center">
                                <FormattedText htmlText="{detailModel>/mst/approval_contents}"  width="40em"  />
                                </VBox>   
                            </HBox>
                            
                        </layout:VerticalLayout> 						
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

            <!-- 품목 정보 시작 -->
            <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/ITEM_INFO}">
				<uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <!-- Participating Supplier Table -->
                        <table:Table id="pritemTable"
                                selectionMode="None"
                                fixedColumnCount="1"
                                visibleRowCountMode="Auto"
                                rows="{detailModel>/dtl}"
                                >
                             <table:extension>
                                <OverflowToolbar>
                                    <Title text="{I18N>/ITEM} ({= ${detailModel>/dtl}.length || 0})" level="H2"/>
                                    <ToolbarSpacer/>
                                    <!-- Add the Personalization button -->
                                    
                                    <Button icon="sap-icon://group-2" />
                                    <Button icon="sap-icon://action-settings" />    
                                </OverflowToolbar>
                            </table:extension>          

                            <table:columns>
                                <table:Column  width="5em" hAlign="Center">
                                    <Label text="{I18N>/ITEM_NUMBER}"/>
                                    <table:template>
                                        <Text id="t_model" text="{detailModel>pr_item_number}"/>
                                    </table:template>
                                </table:Column>
                                <table:Column  width="5em" hAlign="Center">
                                    <Label text="{I18N>/ORG_CODE}" />           
                                    <table:template>
                                        <Text text="{detailModel>org_code}" />
                                    </table:template>
                                </table:Column>
                                <table:Column width="8em" hAlign="Center">
                                    <Label text="{I18N>/MATERIAL_CODE}" />           
                                    <table:template>
                                        <Text  text="{detailModel>material_code}" />
                                    </table:template>
                                </table:Column>                                
                                <table:Column  width="20em" hAlign="Center">
                                    <Label text="{I18N>/PURCHASE_REQUISITION} {I18N>/ITEM_NAME}" />           
                                    <table:template>
                                        <Text text="{detailModel>pr_desc}"/>
                                    </table:template>
                                </table:Column>       
                                <table:Column width="5em" hAlign="Center">
                                    <Label text="{I18N>/REQUEST_QUANTITY}"/>
                                    <table:template>
                                        <Text text="{detailModel>pr_quantity}"/>
                                    </table:template>
                                </table:Column>                                     
                                <table:Column  width="5em" hAlign="Center">
                                    <Label text="{I18N>/UNIT}" />           
                                    <table:template>
                                        <Text text="{detailModel>pr_unit}"/>
                                    </table:template>
                                </table:Column>
                                <table:Column  width="8em"  hAlign="Center">
                                    <Label text="납품일" />           
                                    <table:template>
                                        <Text text="{
                                                    path:'detailModel>delivery_request_date',
                                                    type:'sap.ui.model.odata.type.DateTime',
                                                    formatOptions: {
                                                        UTC: true,
                                                        pattern: 'yyyy-MM-dd'
                                                    }
                                                }"/>
                                    </table:template>
                                </table:Column>    
                                <table:Column  width="10em" hAlign="Center">
                                    <Label text="{I18N>/PRICE}" />           
                                    <table:template>
                                        <Text text="{detailModel>estimated_price}"/>
                                    </table:template>
                                </table:Column>                               
                                <table:Column  width="5em" hAlign="Center">
                                    <Label text="{I18N>/CURRENCY}" />           
                                    <table:template>
                                        <Text text="{detailModel>currency_code}"/>
                                    </table:template>
                                </table:Column> 

                                <table:Column  width="5em" hAlign="Center">
                                    <Label text="{I18N>/PRICE_UNIT}" />           
                                    <table:template>
                                        <Text text="{detailModel>price_unit}"/>
                                    </table:template>
                                </table:Column>    

                                <table:Column  width="8em" hAlign="Center">
                                    <Label text="{I18N>/BUYER}"/>           
                                    <table:template>
                                        <Text text="{detailModel>buyer_empno}"/>
                                    </table:template>
                                </table:Column> 


                                <table:Column width="10em" hAlign="Center">
                                    <Label text="{I18N>/PURCHASING_GROUP_CODE}"/>           
                                    <table:template>
                                        <Text text="{detailModel>purchasing_group_code}"/>
                                    </table:template>
                                </table:Column>


                                <table:Column width="10em" hAlign="Center">
                                    <Label text="{I18N>/MATERIAL_GROUP_CODE}"/>           
                                    <table:template>
                                        <Text text="{detailModel>material_group_code}"/>
                                    </table:template>
                                </table:Column>


                                <table:Column width="10em" hAlign="Center">
                                    <Label text="{I18N>/STORAGE_LOCATION}"/>           
                                    <table:template>
                                        <Text text="{detailModel>sloc_code}"/>
                                    </table:template>
                                </table:Column>  


                                <table:Column width="10em" hAlign="Center">
                                    <Label text="{I18N>/REMARK}"/>           
                                    <table:template>
                                        <Text text="{detailModel>remark}"/>
                                    </table:template>
                                </table:Column>  



                            </table:columns>
                          </table:Table>
                       
                        <!-- // -->
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
            <!-- 품목 정보 끝 -->


            <!-- 첨부파일 시작 -->
			<uxap:ObjectPageSection titleUppercase="false" title="Attachment">
				<uxap:subSections>
                    <uxap:ObjectPageSubSection title="외부용" level="H2">
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd" width="100%">                    
                            <UploadCollection
                                id="UploadCollectionOuter"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="true"
                                sameFilenameAllowed="false"
                                instantUpload="false"
                                noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                change="onChange"
                                fileDeleted="onFileDeleted"
                                filenameLengthExceed="onFilenameLengthExceed"
                                fileSizeExceed="onFileSizeExceed"
                                typeMissmatch="onTypeMissmatch"
                                uploadComplete="onUploadComplete"
                                beforeUploadStarts="onBeforeUploadStarts" />                            
                        </layout:VerticalLayout>
					</uxap:ObjectPageSubSection>

                    <uxap:ObjectPageSubSection title="내부용" level="H2">
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd" width="100%">                    
                            <UploadCollection
                                id="UploadCollectionInner"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="true"
                                sameFilenameAllowed="false"
                                instantUpload="false"
                                noDataDescription="Drop files or use the &quot;Add&quot; button to keep files ready for upload"
                                change="onChange"
                                fileDeleted="onFileDeleted"
                                filenameLengthExceed="onFilenameLengthExceed"
                                fileSizeExceed="onFileSizeExceed"
                                typeMissmatch="onTypeMissmatch"
                                uploadComplete="onUploadComplete"
                                beforeUploadStarts="onBeforeUploadStarts" />                            
                        </layout:VerticalLayout>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
            <!-- 첨부파일 끝 -->

			<uxap:ObjectPageSection titleUppercase="false" title="Report Line">
				<uxap:subSections>
					<uxap:ObjectPageSubSection titleUppercase="false">
						<uxap:blocks>
                           
						</uxap:blocks>
					</uxap:ObjectPageSubSection>

					<uxap:ObjectPageSubSection>
						<uxap:blocks>
                           
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>

		</uxap:sections>
		<uxap:footer>
			<OverflowToolbar>
				<ToolbarSpacer />
			    <Button type="Emphasized" id="Btn_Cancel"  text="{I18N>/CLOSE}"   press=".onNavigationBackPress" />
				<Button type="Transparent"  id="Btn_PageEdit"  
                    visible="{= ${detailModel>/mst/pr_create_status_code}==='10'?true:false }"  text="{I18N>/EDIT}"     press=".onPageEditButtonPress"/>
                <Button type="Transparent" id="Btn_Copy"  text="{I18N>/COPY}"   press=".onPageCopyButtonPress" />
                <Button type="Transparent"  id="Btn_PageDelete"  
                    visible="{= ${detailModel>/mst/pr_create_status_code}==='10'?true:false }"  text="{I18N>/DELETE}"     press=".onPageDeleteButtonPress"/>    
			</OverflowToolbar>
		</uxap:footer>
	</uxap:ObjectPageLayout>
</mvc:View>