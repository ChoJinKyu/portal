<mvc:View
    controllerName="pg.mi.miBom.controller.MidObject"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    height="100%">

        <Page id="page" 
        title="{I18N>/MIMATERIAL_BOM_TITLE}" 
        showHeader="false"
        busy="{oUi>/busy}">
                <uxap:ObjectPageLayout                    
                    toggleHeaderOnTitleClick="true"
                    alwaysShowContentHeader="true"
                    preserveHeaderStateOnScroll="false"
                    headerContentPinnable="true"
                    isChildPage="true"
                    upperCaseAnchorBar="false"
                    showTitleInHeaderContent="true"
                    showEditHeaderButton="true"
                    showFooter="true">
                    <uxap:headerTitle>
                        <uxap:ObjectPageDynamicHeaderTitle>              
                            <uxap:heading>
                                <HBox alignItems="Center">
                                    <OverflowToolbarButton type="Transparent" icon="sap-icon://nav-back" press=".onPageNavBackButtonPress"  tooltip="Close column"/>
                                    <Title text="{I18N>/MIMATERIAL_BOM_TITLE} {I18N>/REGISTER}" wrapping="true" class="sapUiSmallMarginEnd" />
                                </HBox>
                            </uxap:heading>

                            <!-- <uxap:navigationActions>
                                <OverflowToolbarButton id="pageEnterFullScreenButton" type="Transparent" icon="sap-icon://full-screen" press="onPageEnterFullScreenButtonPress" tooltip="Enter Full Screen Mode" visible="{midObjectViewModel>/visibility/fullScreenBtn}"/>
                                <OverflowToolbarButton id="pageExitFullScreenButton" type="Transparent" icon="sap-icon://exit-full-screen" press="onPageExitFullScreenButtonPress" tooltip="Exit Full Screen Mode" visible="{= !${midObjectViewModel>/visibility/fullScreenBtn} }"/>
                            </uxap:navigationActions> -->
                        </uxap:ObjectPageDynamicHeaderTitle>

                        <!-- <uxap:ObjectPageDynamicHeaderTitle>
                            <uxap:expandedHeading>
                                <Title text="{I18N>/MIMATERIAL_BOM_TITLE} {I18N>/REGISTER}" wrapping="true"/>
                            </uxap:expandedHeading>
                            <uxap:snappedHeading>
                                <Title text="{I18N>/MIMATERIAL_BOM_TITLE} {I18N>/REGISTER}" wrapping="true"/>
                            </uxap:snappedHeading>
                            <uxap:navigationActions>

                                <OverflowToolbarButton
                                    id="pageNavBackButton"
                                    type="Transparent"
                                    icon="sap-icon://decline"
                                    text="back"
                                    press=".onPageNavBackButtonPress"
                                    visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                            </uxap:navigationActions>
                        </uxap:ObjectPageDynamicHeaderTitle> -->
                    </uxap:headerTitle>
                    <uxap:headerContent>
                        <layout:VerticalLayout>
                            <FlexBox height="30px" 
                                     alignItems="Start" 
                                     justifyContent="Start" 
                                     visible="{= ${oUi>/createMode}===false &amp;&amp; ${oUi>/copyMode}===false}"> 
                                    <Label text="{I18N>/UPDATE_USER_ID} :"/>
                                    <Label text="{oUiData>/update_user_id}"  
                                    class="sapUiTinyMarginBegin sapUiLargeMarginEnd" design="Bold"/>
                                    <Label text="{I18N>/LOCAL_CHANGE_DTM} :"/>
                                    <Label text="{
                                        path: 'oUiData>/system_update_dtm',
                                        type: 'sap.ui.model.type.Date',
                                        formatOptions: {
                                            pattern: 'yyyy/MM/dd'
                                        }                                        
                                    }"  
                                    class="sapUiTinyMarginBegin"  
                                    design="Bold"/>  
                                    
                            </FlexBox>          
                        </layout:VerticalLayout>  
                    </uxap:headerContent>
                    <uxap:sections>
                        <uxap:ObjectPageSection titleUppercase="false" title="{I18N>/BASIC_INFO}"  >
                            <uxap:subSections> 
                                <uxap:ObjectPageSubSection>      
                                    <layout:VerticalLayout width="100%">
                                        <FlexBox height="28px" alignItems="Start" justifyContent="Start" class="sapUiTinyMarginTop">
                                            <Label text="{I18N>/BOM}" required="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}"/>
                                        </FlexBox>
                                        <!-- <FlexBox height="40px" alignItems="Start" justifyContent="Start"
                                                 visible="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}" 
                                                 class="sapUiTinyMarginBottom">         -->
                                        <FlexBox height="40px" alignItems="Start" justifyContent="Start"
                                                 visible="false" 
                                                 class="sapUiTinyMarginBottom">        
                                            <RadioButtonGroup id="radioButtonGroup" columns="3" width="100%" selectedIndex="0">
                                                <RadioButton id="radioButtonType01" text="{I18N>/MATERIAL_NAME}/{I18N>/CODE}" />
                                                <RadioButton id="radioButtonType02" text="{I18N>/SUPPLIER}/{I18N>/CODE}" />
                                            </RadioButtonGroup>  
                                        </FlexBox>
                                        <Input id="input_hidden_material_code" visible="false" />
                                        <Input id="input_hidden_material_desc" visible="false"/>
                                        <Input id="input_hidden_supplier_code" visible="false"/>
                                        <Input id="input_hidden_supplier_local_name" visible="false"/>
                                        <Input id="input_hidden_supplier_english_name" visible="false"/>
                                        <Input id="input_material_code" 
                                                required="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}"
                                                width="100%"
                                                visible="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}"
                                                class="sapUiSmallMarginBottom"                                                    
                                                showValueHelp="true" 
                                                enabled = "true"
                                                valueHelpOnly="true"
                                                placeholder="{I18N>/OPTION}"
                                                valueHelpRequest=".handleValueHelpMaterial"
                                                value="{
                                                        path : '{_oUiData>/string}',
                                                        type : 'sap.ui.model.type.String',
                                                        constraints : {
                                                            minLength: 1,
                                                            maxLength: 30
                                                        }
                                                    }"  
                                                />
                                                                                
                                        <FlexBox    height="40px" 
                                                    alignItems="Start" 
                                                    justifyContent="Start" 
                                                    class="sapUiTinyMarginBottom"
                                                    visible="{= ${oUi>/createMode}===false &amp;&amp; ${oUi>/copyMode}===false}">        
                                            <Label  text="[{oUiData>/material_code}] {oUiData>/material_desc} / [{oUiData>/supplier_code}] {oUiData>/supplier_local_name}" design="Bold"/>
                                        </FlexBox>                                          
                                        <FlexBox height="40px" alignItems="Start" justifyContent="Start" class="sapUiLargeMarginBottom" >        
                                            <layout:VerticalLayout class="sapUiLargeMarginEnd">
                                                <Label  text="{I18N>/BASE_QUANTITY}:" 
                                                        required="{oUi>/createMode}"
                                                        class="sapUiTinyMarginBottom"/>                                               
                                                <Label  text="{oUiData>/base_quantity}"
                                                        visible="{oUi>/readMode}"
                                                        width="60px"   textAlign="End"                                                          
                                                        design="Bold"/>
                                                <Input  id="input_base_quantity"
                                                        required="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}"
                                                        class="sapUiSmallMarginBottom"
                                                        type = "Number"
                                                        placeholder="Number" 
                                                        liveChange="._checkNumber"
                                                        textAlign="Right"                                                                                               
                                                        visible="{= !${oUi>/readMode}}" 
                                                        value="{oUiData>/base_quantity}"                                                         
                                                        />    
                                                        <!-- path : '{_oUiData>/number}',
                                                            type : 'sap.ui.model.type.Integer',
                                                            constraints : {
                                                                minLength: 1,
                                                                maxLength: 10
                                                            }    -->
                                            </layout:VerticalLayout>  
                                            <!-- 수정추가 -->
                                            <layout:VerticalLayout class="sapUiTinyMarginBottom sapUiLargeMarginBegin sapUiLargeMarginEnd" >
                                                <Label  text="{I18N>/BASE_QUANTITY} {I18N>/UNIT}:"  class="sapUiTinyMarginBottom"/>
                                                <Label  text="{oUiData>/base_quantity_unit}" 
                                                        design="Bold" textAlign="Center" 
                                                        width="70px"                                                                                                                 
                                                        visible="{oUi>/readMode}"
                                                        />
                                                <Input  id="input_base_quantity_unit"
                                                        visible="{= !${oUi>/readMode}}" 
                                                        textAlign="Center" editable="false"
                                                        value="{oUiData>/base_quantity_unit}"                                                                                                                                                                        
                                                />
                                                
                                                
                                                
                                                    <!-- <HBox  height="40px" alignItems="Center" justifyContent="Center" >
                                                    <Text text="{NewMaterial>/uom_code}" textAlign="Center"  />
                                                </HBox> -->
                                            </layout:VerticalLayout> 
                                            <!-- 수정추기 끝 -->
                                            <layout:VerticalLayout class="sapUiTinyMarginBottom sapUiLargeMarginBegin sapUiLargeMarginEnd">
                                                <Label  text="{I18N>/PROCESSING_COST}:" 
                                                required="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}" 
                                                class="sapUiTinyMarginBottom"/>
                                                <Label  text="{
                                                            path:'oUiData>/processing_cost', 
                                                            type:'sap.ui.model.type.Float'}" 
                                                        design="Bold" 
                                                        visible="{oUi>/readMode}"
                                                        width="50px" textAlign="End"                                                             
                                                        class="sapUiLargeMarginEnd"/>
                                                <Input  id="input_processing_cost"
                                                        required="{= ${oUi>/createMode}===true || ${oUi>/copyMode}===true}"
                                                        visible="{= !${oUi>/readMode}}" 
                                                        type = "Number"
                                                        placeholder="Number"
                                                        liveChange="._checkNumber"
                                                        textAlign="Right"
                                                        value="{oUiData>/processing_cost}"                                                                                                                                                                        
                                                />
                                                 <!-- value="{
                                                            path : '{_oUiData>/number}',
                                                            type : 'sap.ui.model.type.Integer',
                                                            constraints : {
                                                                minLength: 1,
                                                                maxLength: 10
                                                            }
                                                        }"   -->
                                            </layout:VerticalLayout>                                          
                                            <layout:VerticalLayout class="sapUiLargeMarginBegin sapUiLargeMarginBottom" >
                                          
                                                <Label  text="{I18N>/PCST_CURRENCY_CODE}:"                                                        
                                                        class="sapUiTinyMarginBottom"/>
                                                <Label  text="{oUiData>/pcst_currency_unit}" 
                                                        design="Bold" 
                                                        width="70px" textAlign="Center"                                                                                                                  
                                                        visible="{oUi>/readMode}"
                                                        />
                                                            <!-- required="{= !${oUi>/readMode}}"                                           -->
                                                <ComboBox
                                                    id="comboBox_pcst_currency_unit"                                                     
                                                    items ="{
                                                        path : '/CurrencyUnitView',
                                                        filters : [
                                                                {   path : 'tenant_id', 
                                                                    operator : 'EQ', 
                                                                    value1 : 'L2100'
                                                                },
                                                                {   path : 'language_code', 
                                                                    operator : 'EQ', 
                                                                    value1 : 'KO'
                                                                }
                                                        ]
                                                    }"
                                                    showSecondaryValues= "true" filterSecondaryValues="true"
                                                    selectedKey="{oUiData>/pcst_currency_unit}"                                       
                                                    placeholder="{I18N>/OPTION}"
                                                    visible="{= !${oUi>/readMode}}" 
                                                >
                                                    <!-- <core:Item key="{currency_code}" text="{currency_code} : {currency_code_name}" /> -->
                                                    <core:ListItem key="{currency_code}" text="{currency_code_name}" additionalText="{currency_code}"/>
                                                </ComboBox>
                                            </layout:VerticalLayout>                                                                                        
                                        </FlexBox>    
                                    </layout:VerticalLayout>

                                </uxap:ObjectPageSubSection>
                            </uxap:subSections>
                        </uxap:ObjectPageSection>
                        <uxap:ObjectPageSection title="{I18N>/MI_MATERIAL} {I18N>/LIST}"  >
                            <uxap:subSections>
                                <uxap:ObjectPageSubSection>
                                    <!-- id="midTable" 
                                            items="{path: 'midList>/', templateSharable: false}"
                                            mode="{= ${oUi>/readMode}?'None':'MultiSelect'}"
                                            width="100%"  sapFDynamicPageAlignContent-->
                                    <!-- <uxap:blocks> -->
                                        <Table
                                            items="{midList>/}"
                                            mode="{= ${oUi>/readMode}?'None':'MultiSelect'}"
                                            id="midTable" 
                                            growingScrollToLoad="true"
                                            growing="true"
                                            sticky="ColumnHeaders,HeaderToolbar"
                                            
                                            inset="false"  
                                            
                                        >
                                            <headerToolbar>
                                                <OverflowToolbar visible="{=!${oUi>/readMode}}">
                                                    <content>
                                                        <ToolbarSpacer />
                                                            <Button id="buttonMidTableCreate" 
                                                                    text="{I18N>/ROW_ADD}" 
                                                                    type="Transparent" 
                                                                    visible="{=!${oUi>/readMode}}" 
                                                                    press=".onMaterialDetail(false)"/>
                                                            <Button id="buttonMidTableDelete" 
                                                                    text="{I18N>/ROW_DELETE}" 
                                                                    type="Transparent" 
                                                                    visible="{=!${oUi>/readMode}}" 
                                                                    press=".onMidListItemDelete"/>
                                                    </content>
                                                </OverflowToolbar>
                                            </headerToolbar>                                            
                                            <columns> 
                                                <Column hAlign="Center" 
                                                    width="0px"
                                                    visible="false" 
                                                >
                                                    <header>
                                                        <Label text="{I18N>/STATUS}"/>
                                                    </header>
                                                </Column>    
                                                <Column hAlign="Center" 
                                                    width="0px"
                                                    visible="false" 
                                                >
                                                    <header>
                                                        <Text text="ODATA"/>
                                                    </header>
                                                </Column>                                                                                                                                                                                          
                                                <Column width="11%" minScreenWidth ="" demandPopin="false" importance="High"  popinDisplay="WithoutHeader" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/CODE}"/>
                                                    <!-- </header> -->
                                                </Column>                                                                           
                                                <Column width="14%" minScreenWidth ="" demandPopin="false" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/NAME}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="14%" minScreenWidth ="" demandPopin="false" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/CATEGORY}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="7%" minScreenWidth ="" demandPopin="false" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/REQM_QUANTITY_UNIT}" textAlign="Center"/>
                                                    <!-- </header> -->
                                                </Column>                                                
                                                <Column width="10%" minScreenWidth ="Tablet" demandPopin="true" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/REQM_QUANTITY}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="8%" minScreenWidth ="Tablet" demandPopin="true" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/USE_FLAG}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="8%" minScreenWidth ="Tablet" demandPopin="true" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/CURRENCY_UNIT}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="8%" minScreenWidth ="Tablet" demandPopin="true" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/QUANTITY_UNIT}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="10%" minScreenWidth ="Tablet" demandPopin="true" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/EXCHANGE_PG}"/>
                                                    <!-- </header> -->
                                                </Column>
                                                <Column width="10%" minScreenWidth ="Tablet" demandPopin="true" importance="High" hAlign="Center">
                                                    <!-- <header> -->
                                                        <Text text="{I18N>/TERMS_OF_DELIVERY}"/>
                                                    <!-- </header> -->
                                                </Column>
                                            </columns>
                                            <items>
                                                <ColumnListItem type="Inactive">
                                                    <cells>
                                                        <Text text="{midList>itemMode}" />
                                                        <Text text="{midList>odataMode}"/>
                                                        <VBox>
                                                            <Button text="{midList>mi_material_code}"
                                                                    type="Transparent" width="100%"
                                                                    visible="{=!${oUi>/readMode}}"                                                                     
                                                                    press=".onMaterialChange"/>  
                                                            <Text text="{midList>mi_material_code}" 
                                                                  visible="{oUi>/readMode}"/>                                                                                                                           
                                                        </VBox>

                                                        <Text text="{midList>mi_material_name}" />                                          
                                                        <Text text="{midList>category_name}" />  
                                                        <VBox  alignItems="Center">  
                                                            <Text text="{midList>reqm_quantity_unit}" />
                                                            <!-- <Input value="{midList>reqm_quantity_unit}" 
                                                                visible="{=!${oUi>/readMode}}"
                                                                required="{=!${oUi>/readMode}}"
                                                                submit=".onReqmQuantityUnit"                                          
                                                                valueHelpRequest=".onReqmQuantityUnit"                                                                 
                                                                showValueHelp="true"
                                                                valueHelpOnly="true"
                                                                /> 
                                                            <Text   text="{midList>reqm_quantity_unit}"
                                                                    visible="{oUi>/readMode}"/>                                                           -->
  
                                                        </VBox>                                                          
                                                        <VBox alignItems="End">
                                                            <Input  visible="{=!${oUi>/readMode}}"
                                                                    required="{=!${oUi>/readMode}}"
                                                                    type = "Number" 
                                                                    textAlign="Right"
                                                                     
                                                                    liveChange=".onRequiredCheckTable"
                                                                    value="{ path: 'midList>reqm_quantity',
                                                                            type: 'sap.ui.model.type.Float',
                                                                            constraints: {minLength : 1, maxLength : 10} }"/>                                                        
                                                            <Text   text="{midList>reqm_quantity}"
                                                                    visible="{oUi>/readMode}"
                                                             />                                      
                                                        </VBox>
                                                        <VBox  alignItems="Center">  
                                                            <!-- <ComboBox   placeholder="{I18N>/OPTION}"
                                                                        visible="{=!${oUi>/readMode}}" 
                                                                        required="{=!${oUi>/readMode}}"
                                                                        selectedKey="{midList>use_flag}"
                                                                        items="{path:'/UseYNView',
                                                                            filters : [
                                                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'}
                                                                            ] 
                                                                    }"> 
                                                                <items> 
                                                                    <core:ListItem key="{code}" text="{code_name}"/>
                                                                </items>
                                                            </ComboBox>                                                          -->
                                                            <ToggleButton text="{=${midList>use_flag} ? 'YES' : 'NO'}" 
                                                                visible="{=!${oUi>/readMode}}" 
                                                                pressed="{=${midList>use_flag}}" press="onPressUseFlag"/>
                                                            <Text   text="{=${midList>use_flag} ? 'YES' : 'NO'}"
                                                                    visible="{oUi>/readMode}"/> 
                                                        </VBox>         
                                                        <Text text="{midList>currency_unit}"/>                                          
                                                        <Text text="{midList>quantity_unit}"/>                                          
                                                        <Text text="{midList>exchange}"/>                                          
                                                        <Text text="{midList>termsdelv}" />                                          
                                                    </cells>
                                                </ColumnListItem>
                                            </items>
                                        </Table>  
                                    <!-- </uxap:blocks> -->
                                </uxap:ObjectPageSubSection>
                            </uxap:subSections>
                        </uxap:ObjectPageSection>
                    </uxap:sections>
                    <uxap:footer>
                         <OverflowToolbar id="overflowToolbar">
                            <ToolbarSpacer />
                                <HBox visible="{oUi>/readMode}">
                                        <Button type="Transparent" text="{I18N>/CANCEL}" enabled="false" visible="flase"/>
                                        <Button type="Transparent" text="{I18N>/COPY}" enabled="true" press=".onCopy"/>                         
                                        <Button type="Transparent" text="{I18N>/UPDATE}" enabled="true" press=".onEdit"/>
                                        <Button type="Transparent" text="{I18N>/DELETE}" enabled="false" />
                                        <Button type="Emphasized" text="{I18N>/SAVE}"  enabled="false" visible="flase" />
                                    </HBox>
                                    <HBox visible="{oUi>/editMode}">                            
                                        <Button type="Transparent" text="{I18N>/CANCEL}" enabled="true" press=".onCancel"/>
                                        <Button type="Transparent" text="{I18N>/COPY}" enabled="false" visible="flase"/> 
                                        <Button type="Transparent" text="{I18N>/UPDATE}" enabled="false" visible="flase"/>
                                        <Button type="Transparent" text="{I18N>/DELETE}" enabled="true" press=".onDeleteAction"/>                    
                                        <Button type="Emphasized" text="{I18N>/SAVE}"  enabled="true" press=".onSaveAction"/>
                                    </HBox>
                                    <HBox visible="{oUi>/createMode}">
                                        <Button type="Transparent" text="{I18N>/CANCEL}" enabled="true" press=".onCancel"/>
                                        <Button type="Transparent" text="{I18N>/COPY}" enabled="false" visible="flase"/>                         
                                        <Button type="Transparent" text="{I18N>/UPDATE}" enabled="false" visible="flase"/>
                                        <Button type="Transparent" text="{I18N>/DELETE}" enabled="false" visible="flase"/>
                                        <Button type="Emphasized" text="{I18N>/SAVE}" press=".onSaveAction"/>
                                    </HBox>
                                    <HBox visible="{oUi>/copyMode}">
                                        <Button type="Transparent" text="{I18N>/CANCEL}" enabled="true" press=".onCancel"/>
                                        <Button type="Transparent" text="{I18N>/COPY}" enabled="false" visible="flase"/>                         
                                        <Button type="Transparent" text="{I18N>/UPDATE}" enabled="false" visible="flase"/>
                                        <Button type="Transparent" text="{I18N>/DELETE}" enabled="false" visible="flase"/>
                                        <Button type="Emphasized" text="{I18N>/SAVE}" press=".onSaveAction"/>
                                    </HBox>
                        </OverflowToolbar>
                    </uxap:footer>
                </uxap:ObjectPageLayout>            
        </Page>
  
</mvc:View>