<core:FragmentDefinition 
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:layout="sap.ui.layout"
    xmlns:table="sap.ui.table"
    xmlns:form="sap.ui.layout.form"
	width 			= "50%"
	height			= "50%"    
    displayBlock="true">
	
	<Dialog id="materialDetail" title="{I18N>/MI_MATERIAL_CHOOICE}">
		<subHeader>
			<Toolbar>
                <FlexBox visible="{=!${oUi>/changeItem}}" >
                    <HBox class="sapUiLargeMarginEnd sapUiSmallMarginBegin" >

                        <Label text="{I18N>/MI_MATERIAL} / {I18N>/MI_MATERIAL_NAME}  :"  class="sapUiSmallMarginTop"/>
                        <SearchField id="searchField_material_code" 
                                    search=".onMaterialSearch" 
                                    selectOnFocus="false"
                                    placeholder="{I18N>/INPUT}" 
                                    class="sapUiTinyMarginTopBottom sapUiSmallMarginBegin" />
                    </HBox>

                    <HBox class="sapUiSmallMarginBegin">
                        <Label text="{I18N>/CATEGORY_CODE} / {I18N>/CATEGORY_NAME} :" class="sapUiSmallMarginTop"/>
                        <SearchField id="searchField_category_name" 
                                    search=".onMaterialSearch"  
                                    selectOnFocus="false"                             
                                    placeholder="{I18N>/INPUT}"
                                    class="sapUiTinyMarginTop sapUiSmallMarginBegin" />            
                    </HBox>
                </FlexBox>
			</Toolbar>
        </subHeader>

		<content>
            <HBox width="100%">

                <ScrollContainer
                    class="sapUiSmallMarginBegin sapUiSmallMarginEnd sapUiSmallMarginTop" 
                    width="600px"                
                    height="500px"
                    vertical="true"
                    focusable="true">

<!--
song scrolltoload growingScrollToLoad growing sticky growingThreshold inset
-->
                <Table  id="leftTable"
                        mode="SingleSelectLeft"
                        items="{mIMatListView>/}"
                        selectionChange=".onSelectedLeftTableItem"
                        itemPress=".onSelectedLeftTableItem"                        
                        noDataText="{I18N>/NCM0001}"
                        growingScrollToLoad="true"
                        growing="true"
                        width="100%"
                        sticky="ColumnHeaders,HeaderToolbar"
                        growingThreshold="100"
                        inset="false"                           
                >
                    <columns>
                        <Column hAlign="Center" visible="false"><header><Label text="tenant_id"/></header></Column>
                        <Column hAlign="Center" visible="false"><header><Label text="category_code"/></header></Column>
                        <Column hAlign="Center" ><header><Label text="{I18N>/CODE}"/></header></Column>
                        <Column hAlign="Center" ><header><Label text="{I18N>/NAME}"/></header></Column>
                        <Column hAlign="Center" ><header><Label text="{I18N>/CATEGORY}"/></header></Column>                                                                                                                    
                    </columns>
                    <items>
                        <ColumnListItem type="Active">
                            <cells>
                                <Text text="{mIMatListView>tenant_id}"/>
                                <Text text="{mIMatListView>category_code}"/>
                                <Text text="{mIMatListView>mi_material_code}"/>
                                <Text text="{mIMatListView>mi_material_name}"/>
                                <Text text="{mIMatListView>category_name}"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>                      
            </ScrollContainer>

            <VBox class="sapUiSmallMarginBegin sapUiSmallMarginEnd sapUiSmallMarginTop">
                <Table  id="rightTable"
                        mode="SingleSelectLeft" 
                        updateFinished=".onRightTableUpdateFinished"
                        items="{mIMaterialCostInformationView>/}"  
                        noDataText="{I18N>/NCM0001}"
                        class="sapUiSmallMarginEnd" 
                        growingScrollToLoad="true"
                        growing="true"
                        sticky="ColumnHeaders,HeaderToolbar"
                        growingThreshold="20"
                        inset="false"                        
                        width="700px">
                    <columns>
                        <Column hAlign="Center" >
                            <header>
                                <Label text="{I18N>/CURRENCY_UNIT}"/>                            
                            </header>
                        </Column>
                        <Column hAlign="Center" >
                            <header>
                                <Label text="{I18N>/QUANTITY_UNIT}"/>                            
                            </header>
                        </Column>
                        <Column hAlign="Center" >
                            <header>
                                <Label text="{I18N>/EXCHANGE_PG}"/>                            
                            </header>
                        </Column>
                        <Column hAlign="Center" >
                            <header>
                                <Label text="{I18N>/TERMS_OF_DELIVERY}"/>                            
                            </header>
                        </Column>
                        <Column hAlign="Center" >
                            <header>
                                <Label text="{I18N>/MI_DATE}"/>                            
                            </header>
                        </Column>    
                        <Column hAlign="Center" >
                            <header>
                                <Label text="{I18N>/PRICE}"/>                            
                            </header>
                        </Column>                                                                                                 
                    </columns>
                    <items>
                        <ColumnListItem type="Active">
                            <cells>
                                <Text text="{mIMaterialCostInformationView>currency_unit}"/>
                                <Text text="{mIMaterialCostInformationView>quantity_unit}"/>
                                <Text text="{mIMaterialCostInformationView>exchange}"/>
                                <Text text="{mIMaterialCostInformationView>termsdelv}"/>
                                <Text text="{
                                        path: 'mIMaterialCostInformationView>mi_date',
                                        type: 'sap.ui.model.type.Date',
                                        formatOptions: {
                                            pattern: 'yyyy/MM/dd'
                                        }                                        
                                    }"/> 
                                <Text text="{mIMaterialCostInformationView>price}"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>             
            </VBox>
        </HBox>
        </content>
        
        <beginButton>
            <Button type="Transparent"  text="{I18N>/CANCEL}" press=".onMaterialDetailClose" />
        </beginButton>
        <endButton>
            <Button  text="{I18N>/APPLY}"  type="Emphasized" press=".onMaterialDetailApply" />
        </endButton>
	</Dialog>
</core:FragmentDefinition>