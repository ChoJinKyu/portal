<mvc:View
    controllerName="pg.mi.miMaster.controller.MidObject"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    height="100%">
    <App>
        <Page id="page" title="시황자재 Master">
            <content>
                <uxap:ObjectPageLayout                    
                    toggleHeaderOnTitleClick="true"
                    alwaysShowContentHeader="true"
                    preserveHeaderStateOnScroll="false"
                    headerContentPinnable="true"
                    isChildPage="true"
                    upperCaseAnchorBar="false"
                    showTitleInHeaderContent="true"
                    showEditHeaderButton="true"
                    showFooter="false">
                    <uxap:headerTitle>
                        <uxap:ObjectPageDynamicHeaderTitle>
                            <uxap:expandedHeading>
                                <Title text="{i18n>appTitle}" wrapping="true"/>
                            </uxap:expandedHeading>
                            <uxap:snappedHeading>
                                <Title text="{i18n>appTitle}" wrapping="true"/>
                            </uxap:snappedHeading>
                            <uxap:snappedTitleOnMobile>
                                <Title text="{i18n>appTitle}"/>
                            </uxap:snappedTitleOnMobile>

                            <uxap:navigationActions>
                                <OverflowToolbarButton
                                    id="pageEnterFullScreenButton"
                                    type="Transparent"
                                    icon="sap-icon://full-screen"
                                    press="onPageEnterFullScreenButtonPress"
                                    tooltip="Enter Full Screen Mode"
                                    visible="{= ${/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
                                <OverflowToolbarButton
                                    id="pageExitFullScreenButton"
                                    type="Transparent"
                                    icon="sap-icon://exit-full-screen"
                                    press="onPageExitFullScreenButtonPress"
                                    tooltip="Exit Full Screen Mode"
                                    visible="{= ${/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/>
                                <OverflowToolbarButton
                                    id="pageNavBackButton"
                                    type="Transparent"
                                    icon="sap-icon://decline"
                                    text="back"
                                    tooltip="back to the list"
                                    press=".onPageNavBackButtonPress"
                                    visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                            </uxap:navigationActions>
                        </uxap:ObjectPageDynamicHeaderTitle>
                    </uxap:headerTitle>
                    <uxap:headerContent>
                        <layout:VerticalLayout>
                            <FlexBox height="30px" alignItems="Start" justifyContent="Start" visible="{=!${oUi>/createMode}}">
                                    <Label text="Update :"/>
                                    <Label text="{oUiData>/update_user_id}" class="sapUiTinyMarginBegin sapUiLargeMarginEnd" design="Bold"/>
                                    <Label text="Update Data :" class="sapUiLargeMarginBegin" />
                                    <Label text="{
                                        path: 'oUiData>/system_update_dtm',
                                        type: 'sap.ui.model.type.Date',
                                        formatOptions: {
                                            pattern: 'yyyy/MM/dd'
                                        }                                        
                                    }"  
                                    class="sapUiTinyMarginBegin"  
                                    design="Bold"/>  
                            </FlexBox>          
                        </layout:VerticalLayout>  
                    </uxap:headerContent>
                    <uxap:sections>
                        <uxap:ObjectPageSection
                            id="pageSectionMain"
                            titleUppercase="false"
                            title="{i18n>appTitle}">
                            <uxap:subSections>
                                <uxap:ObjectPageSubSection ></uxap:ObjectPageSubSection>
                            </uxap:subSections>
                        </uxap:ObjectPageSection>
                    </uxap:sections>
                    <uxap:sections>
                        <uxap:ObjectPageSection titleUppercase="false" title="Material Property">
                            <uxap:subSections>
                                <uxap:ObjectPageSubSection>   
                                        <FlexBox height="40px" alignItems="Start" justifyContent="Start" class="sapUiLargeMarginBottom" >        
                                            <layout:VerticalLayout class="sapUiLargeMarginEnd">
                                            <Label  text="시황자재코드" 
                                                design="Bold" 
                                                class="sapUiTinyMarginTop sapUiTinyMarginBottom sapMLabelNoText"/>
                                            <Text  
                                                visible="{=!${oUi>/createMode}}"
                                                text="{oUiData>/mi_material_code}" 
                                                class="sapMLabelNoText"/>  
                                            <Input  id="input_mi_material_code"
                                                valueStateText="{I18N>/MANDATORY}"
                                                placeholder="{I18N>/NPG00011}"
                                                liveChange=".onMiMaterialCodeCheck"
                                                class="sapUiSmallMarginEnd"
                                                value="{
                                                            path : '{_oUiData>/string}',
                                                            type : 'sap.ui.model.type.String',
                                                            constraints : {
                                                                minLength: 1,
                                                                maxLength: 30
                                                            }
                                                }"                                                
                                                visible="{oUi>/createMode}"
                                                required="{oUi>/createMode}"
                                            />                                                      
                                            </layout:VerticalLayout>
                                        </FlexBox>
                                <FlexBox height="40px" alignItems="Start" justifyContent="Start" class="sapUiLargeMarginBottom" >        
                                    <layout:VerticalLayout class="sapUiLargeMarginEnd">
                                        <Label  text="{I18N>/CATEGORY}" design="Bold" class="sapUiTinyMarginTop sapUiTinyMarginBottom sapMLabelNoText"/>
                                        <Text   id="textcategoryName" 
                                                                text="{oUiData>/category_name}" 
                                                                class="sapMLabelNoText"
                                                                visible="{=!${oUi>/createMode}}"
                                        /> 
                                        <ComboBox
                                            id="combobox_category_code"
                                            required="{oUi>/createMode}"
                                            visible="{oUi>/createMode}"
                                            placeholder="{I18N>/OPTION}"
                                            width="200px"
                                            items="{path:'/MICategoryHierarchyStructureView',
                                                    sorter: {
                                                        path: 'parent_category_code',
                                                        descending: false,
                                                        group: true
                                                    },
                                                    filters : [
                                                        {path : 'hierarchy_level', operator : 'NE', value1 : '0'}
                                                    ] 
                                            }"> 
                                            <core:Item key="{category_code}" text="{category_name}" />                                       
                                        </ComboBox>
                                        <Input id="input_category_text" visible="false"/>
                                    </layout:VerticalLayout>
                                </FlexBox>
                                <FlexBox height="40px" alignItems="Start" justifyContent="Start" class="sapUiLargeMarginBottom" >        
                                    <layout:VerticalLayout class="sapUiLargeMarginEnd">
                                        <Label  text="{I18N>/USE_FLAG}" 
                                                design="Bold" 
                                                class="sapUiTinyMarginTop sapUiTinyMarginBottom sapMLabelNoText"/>
                                        <Text   id="textUseflag" 
                                                text="{= ${oUiData>/use_flag} ? 'Yes':'No'}" 
                                                visible="{oUi>/readMode}"
                                                class="sapMLabelNoText"/>
                                        <Switch id="switchUse_flag" 
                                                visible="{=!${oUi>/readMode}}"
                                                state="{= !${oUi>/createMode} ? ${oUiData>/use_flag} : true}"
                                        >
                                            <layoutData>
                                                <FlexItemData growFactor="1"/>
                                            </layoutData>
                                        </Switch>
                                        </layout:VerticalLayout>
                                </FlexBox>
                                </uxap:ObjectPageSubSection>
                            </uxap:subSections>
                        </uxap:ObjectPageSection>
                    </uxap:sections>
                    <uxap:sections>
                        <uxap:ObjectPageSection titleUppercase="false" title="Material Language Manage">
                            <uxap:subSections>
                                <uxap:ObjectPageSubSection>
                                    <uxap:blocks>
                                            <Table
                                                id="midTable"
                                                mode="{= ${oUi>/readMode}?'None':'MultiSelect'}" 
                                                items="{mIMaterialCodeText>/}"
                                                width="100%"> 
                                                <headerToolbar>
                                                    <OverflowToolbar>
                                                        <content>
                                                            <ToolbarSpacer/>
                                                            <Button id="buttonMidTableCreate" 
                                                                    text="{I18N>/ROW_ADD}" 
                                                                    type="Transparent"
                                                                    visible="{=!${oUi>/readMode}}" 
                                                                    press=".onMidTableCreate"/>
                                                            <Button id="buttonMidTableDelete" 
                                                                    text="{I18N>/ROW_DELETE}" 
                                                                    type="Transparent" 
                                                                    visible="{=!${oUi>/readMode}}"
                                                                    press=".onMidTableDelete"/>
                                                        </content>
                                                    </OverflowToolbar>
                                                </headerToolbar>                                                
                                                <columns>        
                                                    <Column hAlign="Center" 
                                                     width="50px"
                                                     visible="false" 
                                                    >
                                                        <header>
                                                            <Label text="{I18N>/STATUS}"/>
                                                        </header>
                                                    </Column>                                                                                                      
                                                    <Column hAlign="Center">
                                                        <header>
                                                            <Label text="{I18N>/LANGUAGE}"/>
                                                        </header>
                                                    </Column>
                                                    <Column hAlign="Center">
                                                        <header>
                                                            <Label text="{I18N>/MATERIAL}"/>
                                                        </header>
                                                    </Column>
                                                </columns>
                                                <items>
                                                    <ColumnListItem>
                                                        <cells>
                                                            <Text text="{mIMaterialCodeText>itemMode}"/>
                                                            <VBox>
                                                                <ComboBox   selectionChange=".onComboBoxLanguageChange"
                                                                            selectedKey="{mIMaterialCodeText>language_code}"
                                                                            items="{
                                                                                path: 'languageView>/',  
                                                                                filters : [
                                                                                    {path : 'code', operator : 'NE', value1 : 'KO'}
                                                                                ],                                                                                                                                                                                                           
                                                                                templateShareable:false}"
                                                                            required="{= ${oUi>/readMode}===false &amp;&amp; ${mIMaterialCodeText>language_code}!=='KO'}"
                                                                            visible="{= ${oUi>/readMode}===false &amp;&amp; ${mIMaterialCodeText>language_code}!=='KO'}"
                                                                            placeholder="{I18N>/OPTION}">
                                                                    <core:Item key="{languageView>code}"                                                                                
                                                                               text="{languageView>code}"/>                                                                    
                                                                </ComboBox>
                                                                <Text   text="{mIMaterialCodeText>language_code}"
                                                                        visible="{= ${mIMaterialCodeText>language_code}==='KO'}"
                                                                        />
                                                                <Text   text="{mIMaterialCodeText>language_code}"
                                                                        visible="{= ${oUi>/readMode}===true &amp;&amp; ${mIMaterialCodeText>language_code}!=='KO'}"
                                                                        />                                                                        
                                                            </VBox>
                                                            <VBox>
                                                                <Input  value="{mIMaterialCodeText>mi_material_name}" 
                                                                        required="{=!${oUi>/readMode}}"
                                                                        liveChange=".onRequiredCheckTable"
                                                                        visible="{=!${oUi>/readMode}}"/>
                                                                <Text   text="{mIMaterialCodeText>mi_material_name}"
                                                                        visible="{oUi>/readMode}"/>
                                                            </VBox>
                                                        </cells>
                                                    </ColumnListItem>
                                                </items>
                                            </Table>   
                                    </uxap:blocks>
                                </uxap:ObjectPageSubSection>
                            </uxap:subSections>
                        </uxap:ObjectPageSection>
                    </uxap:sections>             
                </uxap:ObjectPageLayout>                        
            </content>
            <footer>
                <OverflowToolbar id="overflowToolbar">
                    <ToolbarSpacer/>
                        <HBox visible="{oUi>/readMode}">
                            <Button type="Transparent" text="{I18N>/CANCEL}" enabled="false"/>  
                            <Button type="Transparent" text="{I18N>/UPDATE}" enabled="true" press=".onEdit"/>
                            <Button type="Transparent" text="{I18N>/DELETE}" enabled="false" />
                            <Button type="Emphasized" text="{I18N>/SAVE}"  enabled="false"  />
                        </HBox>
                        <HBox visible="{oUi>/editMode}">
                            <Button type="Transparent" text="{I18N>/CANCEL}" enabled="true" press=".onCancel"/>                                                
                            <Button type="Transparent" text="{I18N>/UPDATE}" enabled="false"/>
                            <Button type="Transparent" text="{I18N>/DELETE}" enabled="true" press=".onDeleteAction"/>                    
                            <Button type="Emphasized" text="{I18N>/SAVE}"  enabled="true" press=".onSaveAction"/>
                        </HBox>
                        <HBox visible="{oUi>/createMode}">
                           <Button type="Transparent" text="{I18N>/CANCEL}" enabled="true" press=".onCancel"/>  
                            <Button type="Transparent" text="{I18N>/UPDATE}" enabled="false"/>
                            <Button type="Transparent" text="{I18N>/DELETE}" enabled="false"/>
                            <Button type="Emphasized" text="{I18N>/SAVE}" press=".onSaveAction"/>
                        </HBox>
                </OverflowToolbar>
            </footer>
        </Page>
    </App>

</mvc:View>                                            