<!--화면명 : 모니터링 관리 리스트 화면-->
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:t="sap.ui.table" xmlns:f="sap.f" xmlns:form="sap.ui.layout.form" 
xmlns:layout="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:mc="sap.suite.ui.microchart" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" 
xmlns:smartTable="sap.ui.comp.smarttable" xmlns:sv="sap.ui.comp.smartvariants" xmlns:micro="sap.suite.ui.microchart" 
xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" controllerName="pg.monitor.controller.Monitor" displayBlock="true" height="100%">
		<App id="idAppControl">
			<pages>
				<f:DynamicPage id="dynamicPageId" preserveHeaderStateOnScroll="true">
					<!-- DynamicPage Title -->
					<f:title>
						<f:DynamicPageTitle>
							<f:heading>
								<Title text="Monitoring Management"/>
							</f:heading>
						</f:DynamicPageTitle>
					</f:title>
					<!-- DynamicPage Header -->
						<f:header>
                                <f:DynamicPageHeader pinnable="false">
                                    <f:content>
                                       <!-- 미니차트 버튼 -->
                                       <HBox width="100%" height="1rem" class="sapUiSmallMarginBottom " alignItems="Center" alignContent="End" justifyContent="End">
                                            <items>
                                                <Button text="Show MiniCharts" press=".onPress_ShowingPanel" type="Transparent" id="btn_showChart"/>
                                            </items>
								        </HBox>
                                        <!-- Smart Filter -->
                                      	<smartFilterBar:SmartFilterBar id="smartFilterBar" smartVariant="__SVM01" useToolbar="true" 
                                          entitySet="MonitoringMasterView_02" persistencyKey="UniqueAndStablePersistencyKey" enableBasicSearch="false">
                                            <smartFilterBar:controlConfiguration>
                                                <!-- 회사 -->
                                                <smartFilterBar:ControlConfiguration key="tenant_id" index="1" label="회사" groupId="_BASIC" 
                                                visibleInAdvancedArea="true">
                                                    <smartFilterBar:customControl>
                                                          <ComboBox id="company_combo" items="{/OrgTenantView}" change="onChangeCombo">
                                                            <core:Item key="{tenant_id}" text="{tenant_name}"/>
                                                        </ComboBox>
                                                    </smartFilterBar:customControl>
                                                </smartFilterBar:ControlConfiguration>

                                                <!-- 법인 -->
                                             <smartFilterBar:ControlConfiguration key="company_code" index="2" label="법인" groupId="_BASIC" visibleInAdvancedArea="true">
                                                    <smartFilterBar:customControl>
                                                    <ComboBox id="corp_combo" items="{/OrgCompanyView}">
                                                        <core:Item key="{company_code}" text="{company_name}"/>
                                                    </ComboBox>
                                                    </smartFilterBar:customControl>
                                                </smartFilterBar:ControlConfiguration> 

                                                 <!-- 사업본부 -->
                                                <smartFilterBar:ControlConfiguration key="bizunit_code" index="3" label="사업본부" groupId="_BASIC" visibleInAdvancedArea="true">
                                                    <smartFilterBar:customControl>
                                                    	<MultiComboBox id="business_combo" items="{/OrgUnitView}">
                                                            <core:Item key="{bizunit_code}" text="{bizunit_name}"/>
                                                        </MultiComboBox>
                                                    </smartFilterBar:customControl>
                                                </smartFilterBar:ControlConfiguration> 

                                     
                                            </smartFilterBar:controlConfiguration>
                                            <smartFilterBar:layoutData>
                                                <FlexItemData shrinkFactor="0"/>
                                            </smartFilterBar:layoutData>
                                        </smartFilterBar:SmartFilterBar> 
                                       

                                          
                                            <!-- Generic Tile & Micro Chart -->
                                         <layout:HorizontalLayout id="h_layout" class="hLayout" visible="false">
                                               	<!-- 운영방식별 건수 chart -->
                                                   <GenericTile sizeBehavior="Responsive" header="운영방식별" press=".onPopoverPress" class="sapUiSmallMarginEnd" subheader="" frameType="TwoByOne">
                                                    <tileContent>
                                                        <TileContent footer="전체건수" unit="">
                                                            <content>
                                                                <NumericContent id="numeric" scale="건"/>
                                                            </content>
                                                        </TileContent>

                                                        <TileContent>
                                                            <content>
                                                                <micro:ComparisonMicroChart id="comChart" maxValue="77" minValue="0" data="{chartModel>/OperationCNT}" scale="건" size="Responsive" colorPalette="green, skyblue, orange">
                                                                    <micro:data>
                                                                        <micro:ComparisonMicroChartData title="{chartModel>title}" value="{chartModel>value}"/>
                                                                    </micro:data>
                                                                </micro:ComparisonMicroChart>
                                                            </content>
                                                        </TileContent>
                                                    </tileContent>
                                                </GenericTile>

                                                <!-- 사용항목 ratio -->
                                                <!-- Radial Micro Chart -->
                                                	<GenericTile header="사용항목 Ratio" class="sapUiSmallMarginEnd" frameType="OneByOne">
                                                        <tileContent>
                                                            <TileContent>
                                                                <content>
                                                                  	<micro:RadialMicroChart height="5rem" width="95%" class="RadialChart" size="L" valueColor="#0092D1" percentage="83" alignContent="Center"/>
                                                                </content>
                                                            </TileContent>
                                                        </tileContent>
                                                    </GenericTile>

                                                        <!-- 구매유형별 column chart -->
                                                        <VBox class="sapUiSmallMarginBegin">
                                                            <Title class="sapUiSmallMarginTop" text="구매유형별"/>
                                                            <micro:ColumnMicroChart id="columnChart" size="Auto" press="press" width="10rem" height="11rem" class="sapUiSmallMarginBegin" allowColumnLabels="true">
                                                                    <micro:columns>
                                                                        <micro:ColumnMicroChartData value="6" label="원재료" displayValue="6" color="#FF8888"/>
                                                                        <micro:ColumnMicroChartData value="13" label="설비" displayValue="13" color="#FABD64"/>
                                                                        <micro:ColumnMicroChartData value="9" label="본사" displayValue="9" color="#ABE2AB"/>
                                                                    </micro:columns>
                                                            </micro:ColumnMicroChart>
                                                        </VBox>    
                                                 </layout:HorizontalLayout>
                                    </f:content>
                                </f:DynamicPageHeader>
                    </f:header>
					
					<!-- DynamicPage Content -->
					<f:content>
                    <!-- Smart Table -->
                        <smartTable:SmartTable height="100%" id="LineItemsSmartTable" entitySet="MonitoringMasterView_02" 
                        initiallyVisibleFields="separated_text,scenario_code_text,company_name,user_korean_name,enrollment_date,search_flag,calling_flag,alert_flag,active_flag" 
                        smartFilterId="smartFilterBar" tableType="ResponsiveTable" useExportToExcel="true" 
                        beforeExport=".onBeforeExport" useVariantManagement="true" 
                        useTablePersonalisation="true" showTablePersonalisation="false" 
                        header="List" showRowCount="true"
                        persistencyKey="SmartTableAnalytical_Explored" enableAutoBinding="true" 
                        class="sapUiResponsiveContentPadding" demandPopin="true" showFullScreenButton="false">
                                <smartTable:customToolbar>
                                   	<OverflowToolbar design="Transparent">
                                    <ToolbarSpacer/>
                                    <Button text="Create" type="Transparent" press=".onCreate"/>
                                    <Button text="Delete" type="Transparent" press=".onDelete"/>
                                    <Button text="Copy" type="Transparent" press=".onCopy"/>
                                    <OverflowToolbarButton icon="sap-icon://sort" tooltip="Sort" text="Sort" press=".onSort"/>
                                    <OverflowToolbarButton icon="sap-icon://filter" tooltip="Filter" text="Filter" press=".onFilter"/>
                                    <OverflowToolbarButton icon="sap-icon://group-2" tooltip="Group" text="Group" press=".onGroup"/>
                                    <OverflowToolbarButton icon="sap-icon://action-settings" tooltip="Column Settings" text="Column Settings" press=".onColumns"/>
                                </OverflowToolbar>
                                </smartTable:customToolbar>
                                <Table id="MasterTable" mode="MultiSelect" sticky="HeaderToolbar,ColumnHeaders">
                                 <columns>
                                        <Column hAlign="Center">
                                        <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "separated_text", "leadingProperty": "separated_text", "sortProperty": "separated_text", "filterProperty": "separated_text", "columnIndex": 1}'/>
                                        </customData>
                                            <Text text="구분"></Text>
                                        </Column>
                                        <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "scenario_code_text", "leadingProperty": "scenario_code_text", "sortProperty": "scenario_code_text", "filterProperty": "scenario_code_text", "columnIndex": 2}'/>
                                        </customData>
                                             <Text text="시나리오"></Text>
                                        </Column>
                                          <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "company_name", "leadingProperty": "company_name", "sortProperty": "company_name", "filterProperty": "company_name", "columnIndex": 3}'/>
                                        </customData>
                                             <Text text="회사"></Text>
                                        </Column>
                                           <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "user_korean_name", "leadingProperty": "user_korean_name", "sortProperty": "user_korean_name", "filterProperty": "user_korean_name", "columnIndex": 4}'/>
                                        </customData>
                                             <Text text="담당자"></Text>
                                        </Column>
                                            <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "enrollment_date", "leadingProperty": "enrollment_date", "sortProperty": "enrollment_date", "filterProperty": "enrollment_date", "columnIndex": 5}'/>
                                        </customData>
                                             <Text text="등록일자"></Text>
                                        </Column>
                                        <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "search_flag", "leadingProperty": "search_flag", "sortProperty": "search_flag", "filterProperty": "search_flag", "columnIndex": 6}'/>
                                        </customData>
                                             <Text text="조회"></Text>
                                        </Column>
                                          <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "calling_flag", "leadingProperty": "calling_flag", "sortProperty": "calling_flag", "filterProperty": "calling_flag", "columnIndex": 7}'/>
                                        </customData>
                                             <Text text="소명"></Text>
                                        </Column>
                                          <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "alert_flag", "leadingProperty": "alert_flag", "sortProperty": "alert_flag", "filterProperty": "alert_flag", "columnIndex": 8}'/>
                                        </customData>
                                             <Text text="알람"></Text>
                                        </Column>
                                         <Column hAlign="Center">
                                          <customData>
                                        <core:CustomData key="p13nData"
                                        value='\{"columnKey": "active_flag", "leadingProperty": "active_flag", "sortProperty": "active_flag", "filterProperty": "active_flag", "columnIndex": 9}'/>
                                        </customData>
                                             <Text text="Active"></Text>
                                        </Column>

                                    </columns>
                                    <items>
                                        <ColumnListItem type="Navigation" hAlign="Middle" press="onNavToRegister">
                                             <Text text="{separated_text}"></Text>
                                             <Text text="{scenario_code_text}"></Text>
                                             <Text text="{company_name}"></Text>
                                             <Text text="{user_korean_name}"></Text>
                                             <Text text="{path: 'enrollment_date', type: 'sap.ui.model.type.Date' }"></Text>
                                             <CheckBox selected="{search_flag}"/>
                                             <CheckBox selected="{calling_flag}"/>
                                             <CheckBox selected="{alert_flag}"/>
                                             <CheckBox selected="{active_flag}"/>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </smartTable:SmartTable>
					</f:content>
				</f:DynamicPage>
			</pages>
		</App>
</mvc:View>