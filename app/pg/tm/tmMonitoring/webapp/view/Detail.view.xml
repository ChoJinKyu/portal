<mvc:View 
    xmlns="sap.m" 
    xmlns:core="sap.ui.core" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:uxap="sap.uxap" 
    xmlns:u="sap.ui.unified" 
    xmlns:rte="sap.ui.richtexteditor" 
    xmlns:l="sap.ui.layout" 
    xmlns:f="sap.ui.layout.form" 
    displayBlock="true" 
    xmlns:cm-ui="cm.util.control.ui"
    controllerName="pg.tm.tmMonitoring.controller.Detail">
	<App id="idAppControl">
		<Page title="{I18N>/MONITORING_MANAGEMENT}" showNavButton="true" navButtonType="Back" navButtonPress="onNavToBack">
			<content>
				<uxap:ObjectPageLayout id="page" alwaysShowContentHeader="false" preserveHeaderStateOnScroll="true" headerContentPinnable="false" upperCaseAnchorBar="false" enableLazyLoading="true" showFooter="true" class="sapUiContentPadding">
					<uxap:headerTitle/>
					<uxap:headerContent/>
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/INFORMATION}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection id="pageSubSection1"/>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<!-- 담당자  -->
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/MANAGER}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection>
									<uxap:blocks>
										<VBox>
											<f:SimpleForm id="SimpleFormChange354" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="0" labelSpanM="0" emptySpanL="0" emptySpanM="0" columnsL="3" columnsM="3">
												<f:content>
													<VBox id="VBox_manager" class="sapUiNoMarginBottom">
														<Label text="{I18N>/MANAGER}" labelFor="multiInputWithEmployeeValueHelp"/>
														<Text text="{=${manager_local_name} === ''? 'No Manager Data' : ${manager_local_name}.replaceAll(';', ', ')}" visible="{=!${DetailView>/isEditMode}}"/>
														<MultiInput id="multiInputWithEmployeeValueHelp" visible="{=${DetailView>/isEditMode}}" tokenUpdate="onTokenUpdate" showValueHelp="false"/>
														<layoutData>
															<l:GridData span="XL3 L4 M4 S12"/>
														</layoutData>
													</VBox>
													<VBox id="managerVBox" class="sapUiNoMarginTop">
														<Table id="managerListTable" autoPopinMode="true" mode="MultiSelect">
															<headerToolbar>
																<OverflowToolbar>
																	<content>
																		<ToolbarSpacer/>
																		<Button text="{I18N>/ROW_ADD}" id="btnManagerAddRow" enabled="{=${DetailView>/isEditMode}}" press=".onMultiInputWithEmployeeValuePress" type="Transparent"/>
																		<Button text="{I18N>/ROW_DELETE}" id="btnManagerDeleteRow" enabled="{=${DetailView>/isEditMode}}" press=".onPressManagerDelete" type="Transparent"/>
																	</content>
																</OverflowToolbar>
															</headerToolbar>
															<columns>
																<Column hAlign="Center" width="5rem" visible="{=${DetailView>/isEditMode}}">
																	<header>
																		<Label text="{I18N>/STATUS}"/>
																	</header>
																</Column>
																<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
																	<header>
																		<Label text="{I18N>/EMPNO}"/>
																	</header>
																</Column>
																<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
																	<header>
																		<Label text="{I18N>/MANAGER}"/>
																	</header>
																</Column>
																<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
																	<header>
																		<Label text="{I18N>/EMAIL}"/>
																	</header>
																</Column>
																<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
																	<header>
																		<Label text="{I18N>/DEPARTMENT}"/>
																	</header>
																</Column>
																<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
																	<header>
																		<Label text="{I18N>/USER_POSITION}"/>
																	</header>
																</Column>
																<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
																	<header>
																		<Label text="{I18N>/SUPER_AUTHORITY_FLAG}"/>
																	</header>
																</Column>
															</columns>
															<items>
																<ColumnListItem type="Inactive">
																	<cells>
																		<Text text=""/>
																		<Text text="{employee_number}"/>
																		<Text text="{employee_name}"/>
																		<Text text="{job_title}"/>
																		<Text text="{mobile_phone_number}"/>
																		<Text text="{department_id}"/>
																		<SegmentedButton id="segmentButton_activate_flag" selectionChange=".onChangeAuthorityFlag" selectedKey="{=${monitoring_super_authority_flag} === true? 'Yes' : 'No'}" enabled="{=${DetailView>/isEditMode}}">
																			<items>
																				<SegmentedButtonItem text="Yes" key="Yes"/>
																				<SegmentedButtonItem text="No" key="No"/>
																			</items>
																		</SegmentedButton>
																	</cells>
																</ColumnListItem>
															</items>
														</Table>
														<layoutData>
															<l:GridData span="XL12 L12 M12 S12"/>
														</layoutData>
													</VBox>
												</f:content>
											</f:SimpleForm>
										</VBox>
									</uxap:blocks>
								</uxap:ObjectPageSubSection>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<!-- Operating Type -->
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/OPERATION}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection>
									<uxap:blocks>
										<f:SimpleForm maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
											<f:content id="informationPageSectionForm">
												<VBox class="sapUiSmallMarginEnd">
													<Label text="{I18N>/OPERATION}"/>
													<HBox id="hbox_operating">
														<CheckBox id="search_flag" text="{I18N>/DISPLAY}" editable="{=${DetailView>/isEditMode}}" selected="{=${operation_mode_display_flag} === 'true' ? true : false}"/>
														<HBox width="0.5rem"/>
														<CheckBox id="calling_flag" text="{I18N>/EXPLAIN}" editable="{=${DetailView>/isEditMode}}" selected="{=${operation_mode_calling_flag} === 'true' ? true : false}"/>
														<HBox width="0.5rem"/>
														<CheckBox id="alarm_flag" text="{I18N>/ALRAM}" editable="{=${DetailView>/isEditMode}}" selected="{=${operation_mode_alram_flag} === 'true' ? true : false}"/>
													</HBox>
													<layoutData>
														<l:GridData span="XL3 L4 M4 S12"/>
													</layoutData>
												</VBox>
												<VBox id="cycleVBox">
													<Label text="{I18N>/CYCLE}"/>
													<Text text="{=${monitoring_cycle_name} === ''? 'No Cycle Data' : ${monitoring_cycle_name}.replaceAll(';', ', ')}" visible="{=!${DetailView>/isEditMode}}"/>
													<MultiComboBox id="multicombo_cycle" visible="{=${DetailView>/isEditMode}}" selectedKeys="{=${monitoring_cycle_code}.split(';')}" items="{/TaskMonitoringCycleCodeView}">
														<core:Item key="{code}" text="{code_name}"/>
													</MultiComboBox>
													<layoutData>
														<l:GridData span="XL3 L4 M4 S12"/>
													</layoutData>
												</VBox>
											</f:content>
										</f:SimpleForm>
									</uxap:blocks>
								</uxap:ObjectPageSubSection>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<!-- Detail Information -->
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/DETAIL_INFORMATION}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection>
									<uxap:blocks>
										<l:VerticalLayout width="100%">
											<VBox class="sapUiTinyMarginTop" id="monitoringVBox">
												<Label text="{I18N>/MONITORING_PURPOSE}" design="Bold"/>
												<rte:RichTextEditor id="reMonitoringPurpose" wrapping="false" editorType="TinyMCE4" width="100%" height="300px" visible="{=${DetailView>/isEditMode}}" editable="true" customToolbar="true" showGroupFont="true" showGroupLink="true" showGroupInsert="false"/>
												<FormattedText id="PurposeFormattedText" visible="{=!${DetailView>/isEditMode}}"/>
											</VBox>
											<VBox class="sapUiSmallMarginTop" id="scenarioVBox">
												<Label text="{I18N>/SCENARIO_DESC}" design="Bold"/>
												<rte:RichTextEditor id="reMonitoringScenario" wrapping="false" class="sapUiTinyMarginTop" visible="{=${DetailView>/isEditMode}}" editorType="TinyMCE4" editable="true" width="100%" height="300px" customToolbar="true" showGroupFont="true" showGroupLink="true" showGroupInsert="false"/>
												<FormattedText id="ScenarioDescFormattedText" visible="{=!${DetailView>/isEditMode}}"/>
											</VBox>
										</l:VerticalLayout>
									</uxap:blocks>
								</uxap:ObjectPageSubSection>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<!-- Data Source System -->
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/SOURCE_SYSTEM_DESC}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection>
									<uxap:blocks>
										<l:VerticalLayout width="100%">
											<VBox class="sapUiSmallMarginTop" id="systemVBox">
												<Label text="{I18N>/SOURCE_SYSTEM_DESC}" design="Bold"/>
												<rte:RichTextEditor id="reSourceSystemDetail" wrapping="false" class="sapUiTinyMarginTop" editorType="TinyMCE4" visible="{=${DetailView>/isEditMode}}" editable="true" width="100%" height="300px" customToolbar="true" showGroupFont="true" showGroupLink="true" showGroupInsert="false"/>
												<FormattedText id="ReSourceSystemFormattedText" visible="{=!${DetailView>/isEditMode}}"/>
											</VBox>
										</l:VerticalLayout>
									</uxap:blocks>
								</uxap:ObjectPageSubSection>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<!-- EVALUATION -->
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/EVALUATION}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection>
									<uxap:blocks>
										<Table id="signalList" items="{/TaskMonitoringIndicatorNumberView}" class="sapUiNoMarginTop"  autoPopinMode="true" mode="MultiSelect">
											<headerToolbar class="sapUiNoMarginTop">
												<OverflowToolbar>
													<content>
														<ToolbarSpacer/>
														<Button text="{I18N>/ROW_ADD}" id="buttonSignalAddRow" press=".onSignalListAddRow" enabled="{=${DetailView>/isEditMode}}" type="Transparent"/>
														<Button text="{I18N>/ROW_DELETE}" id="buttonSignalDeleteRow" press=".onSignalListDelete" enabled="{=${DetailView>/isEditMode}}" type="Transparent"/>
													</content>
												</OverflowToolbar>
											</headerToolbar>
											<columns>
												<Column hAlign="Center" width="5rem">
													<header>
														<Label text="{I18N>/STATUS}"/>
													</header>
												</Column>
												<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
													<header>
														<Label text="{I18N>/INDICATOR}"/>
													</header>
												</Column>
												<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
													<header>
														<Label text="{I18N>/CONDITION}"/>
													</header>
												</Column>
												<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
													<Text text="{I18N>/INDICATOR_FIRST_VALUE}"/>
												</Column>
												<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
													<header>
														<Label text="{I18N>/INDICATOR_LAST_VALUE}"/>
													</header>
												</Column>
												<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
													<header>
														<Label text="{I18N>/GRADE}"/>
													</header>
												</Column>
												<Column hAlign="Center" minScreenWidth="Tablet" demandPopin="true">
													<header>
														<Label text="{I18N>/UNIT}"/>
													</header>
												</Column>
											</columns>
											<items>
												<ColumnListItem type="Active" press="signalListTableItemPress">
													<cells>
														<Text text=""/>
														<ComboBox width="80%" items="{/TaskMonitoringIndicatorNumberCodeView}" selectedKey="" selectionChange=".onChangeIndicator">
															<core:Item key="{code}" text="{code_name}"/>
														</ComboBox>
														<ComboBox items="{/TaskMonitoringIndicatorComparisonConditionCodeView}" width="80%" selectedKey="{path: 'monitoring_ind_condition_cd', type: 'sap.ui.model.type.String'}">
															<core:Item key="{code}" text="{code} ({code_name})"/>
														</ComboBox>
														<Input value="{monitoring_indicator_start_value}" width="80%"/>
														<Input value="{monitoring_indicator_last_value}" width="80%"/>
														<ComboBox items="{/TaskMonitoringIndicatorComparisionGradeCodeView}" selectedKey="{monitoring_indicator_grade}" width="80%">
															<core:Item key="{code}" text="{code_name}"/>
														</ComboBox>
														<ComboBox items="{/TaskMonitoringIndicatorComparisionBasicCodeView}" selectedKey="{monitoring_ind_compare_base_cd}" width="80%">
															<core:Item key="{code}" text="{code_name}"/>
														</ComboBox>
													</cells>
												</ColumnListItem>
											</items>
										</Table>
									</uxap:blocks>
								</uxap:ObjectPageSubSection>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<!-- Attachment -->
					<uxap:sections>
						<uxap:ObjectPageSection titleUppercase="false" title="{I18N>/Attachments}">
							<uxap:subSections>
								<uxap:ObjectPageSubSection>
									<uxap:blocks>
										<UploadCollection id="UploadCollection" uploadEnabled="false" fileType="gif,png,jpg,jpeg,doc,docx,xls,xlsx,hwp,pdf,ppt,pdf" maximumFilenameLength="55" maximumFileSize="10" 
                                                            multiple="false" change=".onChange" instantUpload="false" uploadButtonInvisible="{=!${ui>/bEditMode}}" filenameLengthExceed="onFilenameLengthExceed" fileSizeExceed="onFileSizeExceed" typeMissmatch="onTypeMissmatch" uploadComplete="onUploadComplete" beforeUploadStarts="onBeforeUploadStarts" mode="SingleSelectMaster">
											                    <!-- <items>
                                                                    <UploadCollectionItem id="uploadItem" documentId="{up>documentId}" fileName="{up>fileName}"
                                                                     mimeType="{up>mimeType}" thumbnailUrl="{up>thumbnailUrl}" url="{up>url}" deletePress="onFileDeleted" enableEdit="{=${ui>/bEditMode}}" enableDelete="true" visibleDelete="{=${ui>/bEditMode}}" visibleEdit="{=${ui>/bEditMode}}" attributes="{path: 'up>attributes',templateShareable: false}" selected="{selected}">
                                                                        <attributes>
                                                                            <ObjectAttribute title="{up>title}" text="{parts: [ 'up>text', 'up&gt;type' ]}" active="false"/>
                                                                        </attributes>
                                                                    </UploadCollectionItem>
                                                                </items>  -->
                                        </UploadCollection>
									</uxap:blocks>
								</uxap:ObjectPageSubSection>
							</uxap:subSections>
						</uxap:ObjectPageSection>
					</uxap:sections>
					<uxap:footer>
						<OverflowToolbar>
							<ToolbarSpacer/>
							<Button id="pageEditButton" type="Transparent" text="{I18N>/UPDATE}" press=".onPageEditButtonPress" enabled="{=!${DetailView>/isEditMode}}"/>
							<Button id="pageCancelButton" type="Transparent" text="{I18N>/CANCEL}" press=".onPageCancelEditButtonPress"/>
							<Button id="pageDeleteButton" type="Transparent" text="{I18N>/DELETE}" enabled="{=!${DetailView>/isCreate}}" press=".onPressDelete"/>
							<Button id="pageSaveButton" type="Emphasized" text="{I18N>/SAVE}" press=".onPressSaveBtn" enabled="{=${DetailView>/isEditMode}}"/>
						</OverflowToolbar>
					</uxap:footer>
				</uxap:ObjectPageLayout>
				<cm-ui:EmployeeDialog id="employeeDialog" title="직원 검색" items="{
                                filters: [
                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                ]
                            }" apply=".onEmployeeDialogApplyPress"/>
			</content>
		</Page>
	</App>
</mvc:View>
