<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" xmlns:smartTable="sap.ui.comp.smarttable" xmlns:f="sap.f" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:lib-m="ext.lib.m" controllerName="pg.tm.tmMonitoring.controller.Main">
	<f:DynamicPage id="page" toggleHeaderOnTitleClick="true">
		<!-- headerExpanded="{mainListView>/headerExpanded}"  -->
		<!-- DynamicPage Title -->
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Title text="{I18N>/MONITORING_MANAGEMENT}"/>
				</f:heading>
				<f:snappedContent/>
				<f:expandedContent/>
			</f:DynamicPageTitle>
		</f:title>
		<!-- DynamicPage Header -->
		<f:header>
			<f:DynamicPageHeader pinnable="true">
				<smartFilterBar:SmartFilterBar id="smartFilterBar" useToolbar="false" entitySet="TaskMonitoringMasterView" enableBasicSearch="false">
					<smartFilterBar:controlConfiguration>
						<!-- 회사 -->
						<smartFilterBar:ControlConfiguration key="tenant_name" index="1" label="{I18N>/TENANT_NAME}" visibleInAdvancedArea="true" mandatory="mandatory">
							<smartFilterBar:customControl>
								<ComboBox id="tenant_combo" items="{/OrgTenantView}" selectedKey="L2100" selectionChange="onChangeTenant">
									<core:Item key="{tenant_id}" text="{tenant_name}"/>
								</ComboBox>
							</smartFilterBar:customControl>
						</smartFilterBar:ControlConfiguration>
						<!-- 법인 -->
						<smartFilterBar:ControlConfiguration key="company_name" index="2" label="{I18N>/COMPANY}" visibleInAdvancedArea="true">
							<smartFilterBar:customControl>
								<MultiComboBox id="company_combo">
									<core:Item id="company_item" key="{company_code}" text="{company_name}"/>
								</MultiComboBox>
							</smartFilterBar:customControl>
						</smartFilterBar:ControlConfiguration>
						<!-- 사업본부 -->
						<smartFilterBar:ControlConfiguration key="bizunit_name" index="3" label="{I18N>/BUSINESS_UNIT}" visibleInAdvancedArea="true">
							<smartFilterBar:customControl>
								<MultiComboBox id="bizunit_combo">
									<core:Item key="{bizunit_code}" text="{bizunit_name}"/>
								</MultiComboBox>
							</smartFilterBar:customControl>
						</smartFilterBar:ControlConfiguration>
					</smartFilterBar:controlConfiguration>
					<smartFilterBar:layoutData>
						<FlexItemData shrinkFactor="0"/>
					</smartFilterBar:layoutData>
				</smartFilterBar:SmartFilterBar>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<VBox>
				<smartTable:SmartTable 
                    height="100%" 
                    id="MonitorList" 
                    entitySet="TaskMonitoringMasterView" 
                    initiallyVisibleFields="monitoring_type_name,scenario_name,tenant_name,company_name,bizunit_name,manager_local_name,enrollment_date,operation_mode_display_flag,operation_mode_calling_flag,operation_mode_alram_flag,activate_flag" 
                    smartFilterId="smartFilterBar" 
                    tableType="ResponsiveTable" 
                    useExportToExcel="true" 
                    beforeExport=".onBeforeExport" 
                    useVariantManagement="true" 
                    useTablePersonalisation="true" 
                    showTablePersonalisation="false" 
                    header="{I18N>/MONITORING_MANAGEMENT_LIST}" 
                    showRowCount="true" 
                    enableAutoBinding="true" 
                    demandPopin="true" 
                    showFullScreenButton="false" 
                    beforeRebindTable="onSearchTable">
					<smartTable:customToolbar>
						<OverflowToolbar design="Transparent">
							<!-- <Title id="tableTitle" text="" level="H2"/> -->
							<ToolbarSpacer/>
							<Button text="{I18N>/NEW}" type="Transparent" press=".onCreateDetail"/>
							<OverflowToolbarButton icon="sap-icon://sort" tooltip="Sort" text="Sort" press=".onSort"/>
							<OverflowToolbarButton icon="sap-icon://filter" tooltip="Filter" text="Filter" press=".onFilter"/>
							<!-- <OverflowToolbarButton icon="sap-icon://group-2" tooltip="Group" text="Group" press=".onGroup"/> -->
							<OverflowToolbarButton icon="sap-icon://action-settings" tooltip="Column Settings" text="Column Settings" press=".onColumns"/>
						</OverflowToolbar>
					</smartTable:customToolbar>
					<Table id="MonitorListTable" sticky="HeaderToolbar,ColumnHeaders">
						<columns>
							<Column hAlign="Center">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "monitoring_type_name","columnIndex":"1", "leadingProperty": "monitoring_type_name", "sortProperty": "monitoring_type_name"}'/>
								</customData>
								<Text text="{I18N>/TYPE_NAME}"/>
							</Column>
							<Column hAlign="Center" width="10%">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "scenario_name", "columnIndex":"2", "leadingProperty": "scenario_name", "sortProperty": "scenario_name"}'/>
								</customData>
								<Text text="{I18N>/SCENARIO}"/>
							</Column>
							<Column hAlign="Center">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "tenant_name", "columnIndex":"3", "leadingProperty": "tenant_name", "sortProperty": "tenant_name"}'/>
								</customData>
								<Text text="{I18N>/TENANT_NAME}"/>
							</Column>
							<Column width="30%">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "company_name", "columnIndex":"4", "leadingProperty": "company_name", "sortProperty": "company_name"}'/>
								</customData>
								<Text text="{I18N>/COMPANY}"/>
							</Column>
							<Column width="10%">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "bizunit_name", "columnIndex":"5", "leadingProperty": "bizunit_name", "sortProperty": "bizunit_name"}'/>
								</customData>
								<Text text="{I18N>/BUSINESS_UNIT}"/>
							</Column>
							<Column width="10%">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "manager_local_name", "columnIndex":"6", "leadingProperty": "manager_local_name", "sortProperty": "manager_local_name"}'/>
								</customData>
								<Text text="{I18N>/MANAGER}"/>
							</Column>
							<Column hAlign="Center" width="7%">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "enrollment_date", "columnIndex":"7", "leadingProperty": "enrollment_date", "sortProperty": "enrollment_date",  "type":"date"}' />
								</customData>
								<Text text="{I18N>/DATE}"/>
							</Column>
							<Column hAlign="Center">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "operation_mode_display_flag", "columnIndex":"8", "leadingProperty": "operation_mode_display_flag", "sortProperty": "operation_mode_display_flag", "type": "boolean"}'/>
								</customData>
								<Text text="{I18N>/DISPLAY}"/>
							</Column>
							<Column hAlign="Center">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "operation_mode_calling_flag", "columnIndex":"9", "leadingProperty": "operation_mode_calling_flag", "sortProperty": "operation_mode_calling_flag", "type": "boolean"}'/>
								</customData>
								<Text text="{I18N>/EXPLAIN}"/>
							</Column>
							<Column hAlign="Center">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "operation_mode_alram_flag", "columnIndex":"10", "leadingProperty": "operation_mode_alram_flag", "sortProperty": "operation_mode_alram_flag", "type": "boolean"}'/>
								</customData>
								<Text text="{I18N>/ALRAM}"/>
							</Column>
							<Column hAlign="Center">
								<customData>
									<core:CustomData key="p13nData" value='\{"columnKey": "activate_flag", "columnIndex":"11", "leadingProperty": "activate_flag", "sortProperty": "activate_flag", "type": "boolean"}' />
								</customData>
								<Text text="{I18N>/ACTIVATE}"/>
							</Column>
						</columns>
						<items>
							<ColumnListItem type="Navigation" press=".onNavToDetail">
								<cells>
									<ObjectIdentifier text="{monitoring_type_name}"/>
									<ObjectIdentifier text="{scenario_name}"/>
									<ObjectIdentifier text="{tenant_name}"/>
									<ObjectIdentifier text="{=${company_name}.replaceAll(';', ', ')}"/>
									<ObjectIdentifier text="{=${bizunit_name}.replaceAll(';', ', ')}"/>
									<ObjectIdentifier text="{=${manager_local_name}.replaceAll(';', ', ')}"/>
									<ObjectIdentifier text="{path: 'enrollment_date', type: 'sap.ui.model.type.Date', formatOptions: { pattern: 'YYYY-MM-dd', UTC: true }}"/>
									<ObjectStatus icon="{= ${operation_mode_display_flag} === 'true' ? 'sap-icon://accept' : ''}"/>
									<ObjectStatus icon="{= ${operation_mode_calling_flag} === 'true' ? 'sap-icon://accept' : ''}"/>
									<ObjectStatus icon="{= ${operation_mode_alram_flag} === 'true' ? 'sap-icon://accept' : ''}"/>
                                    <ObjectStatus icon="{= ${activate_flag} === true ? 'sap-icon://accept' : ''}" />
                                    
								</cells>
							</ColumnListItem>
						</items>
					</Table>
				</smartTable:SmartTable>
			</VBox>
		</f:content>
	</f:DynamicPage>
</mvc:View>
