<mvc:View controllerName="pg.vp.vpMgt.controller.MainList"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:table="sap.ui.table"
    xmlns:tnt="sap.tnt"    
    xmlns:lib-m="ext.lib.control.m"
    height="100%">
	<App id="app">
        <f:DynamicPage id="page"
            headerExpanded="{mainListView>/headerExpanded}" 
            toggleHeaderOnTitleClick="true">
            <!-- DynamicPage Title -->
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>
                        <Title text="{i18n>appTitle}" />
                    </f:heading>
                    <f:snappedContent>
                        <form:SimpleForm 
                            id="pageSearchFormS" 
                            maxContainerCols="3" 
                            editable="true" 
                            layout="ResponsiveGridLayout" 
                            adjustLabelSpan="false" 
                            labelSpanL="4" 
                            labelSpanM="4" 
                            emptySpanL="0" 
                            emptySpanM="0" 
                            columnsL="2" 
                            columnsM="2">
                            <form:content>

                                <VBox>
                                    <Label text="Operation ORG" labelFor="search_Operation_ORG_S" required="true"></Label>
                                    <ComboBox id="search_Operation_ORG_S" width="10rem" items="{
                                        path: '/VpOperationOrg',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        sorter: { path: 'operation_org_code'}
                                    }">
                                        <items>
                                            <core:Item key="{operation_org_code}" text="{operation_org_name}" />
                                        </items>
                                    </ComboBox>
                                    <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12"/>                                        
                                    </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="Operation Uint" labelFor="search_Operation_UNIT_S" required="true"></Label>
                                    <ComboBox   id="search_Operation_UNIT_S" width="10rem"
                                             items="{
                                                        path : 'util>/CodeDetails',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'SP_SM_SUPPLIER_TYPE'}                               
                                                        ]
                                                    }"
                                             
                                    >
                                    <core:Item key="{util>code}" text="{util>code_description}" />
                                    </ComboBox> 
                                    <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12"/>                                        
                                    </layoutData>                                     
                                </VBox>                                
  
                            </form:content>
                        </form:SimpleForm>
                    </f:snappedContent>
                    <f:expandedContent>
                        <form:SimpleForm id="pageSearchFormE" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                            <form:content>

                                <VBox>
                                    <Label text="Operation ORG" labelFor="search_Operation_ORG_E" required="true"></Label>
                                    <ComboBox id="search_Operation_ORG_E" width="10rem"  items="{
                                        path: '/VpOperationOrg',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        sorter: { path: 'operation_org_code'}
                                    }">
                                        <items>
                                            <core:Item key="{operation_org_code}" text="{operation_org_name}" />
                                        </items>
                                    </ComboBox>
                                    <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12" />
                                    </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="Operation Uint" labelFor="search_Operation_UNIT_E" required="true"></Label>
                                    <ComboBox   id="search_Operation_UNIT_E" width="10rem"
                                            items="{
                                                        path : 'util>/CodeDetails',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'SP_SM_SUPPLIER_TYPE'}                               
                                                        ]
                                                    }"
                                            
                                    >
                                    <core:Item key="{util>code}" text="{util>code_description}" />
                                    </ComboBox>  
                                   <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12" />
                                    </layoutData>                                    
                                </VBox>
                        
                            </form:content>
                        </form:SimpleForm>
                    </f:expandedContent>
                    <f:actions>
                        <Button id="pageSearchButton" text="Search" type="Emphasized" press=".onPageSearchButtonPress" />
                    </f:actions>
                    <f:navigationActions>
                        <Button icon="sap-icon://unfavorite" type="Transparent" />
                    </f:navigationActions>
                </f:DynamicPageTitle>
            </f:title>
            <!-- DynamicPage Header -->
            <f:header>
                <f:DynamicPageHeader pinnable="true">

                    <form:SimpleForm id="pageSearchForm" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox>
                            <Label text="Department"></Label>
                            <lib-m:CodePicker id="search_Dept"
                                placeholder="Enter a department name"
                                keyField="department_id"
                                textField="department_local_name"
                                suggestionItems="{
                                    path: '/',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                    ],
                                    serviceUrl: 'srv-api/odata/v2/cm.util.HrService/',
                                    entityName: 'Department'
                                }">
                                <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a Department"
                                    keyFieldHeaderText="Department ID" textFieldHeaderText="Department" />
                            </lib-m:CodePicker>
                            <layoutData>
                                <layout:GridData span="XL2 L3 M5 S10" />
                            </layoutData>                                
                            </VBox>
                            <VBox>
                                <Label text="Manager"></Label>
                                <lib-m:CodePicker id="search_Man"
                                    placeholder="Enter a Employee name"
                                    keyField="employee_number"
                                    textField="user_local_name"
                                    suggestionItems="{
                                        path: '/',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        serviceUrl: 'srv-api/odata/v2/cm.util.HrService/',
                                        entityName: 'Employee'
                                    }">
                                    <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a Employee"
                                        keyFieldHeaderText="Employee ID" textFieldHeaderText="Employee" />
                                </lib-m:CodePicker>
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M5 S10" />
                                </layoutData>                                
                            </VBox>
                            <VBox>
                                <Label text= "Vendor Pool" labelFor="search_Vp_Name"></Label>
                                <HBox>
                                    <SearchField id="search_Vp_Name"
                                                search=".onDialogTreeCreate" 

                                                />
                                    <Input id="search_Vp_Code" placeholder="Input data" visible ="false"></Input>
                                </HBox>
                                <!-- <Label text="Vendor Pool" labelFor="search_Vp_Code"></Label>
                                <HBox>
                                    <ComboBox id="search_Vp_lvc" selectedKey="" change=".onDialogTreeCreate"  width="8em">
                                        <core:Item key="0" text="1Level"/>
                                        <core:Item key="1" text="2Level"/>                                                            
                                        <core:Item key="2" text="3Level"/>
                                    </ComboBox>  
                                    <Input id="search_Vp_Code" placeholder="Input data"></Input>
                                </HBox> -->
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>                        
                            <VBox>
                                <Label text="Supplier" labelFor="search_Sup"></Label>

                                <lib-m:CodePicker id="search_Sup"
                                    placeholder="Enter a department name"
                                    keyField="supplier_code"
                                    textField="supplier_local_name"
                                    suggestionItems="{
                                        path: '/',
                                        filters : [
                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                            {path : 'language_cd', operator : 'EQ', value1 : 'KO'}
                                        ],
                                        serviceUrl: 'srv-api/odata/v2/pg.vendorPoolMappingService/',
                                        entityName: 'VpSupplierMstView'
                                    }"  >
                                    <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a supplier"
                                        keyFieldHeaderText="Supplier ID" textFieldHeaderText="Supplier" />
                                </lib-m:CodePicker>

                                <!-- <Input id="search_Sup" placeholder="Input data"></Input> -->
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox>
                                <Label text="Supplier Registered Type" labelFor="search_Sup_Type"></Label>

                                <ComboBox id="search_Sup_Type" selectedKey=""  width="auto">
                                        <core:Item key="Potential" text="Potential"/>
                                        <core:Item key="Formal" text="Formal"/>                                                            
                                    </ComboBox>  
                                <layoutData>
                                    <layout:GridData
                                        span="XL2 L3 M6 S12"/>
                                </layoutData>
                            </VBox>
                        </form:content>
                    </form:SimpleForm>
                </f:DynamicPageHeader>
            </f:header>
            <f:content>
                <!-- <VBox> -->
                    <table:Table
                        id="mainTable"
                        selectionMode="MultiToggle"
                        fixedColumnCount="4"

                        rows="{
                            path: 'list>/vPSearchView',
                            filters: [
                            {path: 'language_cd', operator: 'EQ', value1: 'KO'}
                            ]
                        }"

                    
                        enableColumnReordering="false"
                        filter="filterPrice"
                        visibleRowCountMode="Auto"
                        >
                        <!-- cellClick=".onCellClick" -->
                        <!-- visibleRowCountMode="Auto"> -->
                    <table:extension>
                        <OverflowToolbar>
                            <Title text="List ({= ${list>/vPSearchView}.length || 0})" level="H2"/>
                            <ToolbarSpacer/>
                            <Button id="mainTableCreateButton"          type="Emphasized" text="Create Level"     press=".onDialogCreate"     enabled="{mode>/viewFlag}" />
                            <!-- Add the Personalization button -->
                            <Button id="mainTableEditButton"             text="Info.Edit"        press=".onMainTableEditButtonPress"     enabled="false" />
                            <Button id="mainTableChangeListButton"       text="Change List"      press=".onMainTableChangeListButtonPress"   enabled="false" />
                            <Button id="mainTableCombineButton"          text="Combine/Move"     press=".onMainTableCombineButtonPress"   enabled="false" />
                            <Button id="mainTableSplitButton"            text="Split"            press=".onMainTableSplitButtonPress"  enabled="false" />
                            <ToolbarSeparator/>
                            <Button icon="sap-icon://action-settings" press=".onMoldMstTablePersoButtonPressed" >
                                <layoutData>
                                    <OverflowToolbarLayoutData priority="NeverOverflow" />
                                </layoutData>
                            </Button>
                        </OverflowToolbar>
                    </table:extension> 

                    <table:columns>
                            <table:Column label="Higher Level" width="12rem" filterProperty="higher_level_path" >
                                <table:template>
                                    <Text text="{list>higher_level_path}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Vendor Pool" width="8rem" filterProperty="vendor_pool_local_name"  >
                                <table:template>
                                    <Text text="{list>vendor_pool_local_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Info. Change Status" width="10rem" hAlign="Center">
                                <table:template>
                                    <!-- <Text text="{list>info_change_status}" wrapping="false" /> -->
                                    <tnt:InfoLabel 
                                        text="{list>info_change_status}" 
                                        colorScheme="{
                                            path: 'list>info_change_status',
                                            formatter: '.onStatusColor'
                                        }" />                                    
                                </table:template>
                            </table:Column>

                            <table:Column label="Mtl. Attribute" width="8rem" filterProperty="vendor_pool_local_name" >
                                <table:template>
                                    <Text text="{list>inp_type_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column id="table_review_grade" label="Review Grade" width="8rem">
                                <table:template>
                                    <Text text="{list>equipment_grade_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column id="table_equipment_type" label="Equipment Type" width="8rem">
                                <table:template>
                                    <Text text="{list>equipment_type_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Maker P/N Flag" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{= !!${list>maker_material_code_mngt_flag} ? 'Y' : 'N'}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Supplier Quantity" hAlign="Center" width="8rem">
                                <table:template>
                                    <Text text="{list>supplier_quantity}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            
                            <table:Column label="Supplier Code" width="8rem" hAlign="Center" filterProperty="supplier_code" >
                                <table:template>
                                    <Text text="{list>supplier_code}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Supplier Name" width="8rem" filterProperty="supplier_local_name" >
                                <table:template>
                                    <Text text="{list>supplier_local_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Supplier Name(En)" width="8rem" filterProperty="supplier_english_name" >
                                <table:template>
                                    <Text text="{list>supplier_english_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Company" width="8rem" filterProperty="supplier_company_name" >
                                <table:template>
                                    <Text text="{list>supplier_company_name}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            
                            <table:Column label="Supplier Registered Type"  hAlign="Center" width="10rem">
                                <table:template>
                                    <Text text="{list>supplier_type_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <!-- <table:Column label="Maker Flag" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{list>maker_flag}" wrapping="false" />
                                </table:template>
                            </table:Column>
                                        
                            <table:Column label="Supplier Flag" width="8rem"  hAlign="Center">
                                <table:template>
                                    <Text text="{list>supplier_flag}" wrapping="false" />
                                </table:template>
                            </table:Column> -->
                            <table:Column label="Maker Flag" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{path : 'list>maker_flag', formatter: '.fnSetFlagValue'}" wrapping="false" />
                                </table:template>
                            </table:Column>
                                        
                            <table:Column label="Supplier Flag" width="8rem"  hAlign="Center">
                                <table:template>
                                    <Text text="{path : 'list>supplier_flag', formatter: '.fnSetFlagValue'}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            <table:Column label="Status" hAlign="Center" width="0rem">
                                <table:template>
                                    <Text text="{list>supplier_status_name}" wrapping="false"  />
                                </table:template>
                            </table:Column>

                            <table:Column label="V/P 제외여부" width="8rem"  hAlign="Center">
                                <table:template >
                                    <Text text="{= !!${list>vendor_pool_apply_exception_flag} ? 'Y' : 'N'}" wrapping="false" />                               
                                </table:template>
                            </table:Column>

                            <table:Column label="SD 제외여부" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{= !!${list>sd_exception_flag} ? 'Y' : 'N'}" wrapping="false" />                                
                                </table:template>
                            </table:Column>
                                        
                            <table:Column label="Department" width="8rem" filterProperty="repr_department_name">
                                <table:template>
                                    <Text text="{list>repr_department_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="Manager" width="8rem" filterProperty="managers_name">
                                <table:template>
                                    <Text text="{list>managers_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="평가통제여부" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{= !!${list>supeval_control_flag} ? 'Y' : 'N'}" wrapping="false" />  
                                </table:template>
                            </table:Column>                        

                            <table:Column label="평가통제시작일" width="8em">
                                <table:template>
                                    <Text text="{list>supeval_control_start_date}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="평가통제종료일" width="8em">
                                <table:template>
                                    <Text text="{list>supeval_control_end_date}" wrapping="false" />
                                </table:template>
                            </table:Column>   

                            <table:Column label="RM 통제여부" hAlign="Center" width="8em">
                                <table:template>
                                    <Text text="{= !!${list>supplier_rm_control_flag} ? 'Y' : 'N'}" wrapping="false" />  
                                </table:template>
                            </table:Column>

                        </table:columns>
                    </table:Table>            
                <!-- </VBox> -->
            </f:content>
            <!-- DynamicPage Footer -->
            <f:footer>
                <OverflowToolbar>
                    <ToolbarSpacer />
                    <Button type="Accept" text="Accept"/>
                    <Button type="Reject" text="Reject"/>
                </OverflowToolbar>
            </f:footer>
        </f:DynamicPage>
	</App>
</mvc:View>