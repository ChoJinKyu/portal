<mvc:View controllerName="pg.vp.vpMgt.controller.MainList"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:table="sap.ui.table"
    xmlns:tnt="sap.tnt"    
    xmlns:lib-m="ext.lib.control.m"
    xmlns:cm-ui="ext.cm.util.control.ui"
    height="100%">

        <f:DynamicPage id="page"
            headerExpanded="{mainListView>/headerExpanded}" 
            toggleHeaderOnTitleClick="true">
            <!-- DynamicPage Title -->
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>
                        <!-- <Title text="{I18N>/VENDOR_POOL}" /> -->
                            <Title text="Vendor Pool" />
                    </f:heading>
                    <f:snappedContent>
                        <form:SimpleForm 
                            id="pageSearchFormS" 
                            maxContainerCols="3" 
                            editable="true" 
                            layout="ResponsiveGridLayout" 
                            adjustLabelSpan="false" 
                            labelSpanL="4" 
                            labelSpanM="4" 
                            emptySpanL="0" 
                            emptySpanM="0" 
                            columnsL="2" 
                            columnsM="2">
                            <form:content>

                                <VBox>
                                    <Label text="{I18N>/OPERATION_ORG}" labelFor="search_Operation_ORG_S" required="true"></Label>
                                    <ComboBox 
                                        id="search_Operation_ORG_S" 
                                        width="10rem" 
                                        items="{
                                        path: '/VpOperationOrg',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        sorter: { path: 'operation_org_code'}
                                        }" 
                                        change="checkOrg" >
                                        <items>
                                            <core:Item key="{operation_org_code}" text="{operation_org_name}" />
                                        </items>
                                    </ComboBox>
                                    <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12"/>                                        
                                    </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/OPERATION_UNIT}" labelFor="search_Operation_UNIT_S" required="true"></Label>
                                    <ComboBox   id="search_Operation_UNIT_S" width="10rem"
                                             items="{
                                                        path : 'util>/Code',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'SP_SM_SUPPLIER_TYPE'}                               
                                                        ]
                                                    }"
                                             change="checkOrg"
                                             
                                    >
                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                    </ComboBox> 
                                                                    
                                    <!-- <lib-m:CodeComboBox id="search_Operation_UNIT_S" width="100%" showSecondaryValues="true" 
                                    useEmpty="true" emptyText="ALL" 
                                    items="{
                                        path: '/',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'},
                                            {path: 'group_code', operator: 'EQ', value1: 'SP_SM_SUPPLIER_TYPE'}
                                        ],
                                        serviceName: 'cm.util.CommonService',
                                        entityName: 'Code'
                                    }"
                                    selectedKey="{util>code}" required="true">
                                    </lib-m:CodeComboBox> -->
                                    <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12"/>                                        
                                    </layoutData>                                     
                                </VBox>                                
  
                            </form:content>
                        </form:SimpleForm>
                    </f:snappedContent>
                    <f:expandedContent>
                        <form:SimpleForm id="pageSearchFormE" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                            <form:content>

                                <VBox>
                                    <Label text="{I18N>/OPERATION_ORG}" labelFor="search_Operation_ORG_E" required="true"></Label>
                                    <ComboBox id="search_Operation_ORG_E" width="10rem"  items="{
                                        path: '/VpOperationOrg',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        sorter: { path: 'operation_org_code'}
                                    }" change="checkOrg">
                                        <items>
                                            <core:Item key="{operation_org_code}" text="{operation_org_name}" />
                                        </items>
                                    </ComboBox>
                                    <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12" />
                                    </layoutData>
                                </VBox>
                                <VBox>
                                    <Label text="{I18N>/OPERATION_UNIT}" labelFor="search_Operation_UNIT_E" required="true"></Label>
                                    <ComboBox   id="search_Operation_UNIT_E" width="10rem"
                                            items="{
                                                        path : 'util>/Code',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'SP_SM_SUPPLIER_TYPE'}                               
                                                        ]
                                                    }"
                                             change="checkOrg"
                                            
                                    >
                                    <core:Item key="{util>code}" text="{util>code_name}" />
                                    </ComboBox>  
                                   <layoutData>
                                        <layout:GridData span="XL2 L2 M2 S12" />
                                    </layoutData>                                    
                                </VBox>
                        
                            </form:content>
                        </form:SimpleForm>
                    </f:expandedContent>
                    <f:actions>
                        <Button id="pageSearchButton" text="{I18N>/SEARCH}" type="Emphasized" press=".onPageSearchButtonPress" />
                    </f:actions>
                    <f:navigationActions>
                        <Button icon="sap-icon://unfavorite" type="Transparent" />
                    </f:navigationActions>
                </f:DynamicPageTitle>
            </f:title>
            <!-- DynamicPage Header -->
            <f:header>
                <f:DynamicPageHeader pinnable="true">

                    <form:SimpleForm id="pageSearchForm" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                        <form:content>
                            <VBox>
                                <!-- <Label text="{I18N>/DEPARTMENT}"></Label>
                                <lib-m:CodePicker id="search_Dept"
                                    placeholder="Enter a department name"
                                    keyField="department_code"
                                    textField="department_local_name"
                                    suggestionItems="{
                                        path: '/',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        serviceUrl: 'srv-api/odata/v2/cm.util.HrService/',
                                        entityName: 'Department'
                                    }">
                                    <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a Department"
                                        keyFieldHeaderText="Department ID" textFieldHeaderText="Department" />
                                </lib-m:CodePicker> -->
                                <Label text="{I18N>/DEPARTMENT}" labelFor="search_Dept_Name"></Label>
                                <HBox>
                                    <SearchField id="search_Dept_Name"
                                        search=".onInputWithDeptValuePress" 
                                        change="resetCode"
                                        />
                                    <Input id="search_Dept_Code" placeholder="Input data" visible ="false"></Input>
                                </HBox>                                
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M5 S10" />
                                </layoutData>                                
                            </VBox>
                            <VBox>
                                <!-- <Label text="{I18N>/MANAGER}"></Label>
                                <lib-m:CodePicker id="search_Man"
                                    placeholder="Enter a Employee name"
                                    keyField="employee_number"
                                    textField="user_local_name"
                                    suggestionItems="{
                                        path: '/',
                                        filters: [
                                            {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                        ],
                                        serviceUrl: 'srv-api/odata/v2/cm.util.HrService/',
                                        entityName: 'Employee'
                                    }">
                                    <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a Employee"
                                        keyFieldHeaderText="Employee ID" textFieldHeaderText="Employee" />
                                </lib-m:CodePicker> -->
                                <!-- <Label text= "{I18N>/MANAGER}" labelFor="search_Man_Name"></Label>
                                <HBox>
                                    <SearchField id="search_Man_Name"
                                                search=".vhManagerCode" 
                                                change="resetCode"
                                                valueHelpOnly="true" 
                                                />
                                    <Input id="search_Man_Code" placeholder="Input data" visible ="false"></Input>
                                </HBox> -->
                                <!-- <Label text="{I18N>/MANAGER}" labelFor="search_Man_Name"></Label>
                                <Input id="search_Man_Name"
                                    placeholder="Choose a employee from the ValueHelp"
                                    showValueHelp="true" valueHelpRequest=".onInputWithEmployeeValuePress">
                                </Input>                                 -->
                        <VBox>
                            <Label text="{I18N>/MANAGER}" labelFor="search_Man_Name"></Label>
                            <HBox>
                            <SearchField id="search_Man_Name"
                                search=".onInputWithEmployeeValuePress" 
                                change="resetCode"
                                />
                            <Input id="search_Man_Code" placeholder="Input data" visible ="false"></Input>
                            </HBox>
                            <layoutData>
                                <layout:GridData span="XL10 L10 M10 S10" />
                            </layoutData>
                        </VBox>                                
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M5 S10" />
                                </layoutData>                                
                            </VBox>
                            <VBox>
                                <Label text= "{I18N>/VENDOR_POOL}" labelFor="search_Vp_Name"></Label>
                                <HBox>
                                    <SearchField id="search_Vp_Name"
                                                search=".onDialogTreeCreate" 
                                                change="resetCode"

                                                />
                                    <Input id="search_Vp_Code" placeholder="Input data" visible ="false"></Input>
                                </HBox>
                                <!-- <Label text="Vendor Pool" labelFor="search_Vp_Code"></Label>
                                <HBox>
                                    <ComboBox id="search_Vp_lvc" selectedKey="" change=".onDialogTreeCreate"  width="8em">
                                        <core:Item key="0" text="1Level"/>
                                        <core:Item key="1" text="2Level"/>                                                            
                                        <core:Item key="2" text="3Level"/>
                                    </ComboBox>  
                                    <Input id="search_Vp_Code" placeholder="Input data"></Input>
                                </HBox> -->
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>                        
                            <VBox>
                                <Label text= "{I18N>/SUPPLIER}" labelFor="search_Sup_Name"></Label>
                                <HBox>
                                    <SearchField id="search_Sup_Name"
                                                search=".vhSupplierCode" 
                                                change="resetCode"
                                                valueHelpOnly="true" 
                                                />
                                    <Input id="search_Sup_Code" placeholder="Input data" visible ="false"></Input>
                                </HBox>
                                <!-- <Label text="{I18N>/SUPPLIER}" labelFor="search_Sup"></Label> -->

                                <!-- <lib-m:CodePicker id="search_Sup"
                                    placeholder="Enter a supplier name"
                                    keyField="supplier_code"
                                    textField="supplier_local_name"
                                    suggestionItems="{
                                        path: '/',
                                        filters : [
                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                            {path : 'language_cd', operator : 'EQ', value1 : 'KO'}
                                        ],
                                        serviceUrl: 'srv-api/odata/v2/pg.vendorPoolMappingService/',
                                        entityName: 'VpSupplierMstView'
                                    }"  >
                                    <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a supplier"
                                        keyFieldHeaderText="Supplier ID" textFieldHeaderText="Supplier" />
                                </lib-m:CodePicker> -->

                                <!-- <Input id="search_Sup" placeholder="Input data"></Input> -->
                                <!-- <Input id="search_Sup" placeholder="Input data" showValueHelp="true" valueHelpOnly="false" valueHelpRequest=".vhSupplierCode"/> -->
                                <layoutData>
                                    <layout:GridData span="XL2 L3 M6 S12" />
                                </layoutData>
                            </VBox>
                            <VBox>
                                <Label text="{I18N>/SUPPLIER_REG_TYPE}" labelFor="search_Sup_Type"></Label>

                                <ComboBox id="search_Sup_Type" selectedKey=""  width="auto">
                                        <core:Item key="Potential" text="Potential"/>
                                        <core:Item key="Qualified" text="Qualified"/>                                                            
                                    </ComboBox>  
                                <layoutData>
                                    <layout:GridData
                                        span="XL2 L3 M6 S12"/>
                                </layoutData>
                            </VBox>
                            
                        </form:content>
                    </form:SimpleForm>
                </f:DynamicPageHeader>
            </f:header>
            <f:content>
                <!-- <VBox> -->
                    <table:Table
                        id="mainTable"
                        selectionMode="MultiToggle"
                        fixedColumnCount="6"

                        rows="{
                            path: 'list>/vpSearchOrderView',
                            sorter: { path: 'vendor_pool_path_name'}
                            
                        }"

                        cellClick=".onCellClick"
                        enableColumnReordering="false"
                        filter="filterPrice"
                        visibleRowCountMode="Auto"
                        >
                        <!-- cellClick=".onCellClick" -->
                        <!-- visibleRowCountMode="Auto"> -->
                    <table:extension>
                        <OverflowToolbar>
                           <Title text="List ({= ${list>/vpSearchOrderView}.length || 0})" level="H2"/>
                            <ToolbarSpacer/>
                            <Button id="mainTableCreateButton"          type="Emphasized" text="{I18N>/CREATE_LEVEL}"     press=".onDialogCreate"     enabled="{mode>/viewFlag}" />
                            <!-- Add the Personalization button -->
                            <Button id="mainTableEditButton"            type="Emphasized" text="{I18N>/INFO_EDIT}"        press=".onMainTableEditButtonPress"     enabled="true" />
                            <Button id="mainTableChangeListButton"       text="{I18N>/CHANGE_LIST}"      press=".onMainTableChangeListButtonPress"   enabled="false" />
                            <Button id="mainTableCombineButton"          text="{I18N>/COMBINE_MOVE}"     press=".onMainTableCombineButtonPress"   enabled="false" />
                            <Button id="mainTableSplitButton"            text="{I18N>/SPLIT}"            press=".onMainTableSplitButtonPress"  enabled="false" />
                            <!-- <Button id="rTableExportButton" text="{I18N>/EXCEL}" type="Transparent" press=".onExportPress" class="sapUiTinyMargin" icon="sap-icon://excel-attachment" />                                 -->
                            <ToolbarSeparator/>
                            <Button icon="sap-icon://action-settings" press=".onMoldMstTablePersoButtonPressed" >
                                <layoutData>
                                    <OverflowToolbarLayoutData priority="NeverOverflow" />
                                </layoutData>
                            </Button>
                        </OverflowToolbar>
                    </table:extension> 

                    <table:columns>
                            
                            <table:Column id="table_1lv" label="{I18N>/LEVEL1}" width="12rem" filterProperty="vendor_pool_level1_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>vendor_pool_level1_name}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            <table:Column id="table_2lv" label="{I18N>/LEVEL2}" width="12rem" filterProperty="vendor_pool_level2_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>vendor_pool_level2_name}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            <table:Column id="table_3lv" label="{I18N>/LEVEL3}" width="12rem" filterProperty="vendor_pool_level3_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>vendor_pool_level3_name}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            <table:Column id="table_4lv" label="{I18N>/LEVEL4}" width="12rem" filterProperty="vendor_pool_level4_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>vendor_pool_level4_name}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            <table:Column id="table_5lv" label="{I18N>/LEVEL5}" width="16rem" filterProperty="vendor_pool_level5_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>vendor_pool_level5_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

<!-- 
                            <table:Column label="{I18N>/VENDOR_POOL}" width="8rem" filterProperty="vendor_pool_local_name"  >
                                <table:template>
                                    <Text text="{list>vendor_pool_local_name}" wrapping="false" />
                                </table:template>
                            </table:Column> -->

                            <table:Column label="{I18N>/INFO_CHANGE_STATUS}" width="10rem" hAlign="Center">
                                <table:template>
                                    <!-- <Text text="{list>info_change_status}" wrapping="false" /> -->
                                    <tnt:InfoLabel 
                                        text="{list>info_change_status}" 
                                        colorScheme="{
                                            path: 'list>info_change_status',
                                            formatter: '.onStatusColor'
                                        }" />                                    
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/MTL_ATTRIBUTE}" width="8rem" filterProperty="vendor_pool_local_name" hAlign="Center" >
                                <table:template>
                                    <Text text="{list>inp_type_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column id="table_review_grade" label="{I18N>/REVIEW_GRADE}" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{list>equipment_grade_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column id="table_equipment_type" label="{I18N>/EQUIPMENT_TYPE}" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{list>equipment_type_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/MAKER_MATERIAL_MNG_FLAG}" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{= !!${list>maker_material_code_mngt_flag} ? 'Y' : 'N'}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/SUPPLIER_QUANTITY}" hAlign="Center" width="8rem"  >
                                <table:template>
                                    <Text text="{list>supplier_quantity}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            
                            <table:Column label="{I18N>/SUPPLIER_CODE}" width="8rem" hAlign="Center" filterProperty="supplier_code" >
                                <table:template>
                                    <Text text="{list>supplier_code}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/SUPPLIER_LOCAL_NAME}" width="12rem" filterProperty="supplier_local_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>supplier_local_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/SUPPLIER_ENGLISH_NAME}" width="16rem" filterProperty="supplier_english_name"  hAlign="Center">
                                <table:template>
                                    <Text text="{list>supplier_english_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/COMPANY}" width="8rem" filterProperty="supplier_company_name" hAlign="Center" >
                                <table:template>
                                    <Text text="{list>supplier_company_name}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            
                            <table:Column label="{I18N>/SUPPLIER_REG_TYPE}"  hAlign="Center" width="10rem">
                                <table:template>
                                    <Text text="{list>supplier_type_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <!-- <table:Column label="Maker Flag" width="8rem" hAlign="Center">
                                <table:template>
                                    <Text text="{list>maker_flag}" wrapping="false" />
                                </table:template>
                            </table:Column>
                                        
                            <table:Column label="Supplier Flag" width="8rem"  hAlign="Center">
                                <table:template>
                                    <Text text="{list>supplier_flag}" wrapping="false" />
                                </table:template>
                            </table:Column> -->
                            <table:Column label="{I18N>/MAKER_FLAG}" width="7rem" hAlign="Center">
                                <table:template>
                                    <Text text="{path : 'list>maker_flag', formatter: '.fnSetFlagValue'}" wrapping="false" />
                                </table:template>
                            </table:Column>
                                        
                            <table:Column label="{I18N>/SUPPLIER_FLAG}" width="7rem"  hAlign="Center">
                                <table:template>
                                    <Text text="{path : 'list>supplier_flag', formatter: '.fnSetFlagValue'}" wrapping="false" />
                                </table:template>
                            </table:Column>
                            <table:Column label="{I18N>/STATUS}" hAlign="Center" width="6rem">
                                <table:template>
                                    <Text text="{list>supplier_status_name}" wrapping="false"  />
                                </table:template>
                            </table:Column>

                            <!-- <table:Column label="{I18N>/VP_EXCEPTION_FLAG}" width="8rem"  hAlign="Center">
                                <table:template >
                                    <Text text="{= !!${list>vendor_pool_apply_exception_flag} ? 'Y' : 'N'}" wrapping="false" />                               
                                </table:template>
                            </table:Column> -->

                            <table:Column label="{I18N>/SD_EXCEPTION_FLAG}" width="7rem" hAlign="Center">
                                <table:template>
                                    <Text text="{= !!${list>sd_exception_flag} ? 'Y' : 'N'}" wrapping="false" />                                
                                </table:template>
                            </table:Column>
                                        
                            <table:Column label="{I18N>/DEPARTMENT}" width="16rem" filterProperty="repr_department_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>repr_department_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/MANAGER}" width="10rem" filterProperty="managers_name" hAlign="Center">
                                <table:template>
                                    <Text text="{list>managers_name}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/EVAL_CONTROL_FLAG}" width="7rem" hAlign="Center">
                                <table:template>
                                    <Text text="{= !!${list>supeval_control_flag} ? 'Y' : 'N'}" wrapping="false" />  
                                </table:template>
                            </table:Column>                        

                            <table:Column label="{I18N>/EVAL_CONTROL_START_DATE}" width="8em" hAlign="Center">
                                <table:template>
                                    <Text text="{list>supeval_control_start_date}" wrapping="false" />
                                </table:template>
                            </table:Column>

                            <table:Column label="{I18N>/EVAL_CONTROL_END_DATE}" width="8em" hAlign="Center">
                                <table:template>
                                    <Text text="{list>supeval_control_end_date}" wrapping="false" />
                                </table:template>
                            </table:Column>   

                            <table:Column label="{I18N>/RM_CONTROL_FLAG}" hAlign="Center" width="7em">
                                <table:template>
                                    <Text text="{= !!${list>supplier_rm_control_flag} ? 'Y' : 'N'}" wrapping="false" />  
                                </table:template>
                            </table:Column>

                        </table:columns>
                    </table:Table>            
                <!-- </VBox> -->
            </f:content>
            <!-- DynamicPage Footer -->
            <f:footer>
                <OverflowToolbar>
                    <ToolbarSpacer />
                    <Button type="Accept" text="Accept"/>
                    <Button type="Reject" text="{I18N>/REJECT}"/>
                </OverflowToolbar>
            </f:footer>

        </f:DynamicPage>

</mvc:View>