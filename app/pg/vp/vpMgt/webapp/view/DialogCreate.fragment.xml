<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:layout="sap.ui.layout" 
    xmlns:table="sap.ui.table"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:f="sap.f" 
    xmlns:lib-m="ext.lib.control.m"
    height="100%"
        >
    
    <Dialog id="ceateVpCategory" class="sapUiSmallMargin"  contentWidth="100%" title ="Create Vendor Pool">
        <content>  
        <HBox>
            <VBox class="sapUiSmallMargin" width="40%" >
                <form:SimpleForm
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="4"
                    labelSpanL="3"
                    labelSpanM="4"
                    labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="0"
                    emptySpanL="4"
                    emptySpanM="0"
                    emptySpanS="0"
                    columnsXL="2"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false" >
                    <form:content>
                        <!-- 팝업 영역 -->
                        <VBox>
                            <Label text="Operation ORG" labelFor="search_Operation_ORG" required="true"></Label>
                            <ComboBox id="tpop_Operation_ORG" width="100%" items="{
                                path: '/VpOperationOrg',
                                filters: [
                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                ],
                                sorter: { path: 'operation_org_code'}
                            }">
                                <items>
                                    <core:Item key="{operation_org_code}" text="{operation_org_name}" />
                                </items>
                            </ComboBox>
                            <layoutData>
                                <layout:GridData span="XL4 L4 M4 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text="Operation Unit" labelFor="pop_operation_unit_code" required="true"></Label>                        
                            <ComboBox   id="tpop_operation_unit_code"
                                            items="{
                                                        path : 'util>/CodeDetails',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'SP_SM_SUPPLIER_TYPE'}                               
                                                        ]
                                                    }"
                                            
                                >
                                    <core:Item key="{util>code}" text="{util>code_description}" />
                                </ComboBox>    
                            <layoutData>
                                <layout:GridData span="XL4 L4 M4 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = " " design="Bold" width="0rem"/> 
                            <Button id="popTreeTableSearchButton"          text="Search"     press=".onDialogSearch"     type="Emphasized" />
                            <layoutData>
                                <layout:GridData span="XL4 L4 M4 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Vendor Pool" design="Bold" /> 
                                <Input id="tpop_vendor_pool_local_name" placeholder="Input data"></Input> 
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <table:TreeTable
                                id="treeTable"
                                selectionMode="Single"
                                rowSelectionChange=".onCheck"  
	                            selectionBehavior="Row"                  
                                enableColumnReordering="false"
                                expandFirstLevel="true"
                                
                                rows="{
                                    path : 'tree>/VpPopupView',
                                    parameters : {
                        	        arrayNames: ['nodes'],
                        	        numberOfExpandedLevels: 3
                       		        }
                                }"
                                >
                                
                            <table:extension>
                                <OverflowToolbar>
                                    <ToolbarSpacer/>
                                    <Button id="popTableCreateButton"          text="Create Same Level"     press=".onDialogCreateSame"     enabled="{mode>/viewFlag}" />
                                    <Button id="popTableEditButton"            text="Create Lower Level"    press=".onDialogCreatelower"     enabled="{mode>/viewFlag}" />
                                    <Button id="popTableDelButton"            icon="sap-icon://delete" text="Delete"    press=".onDialogDel"     enabled="{mode>/viewFlag}" />
                                    <ToolbarSeparator/>
                                </OverflowToolbar>
                            </table:extension>     
                                <!-- visibleRowCountMode="Auto"> -->
                            <table:columns>
                                    <table:Column label="Vendor Pool" >
                                        <table:template>
                                            <Text id="t_vpNm" text="{tree>vendor_pool_local_name}" wrapping="false" />
                                        </table:template>
                                    </table:Column>
                                  
                                    <table:Column label="Higher Level" width="0rem" >
                                        <table:template>
                                            <Text text="{tree>higher_level_path}" wrapping="false" />
                                        </table:template>
                                    </table:Column>
                                    <table:Column label="Level" width="0rem">
                                        <table:template>
                                            <Text text="{tree>level_path}" wrapping="false" />
                                        </table:template>
                                    </table:Column>                                                                          
                                    <table:Column label="Operation Unit" width="0rem">
                                        <table:template>
                                            <Text text="{tree>org_code}" wrapping="false" />
                                        </table:template>
                                    </table:Column> 
                                    <table:Column label="Hierarchy Level" width="0rem">
                                        <table:template>
                                            <Text text="{tree>hierarchy_level}" wrapping="false" />
                                        </table:template>
                                    </table:Column>                                      
                                    <table:Column label="TENANT ID" width="0rem">
                                        <table:template>
                                            <Text text="{tree>tenant_id}" wrapping="false" />
                                        </table:template>
                                    </table:Column>  
                                    <table:Column label="COMPANY" width="0rem">
                                        <table:template>
                                            <Text text="{tree>company_code}" wrapping="false" />
                                        </table:template>
                                    </table:Column>  
                                    <table:Column label="ORG TYPE" width="0rem">
                                        <table:template>
                                            <Text text="{tree>org_type_code}" wrapping="false" />
                                        </table:template>
                                    </table:Column> 
                                    <table:Column label="PARENT VENDOR POOL" width="0rem">
                                        <table:template>
                                            <Text text="{tree>parent_vendor_pool_code}" wrapping="false" />
                                        </table:template>
                                    </table:Column> 
                                    <table:Column label="Operation Unit" width="0rem">
                                        <table:template>
                                            <Text text="{tree>operation_unit_code}" wrapping="false" />
                                        </table:template>
                                    </table:Column>
                                    <table:Column label="Drill State" width="0rem">
                                        <table:template>
                                            <Text text="{tree>drill_state}" wrapping="false" />
                                        </table:template>
                                    </table:Column>
                                    <table:Column label="Vendor Pool" width="0rem">
                                        <table:template>
                                            <Text text="{tree>vendor_pool_code}" wrapping="false" />
                                        </table:template>
                                    </table:Column>                                    
                            </table:columns>
                            </table:TreeTable>  
                            <layoutData>
                                <layout:GridData span="XL12 L12 M12 S12" />
                            </layoutData>           
                        </VBox>                                                                                                                                                            
                    </form:content>
                </form:SimpleForm>
            </VBox>  
            <VBox class="sapUiSmallMargin" width="60%">

                <form:SimpleForm
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="4"
                    labelSpanL="3"
                    labelSpanM="4"
                    labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="0"
                    emptySpanL="4"
                    emptySpanM="0"
                    emptySpanS="0"
                    columnsXL="2"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false" >
                    <form:content>
                        <!-- 팝업 영역 -->
                        <core:Title text="Category Info" />                        
                        <VBox>
                            <Label text = "Higher Level" design="Bold"/> 
                                <Text id="pop_higher_level_path" text=""/>
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Operation Unit" design="Bold" required="true"/> 
                                <Text id="pop_operation_unit_name" visible="false" text=""/> 
                                <Text id="pop_operation_unit_name1" text=""/>
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Level Name(Local)" design="Bold" required="true"/> 
                                <Input id="pop_vendor_pool_local_name" placeholder="Input data"></Input> 
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Level Name(Eng)*" design="Bold" required="true"/> 
                                <Input id="pop_vendor_pool_english_name" placeholder="Input data"></Input> 
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>    
                        <VBox>
                            <Label text = "Description" design="Bold" /> 
                                <Input id="pop_vendor_pool_desc" placeholder="Input data"></Input> 
                            <layoutData>
                                <layout:GridData span="XL12 L12 M12 S12" />
                            </layoutData> 
                        </VBox> 
                        <core:Title text="Detail Info" />                        
                        <VBox>
                            <Label text = "Department" design="Bold"/> 
                                <lib-m:CodePicker id="pop_repr_department_code"
                                placeholder="Enter a department name"
                                keyField="department_id"
                                textField="department_local_name"
                                suggestionItems="{
                                    path: '/',
                                    filters: [
                                        {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                    ],
                                    serviceUrl: 'srv-api/odata/v2/cm.util.HrService/',
                                    entityName: 'Department'
                                }">
                                <lib-m:CodePickerValueHelp contentWidth="500px" title="Choose a Department"
                                    keyFieldHeaderText="Department ID" textFieldHeaderText="Department" />
                                </lib-m:CodePicker>
                                <!-- <Input id="pop_repr_department_code"></Input>  -->
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Industrial Classification" design="Bold"/> 
                                <ComboBox   id="pop_industry_class_code"
                                            items="{
                                                        path : 'util>/CodeDetails',
                                                        filters : [
                                                            {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                            {path : 'group_code', operator : 'EQ', value1 : 'PG_VP_INDUSTRY_CLASS_CODE'}                               
                                                        ]
                                                    }"
                                >
                                    <core:Item key="{util>code}" text="{util>code_description}" />
                                </ComboBox>                                                                 
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox> 
                        <VBox>
                            <HBox>
                                <VBox>
                                    <Label text = "Mtl. Attribute" class="sapUiTinyMarginEnd" design="Bold"/> 
                                    <ComboBox   id="pop_inp_type_code" class="sapUiTinyMarginEnd"
                                                items="{
                                                            path : 'util>/CodeDetails',
                                                            filters : [
                                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                                {path : 'group_code', operator : 'EQ', value1 : 'PG_VP_INP_TYPE_CODE'}                                
                                                            ]
                                                        }"
                                                change=".handlemtlChang"
                                    >
                                        <core:Item key="{util>code}" text="{util>code_description}" />
                                    </ComboBox>                                      
                                     
                                </VBox>
                                <VBox id="v_pop_plan_base" >
                                     <Label text = "Planning Base" class="sapUiTinyMarginEnd" design="Bold"/>
                                    <ComboBox   id="pop_plan_base"
                                                items="{
                                                            path : 'util>/CodeDetails',
                                                            filters : [
                                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                                {path : 'group_code', operator : 'EQ', value1 : 'PG_VP_MTLMOB_BASE_CODE'}                                
                                                            ]
                                                        }"
                                    >
                                        <core:Item key="{util>code}" text="{util>code_description}" />
                                    </ComboBox>                                       
                                </VBox> 
                            </HBox>                              
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox>
                            <Label text = "Evaluation" design="Bold"/> 
                                <Switch id="pop_regular_evaluation_flag" state="false" customTextOn="Yes" customTextOff="No">
                                    <layoutData>
                                        <FlexItemData growFactor="1" />
                                    </layoutData>
                                </Switch> 
                            <layoutData>
                                <layout:GridData span="XL1 L1 M1 S12" />
                            </layoutData> 
                        </VBox> 
                        <VBox>
                            <Label text = "SD Flag" design="Bold"/> 
                                <Switch id="pop_sd_exception_flag" state="false" customTextOn="Yes" customTextOff="No">
                                    <layoutData>
                                        <FlexItemData growFactor="1" />
                                    </layoutData>
                                </Switch> 
                            <layoutData>
                                <layout:GridData span="XL1 L1 M1 S12" />
                            </layoutData> 
                        </VBox>                         
                        <VBox>
                            <Label text = "Maker P/N" design="Bold"/> 
                                <Switch id="pop_maker_material_code_mngt_flag" state="false" customTextOn="Yes" customTextOff="No">
                                    <layoutData>
                                        <FlexItemData growFactor="1" />
                                    </layoutData>
                                </Switch> 
                            <layoutData>
                                <layout:GridData span="XL1 L1 M1 S12" />
                            </layoutData> 
                        </VBox> 
                        <VBox>
                            <Label text = "V/P Exception" design="Bold"/> 
                                <Switch id="pop_vendor_pool_apply_exception_flag" state="false" customTextOn="Yes" customTextOff="No">
                                    <layoutData>
                                        <FlexItemData growFactor="1" />
                                    </layoutData>
                                </Switch> 
                            <layoutData>
                                <layout:GridData span="XL1 L1 M1 S12" />
                            </layoutData> 
                        </VBox>                                                                       
                        <VBox id = "v_review_grade" >
                            <Label text = "Review Grade" design="Bold"/> 
                                <HBox>
                                    <ComboBox   id="pop_equipment_grade_code"
                                                items="{
                                                            path : 'util>/CodeDetails',
                                                            filters : [
                                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                                {path : 'group_code', operator : 'EQ', value1 : 'PG_VP_EQUIPMENT_GRADE_CODE'}                                
                                                            ]
                                                        }"
                                    >
                                        <core:Item key="{util>code}" text="{util>code_description}" />
                                    </ComboBox>                                    

                                </HBox>                               
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>
                        <VBox id ="v_equipment_type" >
                            <Label text = "Equipment Type" design="Bold"/> 
                                <HBox>
                                    <ComboBox   id="pop_equipment_type_code"
                                                items="{
                                                            path : 'util>/CodeDetails',
                                                            filters : [
                                                                {path : 'tenant_id', operator : 'EQ', value1 : 'L2100'},
                                                                {path : 'group_code', operator : 'EQ', value1 : 'PG_VP_EQUIPMENT_TYPE_CODE'}                                
                                                            ]
                                                        }"
                                    >
                                        <core:Item key="{util>code}" text="{util>code_description}" />
                                    </ComboBox>                                        
                                </HBox>                               
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>  
                        <VBox id="v_internal_rate">
                            <Label text = "Site Internal Rate" design="Bold"/> 
                                <HBox>
                                    <Input id="pop_dom_oversea_netprice_diff_rate" textAlign="Right" type="Number" change=".fnCalcRate" ></Input> 
                                    <Label class ="sapUiTinyMarginTop" text="%" design="Bold"/>
                                </HBox>                                
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox> 
                        <VBox id="v_external_rate">
                            <Label text = "Site External Rate" design="Bold"/> 
                                <HBox>
                                    <Input id="pop_domestic_net_price_diff_rate" textAlign="Right" type="Number" change=".fnCalcRate"  ></Input> 
                                    <Label class ="sapUiTinyMarginTop" text="%" design="Bold"/>
                                </HBox>
                            <layoutData>
                                <layout:GridData span="XL6 L6 M6 S12" />
                            </layoutData> 
                        </VBox>                                                                                                                                         
                    </form:content>
                </form:SimpleForm>
            </VBox> 
        </HBox>                           
        </content>
        <ToolbarSpacer/>
        <HBox justifyContent="End" >
            <Button text="Cancel" type="Transparent" class="sapUiSmallMarginBeginEnd" press=".createPopupClose"/>
            <Button id= "pop_save_bt" text="Save" class="sapUiSmallMarginBeginEnd" type="Emphasized" press=".handleSave"/>
        </HBox>
    </Dialog>
</core:FragmentDefinition>
