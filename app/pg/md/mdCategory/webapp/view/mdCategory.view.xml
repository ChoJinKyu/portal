<mvc:View controllerName="pg.md.mdCategory.controller.mdCategory"
    class="sapUiSizeCompact"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
	xmlns:dnd="sap.ui.core.dnd"
    xmlns:form="sap.ui.layout.form" 
    xmlns:layout="sap.ui.layout" 
    xmlns:core="sap.ui.core" 
    xmlns:lib-m="ext.lib.m"
    height="100%">

    <f:DynamicPage id="page" 
    toggleHeaderOnTitleClick="false" 
    headerExpanded="true" 
    fitContent="true">
      <!--DynamicPage Title -->
      <f:title>
        <f:DynamicPageTitle>
          <f:heading>
            <Title text="{i18n>appTitle}" />
          </f:heading>
          <!-- 조회 -->
          <f:actions>
            <Button id="pageSearchButton" text="{I18N>/SEARCH}" type="Emphasized" press=".onSearch"/>
          </f:actions>
          <!-- 즐겨찾기 -->
          <f:navigationActions>
            <Button icon="sap-icon://unfavorite" type="Transparent" />
          </f:navigationActions>
        </f:DynamicPageTitle>
      </f:title>
      <!--DynamicPage Header -->
      <f:header>
        <f:DynamicPageHeader pinnable="false">
            <form:SimpleForm id="pageSearchFormS" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2">
                <form:content>
                    <VBox>
                        <Label text="테넌트" labelFor="searchTenantCombo" required="true"></Label>
                        <ComboBox id="searchTenantCombo" width="100%" items="{
                                path: 'org>/Org_Tenant',
                                filters: []
                            }"
                            selectionChange="onChangeTenant">
                            <items>
                                <core:Item key="{org>tenant_id}" text="{org>tenant_id} : {org>tenant_name}" />
                            </items>
                        </ComboBox>
                        <layoutData>
                            <layout:GridData span="XL2 L3 M6 S12" />
                        </layoutData> 
                    </VBox>
                    <VBox>   
                        <Label text="{I18N>/BUSINESS_UNIT}" labelFor="searchChain" required="true"></Label>
                        <ComboBox id="searchChain" width="100%" placeholder="All" selectedKey="" >
                        <!-- <ComboBox id="searchChain" width="100%" placeholder="All" selectedKey="" items="{
                                path: 'org>/Org_Unit',
                                filters: [
                                    {path: 'tenant_id', operator: 'EQ', value1: 'L2100'}
                                ]
                            }"> -->
                            <items>
                                <core:Item key="{org>bizunit_code}" text="{org>bizunit_code}: {org>bizunit_name}" />
                            </items>
                        </ComboBox>
                        <layoutData>
                            <layout:GridData span="XL2 L3 M6 S12" />
                        </layoutData> 
                    </VBox>
                </form:content>
            </form:SimpleForm>
        </f:DynamicPageHeader>
      </f:header>
      <f:content>
        <VBox>
        <Table id="mainTable"
                sticky="HeaderToolbar,ColumnHeaders" 
                inset="false" 
                growing="true"
                growingThreshold="15"
                mode="SingleSelectLeft" 
                selectionChange=".onSeletionChange"
                noDataText="{I18N>/NCM0001}"
                items="{
                    path: 'list>/MdCategory'

                }"
				class="sapFDynamicPageAlignContent"
                columnResize="onColumnResize"
		        beforeOpenContextMenu="onBeforeOpenContextMenu"
                width="auto">
            <headerToolbar>
            <OverflowToolbar class="sapFDynamicPageAlignContent">
              <Title text="SPMD Category List ({= ${list>/MdCategory}.length})" level="H2"/>
              <ToolbarSpacer/>
              <Button text="{I18N>/NEW}" id="buttonMainAddRow" press=".onAdd('mainTable', 'list', 'MdCategory', 'tenant_id')"  type="Transparent"/>
              <!-- <Button text="{I18N>/UPDATE}" id="buttonMainEditRow" press=".onEdit('mainTable', 'list', 'MdCategory', 'tenant_id')"  type="Transparent"/> -->
              <!-- <Button text="{I18N>/CANCEL}" id="buttonMainCancelRow" press=".onSearch"  type="Transparent" enabled="false"/> -->
              <Button text="{I18N>/ROW_DELETE}" id="buttonMainDeleteRow" press=".onDelete('mainTable', 'list')"   type="Transparent" enabled="false" />
              <Button text="{I18N>/SAVE}" id="buttonMainSaveRow" press=".onSave('mainTable', 'list')"   type="Emphasized"/>
              <ToolbarSeparator/>
              <Button icon="sap-icon://action-settings" press=".onMainTablePersoButtonPressed" >
                <layoutData>
                  <OverflowToolbarLayoutData priority="NeverOverflow"/>
                </layoutData>
              </Button>
            </OverflowToolbar>
            </headerToolbar>

            <columns>
                <Column hAlign="Center" mergeDuplicates="false" width="80px" >
                    <Text text="No." />
                </Column>
                <Column hAlign="Center" mergeDuplicates="false" width="80px" >
                    <Text text="사업본부코드" />
                </Column>
                <Column hAlign="Center" width="200px">
                    <Text text="사업본부명" />
                </Column>
                <Column hAlign="Center" mergeDuplicates="false" width="80px" >
                    <Text text="범주코드" />
                </Column>
                <Column hAlign="Center" width="250px">
                    <Text text="범주명" />
                </Column>
                <Column hAlign="Center" width="150px" >
                    <Text text="RGB글꼴색상코드" />
                </Column>
                <Column hAlign="Center" width="150px" >
                    <Text text="RGB셀색상코드" />
                </Column>
                <Column  hAlign="Center" width="150px" >
                    <Text text="생성자" />
                </Column>
                <Column  hAlign="Center" width="150px" >
                    <Text text="수정자" />
                </Column>
                <Column  hAlign="Center" width="150px" >
                    <Text text="생성 시간" />
                </Column>
                <Column  hAlign="Center" width="150px" >
                    <Text text="수정 시간" />
                </Column>
            </columns>

            <items>
                <ColumnListItem type="Navigation" press="onListItemPress">
                    <cells>
                        <HBox alignItems="Center">
                            <Text text="{list>spmd_category_sort_sequence}" visible="true"></Text>
                        </HBox>
                        <HBox>
                            <Text text="{list>org_code}" visible="true"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>org_infos/bizunit_name}" visible="true"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>spmd_category_code}"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>spmd_category_code_name}" visible="true"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>rgb_font_color_code}" visible="true"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>rgb_cell_clolor_code}" visible="true"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>create_user_id}"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{list>update_user_id}"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{path : 'list>local_create_dtm', formatter: '.dateFormatter.toUTCDateTimeString'}"></Text>
                        </HBox>
                        <HBox alignItems="Center">
                            <Text text="{path : 'list>local_update_dtm', formatter: '.dateFormatter.toUTCDateTimeString'}"></Text>
                        </HBox>
                    </cells>
                </ColumnListItem>
            </items>
            
        </Table>
        </VBox>
      </f:content>
    </f:DynamicPage>
</mvc:View>