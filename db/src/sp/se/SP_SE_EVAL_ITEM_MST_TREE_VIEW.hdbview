VIEW SP_SE_EVAL_ITEM_MST_TREE_VIEW AS 
SELECT parent_id
      ,node_id
      ,tenant_id
      ,company_code 
      ,org_type_code
      ,org_code
      ,evaluation_operation_unit_code
      ,evaluation_type_code
      ,evaluation_article_code
      ,evaluation_article_name
      ,parent_evaluation_article_code
      ,evaluation_execute_mode_code
      ,evaluation_article_type_code
      ,evaluation_distrb_scr_type_cd
      ,evaluation_result_input_type_cd
      ,qttive_item_uom_code
      ,qttive_eval_article_calc_formula
      ,evaluation_article_desc
      ,evaluation_article_lvl_attr_cd
      ,update_user_id            AS writer
      ,local_update_dtm         AS write_tm
      ,sort_sequence
      ,hierarchy_rank            /*현재node의 순번(sibling order by에 의한)*/
      ,hierarchy_tree_size       /*현재node포함 하위node 갯수(1이면 leaf node(마지막node))*/
      ,hierarchy_parent_rank     /*부모node의 순번*/
      ,hierarchy_level           /*현재node의 Level*/
      ,hierarchy_root_rank       /*root node의 순번*/
      ,hierarchy_is_cycle        /*순환구조여부(0:False, 1:True)*/ 
      ,hierarchy_is_orphan       /*전개후 연결이 끊어진 노드여부(0:False, 1:True)*/		  
FROM   HIERARCHY (
                  SOURCE (SELECT a.tenant_id
                                ,a.company_code
                                ,a.org_type_code
                                ,a.org_code
                                ,a.evaluation_operation_unit_code
                                ,a.evaluation_type_code
                                ,a.evaluation_article_code
                                ,a.evaluation_article_name
                                ,a.parent_evaluation_article_code
                                ,a.evaluation_execute_mode_code
                                ,a.evaluation_article_type_code
                                ,a.evaluation_distrb_scr_type_cd
                                ,a.evaluation_result_input_type_cd
                                ,a.qttive_item_uom_code
                                ,a.qttive_eval_article_calc_formula
                                ,a.evaluation_article_desc
                                ,a.evaluation_article_lvl_attr_cd
                                ,a.update_user_id
                                ,a.local_update_dtm
                                ,a.sort_sequence                                
                                ,HIERARCHY_COMPOSITE_ID(a.tenant_id, a.company_code, a.org_type_code, a.org_code, a.evaluation_operation_unit_code, a.parent_evaluation_article_code) AS parent_id
                                ,HIERARCHY_COMPOSITE_ID(a.tenant_id, a.company_code, a.org_type_code, a.org_code, a.evaluation_operation_unit_code, a.evaluation_article_code) AS node_id
                          FROM   sp_se_eval_item_mst a)
                  START WHERE parent_evaluation_article_code IS NULL
                  SIBLING ORDER BY sort_sequence, node_id)
ORDER BY hierarchy_rank;